\documentclass{article}

\usepackage{../../header}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Preamble

\title{Algebraic Geometry, Algebraic Topology, and Riemann Surfaces}
\author{Linden Disney-Hogg}
\date{October 2020}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\maketitle
\tableofcontents

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Introduction}
The purpose of this document is to provide a central, searchable, version of the sum of my knowledge on algebraic geometry and Riemann surfaces. I will try and include more modern perspectives using category theory ideas as well as other more historical perspectives. \\
An incomplete list of the sources for this document are:
\begin{itemize}
	\item \textit{Principles of Algebraic Geometry} (Griffiths)
	\item \textit{Algebraic Geometry} (Milne)
\end{itemize}
I will also endeavour to number equations and results, and reference them when I use them. \\
The notes on elliptic functions and curves come from:
\begin{itemize}
	\item \textit{Elliptic Functions and Applications} (Lawden)
	\item \textit{Elliptic Curves} (McKean, Moll) 
	\item often wikipedia
	\item nlab
	\item \textit{Algebraic Curves and Riemann Surfaces} (Miranda)
	\item \textit{Arithmetic of Elliptic Curves} (Silverman)
	\item The Digital Library of Mathematical Functions (\href{dlmf.nist.gov}{dlmf.nist.gov})
\end{itemize} 
and are available in a rearranged form in my \textit{Elliptic.pdf} notes. 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\part{The Introductory Material}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Groups, Rings, and Modules}

This section will be largely stating definitions and results for concreteness. 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Groups}

\begin{definition}
	The \bam{modular group} is 
	\eq{
		\Gamma = PSL(2,\mbb{Z}) = \faktor{SL(2,\mbb{Z})}{\pbrace{\pm I}}	
	}
It is alternatively given as the group of fractional linear transforms 
\eq{
z \mapsto \frac{az+b}{cz+d}
}
s.t. $a,b,c,d \in \mbb{Z}, \, ad-bc=1$. 
\end{definition}

\begin{lemma}
	The modular group is generated by the transforms $s(z) = -1/z, \, t(z) = z+1$. This gives it the presentation 
	\eq{
\Gamma \cong \pangle{s,t \, | \, s^2 = \id = (st)^3}	
}
\end{lemma}

\begin{definition}
	The \bam{congruence subgroups} of $\Gamma$ are, for $N \in \mbb{Z}$, 
	\eq{
		\Gamma(N) = \pbrace{M \in \Gamma \, | \, M \equiv I \, (mod\,  N)}
	}
\end{definition} 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Rings}

\begin{definition}
	Elements of a ring $R$ with a multiplicative inverse are called \bam{units}. Denote the group of units as $R^\times$. 
\end{definition}


\begin{definition}
	An \bam{ideal} of a ring $R$ is an additive subgroup $I$ s.t. $\forall r \in R, \, x \in X,\, rx \in I$. 
\end{definition}

\begin{definition}
	An ideal $I$ is called \bam{principal} if $\exists a \in R$ s.t. $I = (a)$.  
\end{definition}

\begin{definition}
	A ring $R$ is an \bam{integral domain} if it is not zero and $ab=0 \Rightarrow a=0$ or $b=0$. 
\end{definition}

\begin{definition}
	Let $R$ be an integral domain. Then $r\in R$ is \bam{irreducible} if
	\begin{itemize}
		\item $r \neq 0$
		\item $r$ not a unit
		\item $r=st \Rightarrow s$ or $t$ a unit
	\end{itemize}
\end{definition}

\begin{definition}
	$R$ an integral domain is called a \bam{Unique Factorisation Domain (UFD)} if every non-zero non-unit can be written as a finite product of irreducible elements uniquely up to units and reordering. 
\end{definition}

\begin{definition}
	An integral domain is a \bam{Principal Ideal Domain (PID)} if every ideal is principal. 
\end{definition}

\begin{prop}
	Every PID is a UFD
\end{prop}

\begin{prop}$R$ a UFD $\Rightarrow$ $R[X]$ a UFD. 
\end{prop}

\begin{notation}
	We denote the ring of holomorphic functions on a neighbourhood of $z \in \mbb{C}^n$ as $\mc{O}_{n,z}$. We let $\mc{O}_n = \mc{O}_{n,0}$.
\end{notation}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Modules}
\begin{definition}
	Given $R$-modules $M,N$ we define the \bam{tensor product} $T= M \otimes_R N$ with $R$-bilinear map $\phi:M\times N \to T$ by the universal property
	\begin{tkz}
		M\times N \arrow[r,"\phi"] \arrow[dr,"\phi^\prime"'] & T \arrow[d,"\exists !", dashed]\\ & T^\prime  
	\end{tkz}
\end{definition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Field Extensions}
\begin{definition}
	A \bam{field extension} if a pair of fields $K \subseteq L$ s.t. the operations of $K$ are those of the restriction of $L$. It is denoted $L / K$
\end{definition}

\begin{example}
	The set 
	\eq{
		\mbb{Q}(\sqrt{2}) = \pbrace{a+b\sqrt{2} \, | \, a,b \in \mbb{Q}}	
	}
	is a field extension of $\mbb{Q}$. 
\end{example}

\begin{prop}
	If $L/K$ is a field extension, $L$ is a $K$-vector space. 
\end{prop}

\begin{definition}
	The \bam{degree} of a field extension $L/K$ is the dimension of $L$ as a $K$-vector space. It is denoted $[L:K]$.
\end{definition}

\begin{example}
	$[\mbb{Q}(\sqrt{2}):\mbb{Q}] = 2$ as it has basis $\pbrace{1,\sqrt{2}}$
\end{example}

\begin{definition}
	The \bam{transcendence degree} of a field extension $L/K$ is the maximum cardinality of an algebraic independent subset of $L$ over $K$. 
\end{definition}

\begin{example}
	$\mbb{Q}(\sqrt{2},e)/\mbb{Q}$ has transcendence degree 1.
\end{example}

\hl{replace these examples with more C oriented ones. }
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Complex Analysis}
This section should roughly contain the results you would prove in an undergraduate course in complex methods or complex analysis. For the most part these will be presented without proof, unless I believe that the proof adds to the knowledge somehow. 

\hl{Work on this as it becomes necessary}

We start by considering coordinates on $\mbb{C}$. Viewing $\mbb{C}\cong \mbb{R}^2$ we have either 
\eq{
z = x+iy, \, \bar{z} = x-iy \, \text{ or } \,  x = \frac{z+\bar{z}}{2}, \, y  = \frac{z-\bar{z}}{2i}
}
The corresponding derivatives are related by 
\eq{
\pd{z} = \frac{1}{2} \pround{\pd{x} -i \pd{y}}, \;  \pd{\bar{z}} = \frac{1}{2} \pround{\pd{x} + i \pd{y}}
}

\subsection{Fixing Definitions}
I will fix some notation with a definition:
\begin{definition}
	Denote the \bam{Upper Half Plane (UHP)} in $\mbb{C}$ as 
	\eq{
		H = \pbrace{z \in \mbb{C} \, | \, \Im z > 0}	
	}
\end{definition}

The UHP will end up being a special case of the more general \bam{Siegel upper half space} later (\hl{ref this}). It will serve as a classifying space later in conjunction with the modular group. 

\subsection{Mobius Transformations}
Recall that for any distinct $z_1, z_2, z_3 \in \mbb{C}$ we have a Mobius transform that sends them to $0,1,\infty$ given by 
\eq{
	f(z) = \frac{z-z_1}{z-z_3}\frac{z_2 - z_3}{z_2 - z_1}
}
\begin{definition}
	Given distinct $z_0, z_1, z_2, z_3 \in \mbb{C}$ the \bam{cross ratio} is 
	\eq{
		\frac{z_0-z_1}{z_0-z_3}\frac{z_2 - z_3}{z_2 - z_1}
	}
\end{definition}

\begin{prop}
	Distinct $z_0, z_1, z_2, z_3 \in \mbb{C}$ lie on a circline iff their cross-ratio is real. 
\end{prop}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Integral Theorems}

A corollary to Cauchy's integral formula is the following:

\begin{theorem}[Liouville]
	A bounded entire function $f:\mbb{C} \to \mbb{C}$ is constant. 
\end{theorem}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Analytic Varieties}

\begin{definition}
	Given $U \subset \mbb{C}^n$ and open subset, $V \subset U$ is an \bam{analytic variety} if $\forall p \in U, \, \exists U_p$ an open neighbourhood s.t. 
	\eq{
V \cap U_p = \pbrace{f_1 = \dots = f_k = 0}	
}
where $f_i : \mbb{C}^n \to \mbb{C}$ are holomorphic functions. 
\end{definition}

\begin{definition}
	An analytic variety $V \subset U$ is \bam{irreducible} if $\nexists V_1, V_2 \subset U$, $V_i \neq V$, s.t. $V = V_1 \cup V_2$. $V$ is \bam{irreducible at $p \in V$} if $\exists U^\prime$ a neighbourhood of $p$ s.t. $V\cap U^\prime$ is irreducible  
\end{definition}

\begin{prop}
	If $f \in \mc{O}_n$ is irreducible then the variety defined by the zero locus of $f$ is irreducible at 0.
\end{prop}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Category Theory}
Here we will cover the basic category theory required to be able to provide a slightly general formalism to many of the concepts in topology. 

\begin{definition}
	A \bam{Category} $\mc{C}$ is a collection of objects $\text{Obj}\mc{C}$ s.t $\forall A,B \in  \text{Obj}\mc{C}$ (for simplicity we will often write $A,B \in \mc{C}$) there is a set of morphisms $\Hom(A,B)$ under the conditions
	\begin{itemize}
		\item $\forall f \in \Hom(A,B), \, g \in \Hom(B,C), \, \exists g \circ f \in \Hom(A,C)$
		\item the composition $\circ$ is associative with identity $1_A \in \Hom(A,A)$
	\end{itemize}
\end{definition}

\begin{example}
	The collection of sets, with morphisms given by functions, is a category $\text{Set}$
\end{example}

\begin{example}
	There is a category whose objects are Euclidean spaces $\pbrace{\mbb{R}^n}$, and whose morphisms are smooth maps. It is denoted $\text{CartSp}_{\text{smooth}}$
\end{example}

\begin{example}
	The category of differential commutative-graded algebras (DGCAs) with homomorphisms for morphisms exists. Recall a graded algebra $A$ has a map $\deg : A \to \mbb{Z}$, and to be graded-commutative means 
	\eq{
		\forall a,b \in A, \, ab = (-1)^{\deg(a) \deg(b)}ba	
	}
	The differential means we have a map $d:A \to A$ s.t. 
	\eq{
		d(ab) = (da)b + (-1)^{\deg(a)}a(db)
	}
	and $d$ is compatible with the grading.
\end{example}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Functors}

\begin{definition}
	A \bam{covariant functor} is a map between categories $F: \mc{C} \to \mc{D}$ in the sense that for $A \in \mc{C}, \, F(A) \in \mc{D}$, and $f \in \Hom(A,B)$ for $A,B \in \mc{C}$ gives $F(f) \in \Hom(F(A), F(B))$ obeying 
	\begin{itemize}
		\item $F(g \circ f) = F(g) \circ ~F(f)$ 
		\item $F(1_A) = 1_{F(a)}$
	\end{itemize}
	A \bam{contravariant functor} is a map $F:\mc{C} \to \mc{D}$ s.t. for $f \in \Hom(A,B), \, F(f) \in \Hom(F(B),F(A))$
\end{definition}

\begin{example}
	Given a category $\mc{C}$ and $A \in \mc{C}$, the map $h^A :\mc{C} \to \text{Set}$ given by 
	\begin{itemize}
		\item for $X \in \mc{C}, \, h^A(X) = \Hom(A,X)$
		\item for $f \in \Hom(X,Y), \, h^A(f):\Hom(A,X) \to \Hom(A,Y)$ as 
		\eq{
			h^A(f)(g) = f \circ g	
		} 
	\end{itemize}
	is a covariant functor called the \bam{hom functor}. There is a corresponding contravariant functor $h_A$ given by $h_A(X) = \Hom(X,A)$.
\end{example}

\begin{definition}
	If $F,G$ are functors $\mc{C} \to \mc{D}$ then a \bam{natural transformation} from $F$ to $G$ is a family of morphisms s.t. 
	\begin{itemize}
		\item $\forall X \in \mc{C}$ and object $\exists \eta_X \in \Hom_{\mc{D}}(F(X),G(X))$ (called a component)
		\item $\forall X,Y \in \mc{C}, \, f \in \Hom_{\mc{C}}(X,Y)$
		\eq{
			\eta_Y \circ F(f) = G(f) \circ \eta_X	
		}
		i.e. the diagram 
		\begin{tkz}
			F(X) \arrow[r,"\eta_X"] \arrow[d,"F(Y)"'] & G(X) \arrow[d,"G(f)"] \\
			F(Y) \arrow[r,"\eta_Y"'] & G(Y)
		\end{tkz}
		commutes (this was drawn for a covariant functor, but a similar diagram can be drawn for contravariant ones). The set of all natural transformations $F \to G$ is notated as $\Nat(F,G)$. A natural transformation for which all components are isomorphisms is called a \bam{natural isomorphism}.
	\end{itemize}
\end{definition}

\begin{definition}
	A functor $F:\mc{C} \to \text{Set}$ is \bam{representable} if $\exists A \in \mc{C}$ s.t. $F$ is naturally isomorphic to $h^A$.
\end{definition}

\begin{lemma}[Yoneda Lemma]
	Given a category $\mc{C}$ and a covariant functor $F:\mc{C} \to \text{Set}$ for each $A \in \mc{C}$ we have an isomorphism 
	\eq{
		\Nat(h^A,F) \cong F(A)
	}
	A special case is when $F = h^B$ for $B \in \mc{C}$ and 
	\eq{
		\Nat(h^A,h^B) \cong \Hom(B,A)
	}
	The analogue exists if $F$ is contravariant which says 
	\eq{
		\Nat(h_A,F) \cong F(A)
	}
\end{lemma}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Adjoint Functors}

\begin{definition}
	Let $\mathcal{C}, \mathcal{D}$ be categories with functors 
	\begin{center}
	\begin{tikzcd}
    \mathcal{D} \arrow[r,"R",shift left]  & \mathcal{C} \arrow[l,"L",shift left] 
	\end{tikzcd}
\end{center}
The pair of functors $L,R$ are called \textbf{adjoint functors}, with $L/R$ the \textbf{left/right adjoint} if $\exists$ a natural isomorphism between the hom functors 
\[
\operatorname{Hom}_{\mathcal{D}}(L(\cdot),\cdot) \cong \operatorname{Hom}_{\mathcal{C}}(\cdot, R(\cdot))
\]
\end{definition}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Universal Properties(?)}


\begin{definition}
	Given objects $X,Y,Z$ and two morphisms $f:X\to Z, \, g:Y \to Z$, the \bam{pullback} of the morphisms is an object $P$ with morphisms $p_1:P \to X, \, p_2 :P \to Y$ s.t. the diagram
	\begin{tkz}
		P \arrow[r,"p_2"] \arrow[d,"p_1"'] & Y \arrow[d,"g"] \\
		X \arrow[r,"f"'] & Z
	\end{tkz} 
	commutes, and moreover that the pullback is universal wrt to this diagram i.e. 
	\begin{tkz}
		Q \arrow[drr,"q_2", bend left=15] \arrow[ddr,"q_1"', bend right=15] \arrow[dr, dashed, "\exists ! u"]& & \\
		& P \arrow[r,"p_2"] \arrow[d,"p_1"'] & Y \arrow[d,"g"] \\
		& X \arrow[r,"f"'] & Z	
	\end{tkz}
	The pullback is often denoted as $P=X \times_Z Y$
\end{definition}

\begin{definition}
	Given $f:X \to Z, \, g:Y \to Z$ a \textbf{lift} of $f$ to $Y$ is a map $\tilde{f}: X \to Y$ s.t. $f = g \circ \tilde{f}$. 
\end{definition}

\begin{prop}
 A section of the pullback $X \times_Z Y$ gives a lift of $f$.
\end{prop}
\begin{proof}
	Given a section $s:X \to P$, we get a lift $\tilde{f}=p_2 \circ s$. 
\end{proof}

\begin{lemma}[Five Lemma]
	Given a commutative diagram of abelian groups 
	\begin{tkz}
		\dots \arrow[r] & A \arrow[r] \arrow[d,"\alpha"] & B \arrow[r] \arrow[d,"\beta"] & C \arrow[r] \arrow[d,"\gamma"] & D \arrow[r] \arrow[d,"\delta"] & E \arrow[r] \arrow[d,"\eps"] & \dots \\
		\dots \arrow[r] & A^\prime \arrow[r] & B^\prime \arrow[r] & C^\prime \arrow[r] & D^\prime \arrow[r] & E^\prime \arrow[r] & \dots
	\end{tkz}
	where the rows are exact, if $\alpha, \beta, \delta, \eps$ are isomorphisms, then so is $\gamma$. 
\end{lemma}

\begin{definition}
	Given a category $C$, $X,Y \in C$, and $f,g \in \Hom(X,Y)$, the \bam{equalizer} is $E \in C$ with $\text{eq}\in Hom(E,X)$ s.t. the following diagram commutes
	\begin{tkz}
		E \arrow[r,"\text{eq}"] & X \arrow[r,"f",shift left] \arrow[r,"g"',shift right] & Y \\
		O \arrow[u,"\exists ! u",dashed] \arrow[ur,"m"']
	\end{tkz}
\end{definition}

\begin{prop}
	Equalisers are unique up to isomorphism
\end{prop}
\begin{proof}
	If $O=E^\prime$ is another equaliser, then we know we have maps $u,u^\prime$ giving the isomorphism. 
\end{proof}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Abelian Categories}

\begin{definition}
	A category is \textbf{abelian} if it is preadditive and: 
	\begin{itemize}
		\item it has a zero object, 
		\item it has all binary biproducts,
		\item it has all kernels and cokernels,
		\item all monomorphisms and epimorphisms are normal. 
	\end{itemize}
\end{definition}

\begin{example}
	The category of abelian groups is an abelian category (hence the name). 
\end{example}

\begin{remark}
	The idea behind an abelian category is that questions of exactness are naturally posed in one, and so this is the realm where we do homological algebra (see \S \ref{sec: homological algebra}).
\end{remark}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Homological Algebra}\label{sec: homological algebra}
An excellent source for this is \cite{Weibel1995}. 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Derived Functors}

\begin{definition}
	Let $A,B$ be abelian categories s.t $A$ has enough injectives, and $F :A \to B$ a covariant left-exact functor. The \textbf{right derived functors} of $F$ are $R^iF:A \to B$ for $i \geq 0$ defined as follows: for $X \in \operatorname{Ob}(A)$ take an injective resolution
	\[
	0 \to X \to I^0 \to I^1 \to I^2 \to \dots
	\]
	and its image under $F$ (removing the first term)
	\[
	0 \to F(I^0) \to F(I^1) \to F(I^2) \to \dots 
	\]
We then define 
\[
R^iF(X) = (\ker :F(I^i) \to F(I^{i+1}))/(\operatorname{Im}:F(I^{i-1}) \to F(I^i))
\]
\end{definition}

\begin{lemma}
	$R^0F = F$. 
\end{lemma}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Complex Manifolds}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Bundles}
We recall a few necessary bundle definitions and results:
\begin{definition}
	The tensor product of vector bundles $E,F \to M$ is $E\otimes F \to M$ s.t. $(E \otimes F)_m = E_m \otimes F_m$ for $m \in M$. 
\end{definition}

\begin{lemma}
	The tensor product on vector bundles is associative and commutative. 
\end{lemma}

\begin{lemma}
	If $O$ is the trivial line bundle then $E\otimes O = E$. 
\end{lemma}


We make a few more useful definitions. 



\begin{definition}
	The \bam{canonical bundle} on a space $X$ with $\dim X = n$ is the line bundle of exterior $n$-forms on $X$. It is often denoted $K=K_X$, not to be confused with the canonical divisor.
\end{definition}
\begin{remark}
	Note we know the canonical bundle is a line bundle as there is only 1 basis element of $n$-forms on an $n$-dimensional space. 
\end{remark}
\begin{remark}
	Note that if $X$ is an $n$-dimensional complex manifold then the differential forms considered are the holomorphic differential forms so $K_X = \wedge^n T^\ast_{1,0}X$ (see \S \hl{\dots}). 
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{\secmath{\mbb{CP}^n}}

\begin{definition}
The \bam{hyperplane bundle on $\mbb{CP}^n$} is the bundle $\mbb{C}^{n+1}\setminus 0 \to \mbb{CP}^n$ given by the standard projection $(z_0, \dots, z_n) \to [z_0: \dots : z_n]$. It is often denoted $\mc{O}(1)$.  We denote $\mc{O}(k) = \mc{O}(1)^{\otimes k}$ for $k>0$.
\end{definition}

\begin{definition}
The \bam{tautological line bundle} on projective space is $\mc{O}(-1) = \mc{O}(1)^\ast$. We denote $\mc{O}(-k) = \mc{O}(-1)^{\otimes k}$. 
\end{definition}

\begin{prop}
The canonical bundle on the projective space is $K = \mc{O}(-n-1)$. 
\end{prop}
\begin{proof}
	This requires the Euler sequence and the Chern class, see \href{https://mathoverflow.net/questions/176639/canonical-sheaf-of-projective-space}{here}. This is much easier on $\mathbb{P}^1$, where we know we must have $\deg K = 2g-2 = -2$ as it a Riemann surface (see later).  
\end{proof}

\begin{theorem}[Birkhoff-Grothendieck]
	Every holomorphic vector bundle $E \to \mbb{P}^1$ is holomorphically isomorphic to a direct sum of line bundles, that is 
	\[
	E \cong \mc{O}(a_1) \oplus \dots \mc{O}(a_n)
	\]
\end{theorem}
\begin{corollary}
	$E$ is trivial iff $\deg E=0$ and $H^0(\mathbb{P}^1,E(-1))=0$. 
\end{corollary}
For proof and discussion of both of these results, see \cite{Hitchin2013}. \\
We might want to understand the sections of $\mc{O}(k)$. Note given a linear map $\alpha :\mbb{C}^{n+1} \to \mbb{C}$ we can consider it's restriction to a fibre over $x \in \mbb{CP}^n$, which is a linear map of 1d complex vector spaces, hence corresponds to an element in $\mbb{C}$. This gives a section $s_\alpha$. $s_\alpha$ is holomorphic, and moreover we have the following result:
\begin{prop}
	Every holomorphic section of $\mc{O}(1)$ is of the form $s_\alpha$ for $\alpha \in (\mbb{C}^{n+1})^\ast$. 
\end{prop}  
This results has a natural extension 
\begin{prop}
	Every holomorphic section of $\mc{O}(n)$ is of the form $\bigotimes_{i=1}^j s_{\alpha_i}^{p_i}$ for $\alpha_i \in \mbb{C}^{n+1}$, $p_i \in \mbb{N}$ s.t. $\sum_i p_i = k$. 
\end{prop}
These results have an alternative understanding:
\begin{prop}
	Holomorphic sections of $\mc{O}(k)$ are exactly degree-$k$ homogeneous polynomials in the coordinates $z_0, \dots, z_n$. 
\end{prop}
\begin{proof}
	See for example \href{http://math.iisc.ac.in/~vamsipingali/teaching/AIS2019Lecture1.pdf}{here}, \href{https://math.stanford.edu/~vakil/725/class22.pdf}{here}, and \href{http://homepages.ulb.ac.be/~joelfine/preprints/Kahler_intro_ch2.pdf}{here}.
\end{proof}
\begin{corollary}\label{cor: h^0(P^1,O(n))=n+1}
	The space of global sections of $\mathcal{O}_{\mathbb{P}^1}(n)$ has dimension $n+1$ (later we will write this as $h^0(\mathbb{P}^1,\mathcal{O}(n))=n+1$.
\end{corollary}

\begin{example}
	Consider the hyperplane bundle $\mc{O}(1)$, we want to work out its transition functions. On $U_0 = \pbrace{z_0 \neq 0}$ we take coordinate $\zeta = z_1/z_0$ and likewise on $U_1$. On $U_0 \cap U_1$ a point is represented as $[1:\zeta]=[\zeta^{-1}:1]$, and we can take $z_0$ as the coordinate on the fibre, so we have trivialisations
	\eq{
\rho_0 = (\pi,\psi_0) : \pi^{-1}(U_0) &\to U_0 \times \mbb{C} \\
 (z_0, z_1) &\to ([1:\zeta],z_0) \\
\rho_1 = (\pi,\psi_1) : \pi^{-1}(U_1) &\to U_1 \times \mbb{C} \\
(z_0,z_1) &\to ([\zeta^{-1}:1],z_1) 	
}
Hence the transition function $s_{01}=\psi_0 \circ \psi_1^{-1}$ is given by 
\eq{
z_0 = s_{01}(z_0,z_1) z_1 \Rightarrow s_{01} = \zeta
}
In general we then see $\mc{O}(n)$ has transition function $s_{01}=\zeta^n$. 
\end{example}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Tangent Spaces}

\begin{definition}
	Given an even-dimensional smooth manifold, an \bam{almost complex structure} is a fibrewise operator $J:TM \to TM$ s.t. $J^2=-1$. 
\end{definition}

\begin{prop}
	Every complex manifold has an almost complex structure
\end{prop}
\begin{proof}
	Take the map $J\pround{\pd{x}} = \pd{y}, \, J\pround{\pd{y}} = - \pd{x}$
\end{proof}

Given a complex manifold $M$, the complex structure extends to the complexified tangent bundle as 
\eq{
J : TM \otimes \mbb{C} &\to TM \otimes \mbb{C} \\
J(X+iY) &= J(X) + iJ(Y)
}

\begin{definition}
	The $\pm i$ eigenspaces of the complexified tangent bundle $TM\otimes \mbb{C}$ are denoted $T^{1,0}M, \, T^{0,1}M$ respectively, and are called the \bam{holomorphic and antiholomorphic tangent bundles}
\end{definition}

\begin{lemma}
	$T^{0,1}_p(M) = \overline{T^{1,0}_p(M)}$
\end{lemma}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Cohomology}

\begin{notation}
	We denote the vector space of $k$-forms on $M$ as $\Omega^k(M)$. 
\end{notation}

As $\Omega^1(M)\otimes \mbb{C}$ is dual to $TM\otimes \mbb{C}$, we similarly get a decomposition
\eq{
\Omega^1(M) \otimes \mbb{C} = \Omega^{1,0}(M) \oplus \Omega^{0,1}(M)
}
Through the wedge product we then have 
\eq{
\Omega^n(M) &= \oplus_{p+q=n} \Omega^{p,q}(M) \\
\Omega^{p,q}(M) &= \bigwedge^p \Omega^{1,0}(M) \wedge \bigwedge^q \Omega^{0,1}(M)
}
\begin{notation}
	We let $\pi^{p,q}:\Omega^n \to \Omega^{p,q}$ be the appropriate projection maps 
\end{notation}

\begin{definition}
	The \bam{Dolbeault operators} are 
	\eq{
\del = \pi^{p+1,q} \circ d:\Omega^{p,q} &\to \Omega^{p+1,q} \\
\del = \pi^{p,q+1} \circ d:\Omega^{p,q} &\to \Omega^{p,q+1} 
}
\end{definition}

\begin{lemma}
	We have $d = \del + \bar{\del}$ and $\del^2 = \bar{\del}^2 = \del \bar{\del} + \bar{\del} \del = 0$.
\end{lemma}

With this lemma we can define the complex analogy of the de-Rham cohomology

\begin{definition}
	The \bam{Dolbeault cohomology} is 
	\eq{
H^{p,q}_{\bar{\del}}(M) = \faktor{\ker \pbrace{\bar{\del} : \Omega^{p,q} \to \Omega^{p,q+1}}}{\bar{\del} \Omega^{p,q-1}}	
}
\end{definition}

We can then state an analogy of the Poincare lemma:

\begin{prop}[$\bar{\del}$-Poincar\'e lemma]
	For $\Delta\subset \mbb{C}^n$ a polycylinder, 
	\eq{
H^{p,q}_{\bar{\del}}(\Delta) = 0 \, \text{ for } \,  q \geq 1	
}
\end{prop}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Calculus}
Suppose we have a positive definite Hermitian inner-product on $T^{1,0}_pM$, $\pangle{\cdot,\cdot}_p$, for each $p\in M$ a complex manifold. This induces a metric $h$ by 
\eq{
h_p(X_p,Y_p) = \pangle{X_p,Y_p}_p
}
\begin{definition}
	A \bam{coframe} for $h$ is a tuple of forms $\phi_1, \dots, \phi_n$ s.t. 
	\eq{
h = \sum\phi_i \otimes \bar{\phi}_i	
}
\end{definition}
Writing $\phi_i = \alpha_i + i \beta_i $ where $\alpha_i,\beta_i$ are real differential forms we get 
\eq{
h = \sum (\alpha_i \otimes \alpha_i + \beta_i \otimes \beta_i) - i(\alpha_i \otimes\beta_i - \beta_i \otimes \alpha_i)
}
\begin{notation}
	The Riemannian metric induced on $M$ is $g = \sum_i (\alpha_i \otimes \alpha_i + \beta_i \otimes \beta_i)$ while the associated $(1,1)$-form is $\omega = \frac{1}{2}\sum_i (\alpha_i \otimes\beta_i - \beta_i \otimes \alpha_i) = \frac{i}{2} \sum_i \phi_i \wedge \bar{\phi}_i$. 
\end{notation}

\begin{lemma}
	$\omega$ is natural in the sense that if $f:N \to M$ is holomorphic then $\omega_N = f^\ast \omega_M$. 
\end{lemma}

\begin{theorem}[Wirtinger]
	Let $S \subset M$ be a submanifold of dimension $d$. Then 
	\eq{
\vol(S) = \frac{1}{d!} \int_S \omega^d 	
}
\end{theorem}
\begin{proof}
	We will show the case of $S=M$, but then the result follows by naturality. Note the volume element associated to the Riemannian metric $g$ is 
	\eq{
d\mu = \bigwedge^n (\alpha_i \wedge \beta_i)	
}
whereas 
\eq{
\omega^n = \bigwedge^n \pround{\sum \alpha_i \wedge \beta_i} = n! \cdot d\mu 
}
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\part{Algebraic Topology}
In every mathematical physicist's life there comes a point when they need to know some algebraic topology, and there are many great resources to learn this from. These will be my personal notes which will accumulate many resources, which I will try to reference, though I doubt I will give when each one was used. The current list is 
\begin{itemize} 
	\item \textit{Diferential Forms in Algebraic Topology} (Bott, Tu)
	\item nlab
	\item \textit{Algebraic Topology} and \textit{Vector Bundles and K-Theory} (Hatcher) 
	\item often wikipedia
	\item  \href{https://amathew.wordpress.com/2011/08/05/chern-classes/?fbclid=IwAR28yPxJ8rlcn3DXnWs9ouq9fhrQH9VJ5giZ-JujFziTBD5dvM-pzMzMSig}{this} blog post
\end{itemize} 
I hope to come back some day and fill in all the proofs, but in the name of current expedience I will avoid this. 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Regular Topology} 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{General Topology}

\begin{definition}
	An \bam{open cover} of a space $X$ is a collection of open sets $U_\alpha \subset X$ s.t. $X = \bigcup_\alpha U_\alpha$
\end{definition}

\begin{definition}
	A map of topological spaces $f:X \to Y$ is \bam{proper} if $\forall K \subset Y$ compact, $f^{-1}(K)\subset X$ is compact. 
\end{definition}

\begin{prop}
	The image of a proper map in a locally-compact Hausdorff space is closed
\end{prop}

\begin{prop}
	A compact subspace of a Hausdorff space is closed. 
\end{prop}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Differential Topology}

\begin{definition}
	Given a manifold $M$ with atlas $\pbrace{(U_\alpha,\phi_\alpha)}$ the \bam{cocycle condition} is that on triple intersect $U_\alpha \cap U_\beta \cap U_\gamma$
	\eq{
		g_{\alpha \beta} g_{\beta\gamma} = g_{\alpha\gamma}
	}
\end{definition}

\begin{definition}
	A \bam{critical point} of a smooth map of manifolds $f:M\to N$ is $p \in M$ s.t. $(f_\ast)_p:T_pM \to T_{f(p)}N$ is not surjective. A \bam{critical value} is the image of a critical point
\end{definition}

\begin{theorem}[Sard]
	The set of critical values of a smooth map has measure 0.
\end{theorem}



\begin{definition}
	A \bam{good cover} of an $n$-dimensional manifold is an open cover where all finite intersections $U_{\alpha_0} \cap \dots \cap U_{\alpha_p}$ are diffeomorphic to $\mbb{R}^n$. A manifold with a good cover is said to be of \bam{finite type}. 
\end{definition}

\begin{theorem}
	Every manifold is of finite type, and moreover if it is compact, the cover can be chosen to be finite. 
\end{theorem}
\begin{proof}
	Use a cover provided by taking geodesic balls at each point. The second point follows from the definition of compact.
\end{proof}

\begin{definition}
	A \bam{partition of unity} on a manifold $M$ is a collection of non-negative $C^\infty$ functions $\pbrace{\rho_\alpha}$ s.t. 
	\begin{itemize}
		\item Each $p \in M$ has a neighbourhood where $\sum \rho_\alpha$ is a finite sum
		\item $\sum \rho_\alpha$
	\end{itemize}
\end{definition}

\begin{remark}
	It can be, on occasion, useful to know at least one bump function which can be argued can be put into a partition of unity. My favourite is $f: \mbb{R} \to \mbb{R}$ given by  
	\eq{
		f(x) = \left \lbrace \begin{array}{cc}
			e^{\frac{-1}{1-x^2}} & \abs{x} <1 \\
			0 & \abs{x} \geq 1
		\end{array}\right.
	}
\end{remark}

\begin{definition}
	Given a manfiold with open cover $\pbrace{U_\alpha}$, a partition of unity $\pbrace{\rho_\alpha}$ s.t $\supp(\rho_\alpha) \subset U_\alpha$ is called \bam{subordinate} to $\pbrace{U_\alpha}$. 
\end{definition}

\begin{prop}
	Given a manfiold with open cover $\pbrace{U_\alpha}$:
	\begin{itemize}
		\item $\exists$ a partition of unity subordinate to it.
		\item $\exists$ a partition of unity $\pbrace{\rho_\beta}$ s.t. each $\rho_\beta$ has compact support and $\exists \alpha \, s.t. \, \supp(\rho_\beta) \subset U_\alpha$ 
	\end{itemize}
\end{prop}

\begin{prop}
	Every manifold is paracompact.
\end{prop}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Orientation and Integration}

We may use partitions of unity to define the integral of a top form over a manifold $M$. 

\begin{theorem}[Stokes' Threom]
	If $\omega$ is an $(n-1)$-form with compact support on an oriented $n$-dimensional manifold $M$
	\eq{
		\int_M d\omega = \int_{\del M}\omega	
	}
\end{theorem}

\begin{prop}
	Given a diffeomorphim $T: \mbb{R}^n \to \mbb{R}^n$ and $\omega\in \Omega^n(\mbb{R}^n)$ 
	\eq{
		\int_{\mbb{R}^n} T^\ast \omega = \sign{J(T)}\int_{\mbb{R}^n} \omega	
	}
	where $J(T)$ is the determinant of the Jacobian of the transform. 
\end{prop}

\begin{remark}
	Note the above prop makes sense, as if $T$ is invertible, then $\sign J(T)$ never changes sign as it cannot be 0. 
\end{remark}

\begin{definition}
	A diffeomorphism for which $\sign J(T)=1$ is call \bam{orientation preserving}
\end{definition}

\begin{definition}
	Let $M$ be a smooth manifold with atlas $\pbrace{(U_\alpha,\phi_\alpha)}$. We call the atlas \bam{oriented} if all the transition functions $g_{\alpha\beta}=\phi_\alpha \circ \phi_\beta^{-1}$ are orientation preserving. A manifold is called \bam{orientable} if it has an oriented atlas. 
\end{definition}

\begin{remark}
 We will see a different definition later in \S\ref{subsec:orientability via steifel whitney} using more powerful topological tools. 
\end{remark}

\begin{prop}
	An $n$-dimensional manifold is orientable iff it has a global nowhere-vanishing $n$-form. 
\end{prop}

\begin{example}
	$\mbb{R}^n$ is orientable as it has the global non-vanishing $n$-form $dx_1 \wedge \dots \wedge dx_n$ where $\pbrace{x_i}$ are cartesian coordinates.  
\end{example}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{de-Rham Theory}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{General Cohomology}
We will start with some basic definitions and results, with very few proofs for now. 

\begin{definition}
	A direct sum of vector spaces $C = \oplus_{k \in \mbb{Z}} C^k$ is called a \bam{differential complex} if there are homomorphisms
	\eq{
		\dots \to C^{k-1} \overset{d}{\to} C^k \overset{d}{\to} C^{k+1} \to \dots	
	}
	s.t. $d^2=0$
\end{definition}

\begin{definition}
	The \bam{cohomology} of $C$ is $H(C) = \oplus_{k \in \mbb{Z}} H^k(C)$ where 
	\eq{
		H^k(C) = \faktor{\pround{\ker d \cap C^k}}{\pround{\image d \cap C^k}}	
	}
\end{definition}

\begin{definition}
	A (linear) map $f:A \to B$ between two differential complexes is called a \bam{chain map} if it commutes with the differential operator, i.e. $f \circ d_A = d_B \circ f$. 	
\end{definition}

\begin{prop}[Snake Lemma]
	A short exact sequence of chain maps 
	\eq{
		0 \to A \overset{f}{\to} B \overset{g}{\to} C \to 0	
	}
	induces a long exact sequence of cohomology 
	\begin{center}
		\begin{tikzcd}
			\dots \arrow[r] & H^k(A) \arrow[r,"f^\ast"]
			& H^k(B) \arrow[r,"g^\ast"]
			\arrow[d, phantom, ""{coordinate, name=Z}]
			& H^k(C) \arrow[dll,
			"d^\ast",
			rounded corners,
			to path={ -- ([xshift=2ex]\tikztostart.east)
				|- (Z) [near end]\tikztonodes
				-| ([xshift=-2ex]\tikztotarget.west)
				-- (\tikztotarget)}] \\
			& H^{k+1}(A) \arrow[r]
			& \dots 
			& 
		\end{tikzcd}
	\end{center}
\end{prop}
\begin{proof}
	Consider the diagram obtained 
	\begin{center}
		\begin{tkz}
			\phantom{}& \vdots & \vdots & \vdots &\phantom{} \\
			0 \arrow[r] & A^{k+1} \arrow[r,"f"] \arrow[u] & B^{k+1} \arrow[r,"g"] \arrow[u] & C^{k+1} \arrow[r] \arrow[u] & 0 \\
			0 \arrow[r] & A^{k} \arrow[r,"f"] \arrow[u,"d_A"] & B^{k} \arrow[r,"g"] \arrow[u,"d_B"] & C^{k} \arrow[r] \arrow[u,"d_C"] & 0 \\
			\phantom{}& \vdots \arrow[u] & \vdots \arrow[u] & \vdots \arrow[u] &\phantom{}
		\end{tkz}
	\end{center}
	$f$ induces a well defined map on the cohomology $f^\ast$ as $f(a+d_A\omega) = f(a) + (f \circ d_A)(\omega) = f(a) + (d_B \circ f)(\omega)$, so $[f(a)] = [f(a+d_A\omega)]$ in $H^\bullet(B)$.	Likewise for $g$. \\
	Pick $c \in C^k$, then by surjectivity of $g$, $\exists b \in B^k, \, g(b)=c$. If $dc=0$, we can say $g(db) = dg(b) = dc=0$, so by exactness $db = f(a)$ for some $a \in A^{k+1}$. As such we define $d^\ast : H^k(C) \to H^{k+1}(A)$ by $d^\ast[c] = [a]$. 
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{The de-Rham Complex}
\hl{I have seen a lot of de-Rham definitions in the past, so I will come back and fill this in when I have time.}


\begin{definition}
	The \bam{de-Rham complex} $\Omega^\bullet_{dR}$ is a differential complex where $C^k = \Omega^k_{dR}$ are the $k$-forms and $d$ is the exterior derivative. 
\end{definition}



\begin{remark}
	The de-Rham complex for Euclidean spaces admits a functorial description as $\Omega^\bullet$ is the unique contravariant functor from Euclidean spaces with smooth maps to commutative differential graded algebras s.t. $\Omega^0$ is the pullback of functions. The fact that the de-Rham complex admits this functorial description tells us that pullback commutes with the exterior derivative. This definition can be extended to the category of differentiable manifolds. 
\end{remark}



\begin{example}
	The cohomology of the de-Rham complex is sometimes denoted as $H^k_{dR}$. When the context makes clear that we are consider the de-Rham cohomology we omit the dR. \\
	Consider the point space $\ast$. Functions on $\ast$ are specified by points in $\mbb{R}$, and are all constant, so closed. There can be no cohomology higher than the dimension of the space, so we get 
	\eq{
		H^k_{dR}(\ast) = \left\lbrace\begin{array}{cc}
			\mbb{R} & k=0 \\ 0 & k > 0 
		\end{array}	\right.
	}
	Closed $0$-forms on $\mbb{R}$ are again constant functions. Further, any one form $\omega = g(x)dx$ can be written as $df$ for $f(x) = \int_0^x g(u) du$ so we get 
	\eq{
		H^k_{dR}(\mbb{R}) = \left\lbrace\begin{array}{cc}
			\mbb{R} & k=0 \\ 0 & k > 0 
		\end{array}	\right.
	}
	If $U\subset \mbb{R}$ is a union of $m$ dijoint open intervals in $\mbb{R}$ we have 
	\eq{
		H^k_{dR}(U) = \left\lbrace\begin{array}{cc}
			\mbb{R}^m & k=0 \\ 0 & k > 0 
		\end{array}	\right.
	}
\end{example}

\begin{remark}
	As there a no $k$ forms on a manifold $M$ when $k > \dim M$, $H^k_{dR}(M)=0$.
\end{remark}

\begin{definition}
	The \bam{Betti numbers} of a manifold are $b_k(M) = \dim H_{dR}^k(M)$. 
\end{definition}

\begin{definition}
	The \bam{de-Rham complex with compact support} is the differential complex of the k-forms with compact support, denoted $\Omega_c^\bullet(M)$. The cohomology is denotes $H_c^\bullet(M)$.
\end{definition}

\begin{prop}
	If $M$ is compact, $H_c^k(M) = H_{dR}^k(M)$.
\end{prop}

\begin{example}
	We can consider the same cohomologies as above to get 
	\eq{
		H^k_c(\ast)&= \left\lbrace\begin{array}{cc}
			\mbb{R} & k=0 \\ 0 & k > 0 
		\end{array}	\right. \\
	}
	as all functions on $\ast$ are constant. \\
	There are no constant functions on $\mbb{R}$ with compact support except for the zero map, so $H^0_c(\mbb{R})=0$. The only other non-trivial cohomolgy is $H^1_c(\mbb{R})$. Our previous construction (starting the integral at $-\infty$ which we can do as $g$ has compact support) of an $f$ s.t. $df = g(x)dx$ works iff $f$ gets compact support, and this happens where the integral $\int_{\mbb{R}} g(x) \, dx = 0$ so 
	\eq{
		H_c^1(\mbb{R}) = \faktor{\Omega^1_c(\mbb{R})}{\ker\smallint_\mbb{R}}
	}
\end{example}

\begin{remark}
	$\Omega_c^\bullet$ also admits a functorial description, but we must restrict from all smooth maps as pullbacks of functions with compact support might not have compact support. $\Omega_c^\bullet$ can be made either as 
	\begin{itemize}
		\item a contravariant functor when maps are restricted to be proper
		\item a covariant functor when maps are restricted to be inclusions of open sets.
	\end{itemize}	
\end{remark}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{The Poincar\'e Lemma}
We will now build up a bit of theory culminating in a full understanding of de-Rham cohomology of $\mbb{R}^n$. We start by considering the maps 
\begin{tkz}
	\mbb{R}^n \times \mbb{R} \arrow[r,shift left, "\pi"] & \mbb{R}^n \arrow[l,shift left, "s"]	
\end{tkz}
given by $\pi(x,t) = x, \, s(x) = (x,0)$. Under the functor $\Omega^\bullet$ we get 
\begin{tkz}
	\Omega^\bullet(\mbb{R}^n \times \mbb{R}) \arrow[r,shift right, "s^\ast"'] & \Omega^\bullet(\mbb{R}^n) \arrow[l,shift right, "\pi^\ast"']	
\end{tkz}

\begin{prop}
	The induced maps on cohomology
	\begin{tkz}
		H_{dR}^k(\mbb{R}^n \times \mbb{R}) \arrow[r,shift right, "s^\ast"'] & H_{dR}^k(\mbb{R}^n) \arrow[l,shift right, "\pi^\ast"']	
	\end{tkz}	
	are inverse isomorphisms. 
\end{prop}
\begin{proof}
	Certainly $\pi \circ s = \id_{\mbb{R}^n} \Rightarrow s^\ast \circ \pi^\ast = \id_{\Omega^\bullet(\mbb{R}^n)} \Rightarrow s^\ast \circ \pi^\ast = \id_{H_{dR}^\bullet(\mbb{R}^n)}$. It remains to show $\pi^\ast \circ s^\ast = \id$ in cohomoloy. Note that it is not the identity on the complex, as for example $(\pi^\ast \circ s^\ast)f(x,t) = f(x,0)$. However it is sufficient to show $\exists K:\Omega^k(\mbb{R}^n \times \mbb{R}) \to \Omega^{k-1}(\mbb{R}^n \times \mbb{R})$
	\eq{
		1 - \pi^\ast \circ s^\ast = \pm(d\circ K \pm K\circ d)
	} 
	As the RHS maps closed forms to exact ones, it induces $0$ on the cohomology. \hl{finish constructing K}. 
\end{proof}

\begin{corollary}[Poincar\'e lemma]
	We have 
	\eq{
		H_{dR}^k(\mbb{R}^n) = \left\lbrace\begin{array}{cc}
			\mbb{R} & k=0 \\ 0 & k > 0 
		\end{array}	\right.
	}	
\end{corollary}

\begin{corollary}
	Applying the proposition to an atlas for a manifold $M$ we get 
	\eq{
		H_{dR}^k(M \times \mbb{R}) \cong H^k(M)	\Rightarrow H^k(M \times \mbb{R}^n) \cong H^k(M)
	}
	
\end{corollary}

\begin{corollary}
	Homotopic maps induce the same cohomology map. 
\end{corollary}
\begin{comment}
\begin{proof}
$f,g : M \to N$ are homotopic if $\exists F:M \times I \to N$ restricting to $f,g$ at either end of the interval. Extend to a map $M \times \mbb{R}$, construct $f,g$ from $F$ using sections and pullback. 
\end{proof}
\end{comment}

\begin{corollary}
	The de-Rham cohomology is homotopy invariant. 
\end{corollary}

A similar result holds for compact de-Rham cohomology, namely

\begin{lemma}
	$H^{k+1}_c(M \times \mbb{R}) \cong H^k_c(M) \Rightarrow H^{k+l}(M \times \mbb{R}^l) \cong H^k(M)$
\end{lemma}

\begin{corollary}[Poincar\'e lemma for compact support]
	We have 
	\eq{
		H_{c}^k(\mbb{R}^n) = \left\lbrace\begin{array}{cc}
			\mbb{R} & k=0,n \\ 0 & \text{otherwise} 
		\end{array}	\right.
	}	
\end{corollary}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Mayer-Vietoris}

Write $M = U \cup V$ where $M$ is a manifold and $U,V \subset M$ are open. We then get the inclusions 
\begin{tkz}
	M & U\coprod V \arrow[l,hook] & U \cap V \arrow[l,shift left, hook, "i_U"] \arrow[l, shift right, hook, "i_V"']
\end{tkz}
Applying the functor $\Omega^\bullet$ to this yields
\begin{tkz}
	\Omega^\bullet(M) \arrow[r] & \Omega^\bullet(U) \oplus \Omega^\bullet(V) \arrow[r,shift left, "i_U^\ast"] \arrow[r, shift right, "i_V^\ast"'] & \Omega^\bullet(U \cap V) 
\end{tkz}

\begin{definition}
	The \bam{Mayer-Vietoris sequence} is the that obtained using the difference of the above two maps, that is 
	\eq{
		0 \to \Omega^\bullet(M) \to \Omega^\bullet(U) \oplus \Omega^\bullet(V) &\to \Omega^\bullet(U \cap V) \to 0	\\
		(\omega,\tau) &\mapsto \tau - \omega
	} 
\end{definition}

\begin{prop}
	The Mayer-Vietoris sequence is exact	
\end{prop}
\begin{proof}
	\hl{do this eventually, requires partitions of unity}
\end{proof}

\begin{prop}
	The Mayer-Vietoris sequence induces a long exact sequence of cohomology
	\begin{center}
		\begin{tikzcd}
			\dots \arrow[r] & H^k(M) \arrow[r]
			& H^k(U) \oplus H^k(V) \arrow[r]
			\arrow[d, phantom, ""{coordinate, name=Z}]
			& H^k(U \cap V) \arrow[dll,
			"d^\ast",
			rounded corners,
			to path={ -- ([xshift=2ex]\tikztostart.east)
				|- (Z) [near end]\tikztonodes
				-| ([xshift=-2ex]\tikztotarget.west)
				-- (\tikztotarget)}] \\
			& H^{k+1}(M) \arrow[r]
			& \dots 
			& 
		\end{tikzcd}
	\end{center}
\end{prop}

Let us now see some uses of the machinery we have just developed:

\begin{example}
	Consider a circle $S^1$ and cover it with two open sets (north and south, slightly overlapping). The part of the sequence we care about is 
	\begin{center}
		\begin{tikzcd}
			0 \arrow[r] & H^0(S^1) \arrow[r]
			& \mbb{R} \oplus \mbb{R} \arrow[r]
			\arrow[d, phantom, ""{coordinate, name=Z}]
			& \mbb{R} \oplus \mbb{R} \arrow[dll,
			"d^\ast",
			rounded corners,
			to path={ -- ([xshift=2ex]\tikztostart.east)
				|- (Z) [near end]\tikztonodes
				-| ([xshift=-2ex]\tikztotarget.west)
				-- (\tikztotarget)}] \\
			& H^{1}(S^1) \arrow[r]
			& 0 \arrow[r]  
			& 0
		\end{tikzcd}
	\end{center}
	Calling the map $\mbb{R} \oplus \mbb{R} \to \mbb{R} \oplus \mbb{R}$ $\delta$, we can see under $\delta, \, (\omega,\tau) \mapsto (\omega-\tau,\omega-\tau)$. Hence $\dim \image \delta = 1 \Rightarrow \dim \ker \delta = 1$. Counting dimensions of the maps we see 
	\eq{
		H^0(S^1) \cong \mbb{R} \cong H^1(S^1)
	}
	We can extend this to calculate for any sphere. Covering $S^n$ with $U,V$ the north/south hemisphere respectively extended so they cover the equator, we get $U\cap V$ is homotopic to $S^{n-1}$, and $U,V$ are contractible. Hence in the Mayer-Vietoris we get a sequence
	\begin{center}
		\begin{tikzcd}
			\dots \arrow[r] & H^k(S^n) \arrow[r]
			& (\delta_{k0})(\mbb{R} \oplus \mbb{R}) \arrow[r]
			\arrow[d, phantom, ""{coordinate, name=Z}]
			& H^{k}(S^{n-1}) \arrow[dll,
			"d^\ast",
			rounded corners,
			to path={ -- ([xshift=2ex]\tikztostart.east)
				|- (Z) [near end]\tikztonodes
				-| ([xshift=-2ex]\tikztotarget.west)
				-- (\tikztotarget)}] \\
			& H^{k+1}(S^n) \arrow[r]
			& \dots  
			& 
		\end{tikzcd}
	\end{center}
	This means that we have for $k>0, \, H^k(S^{n-1})\cong H^{k+1}(S^{n})$ and
	\begin{center}
		\begin{tikzcd}
			0 \arrow[r] & H^0(S^n) \arrow[r]
			& \mbb{R} \oplus \mbb{R} \arrow[r]
			\arrow[d, phantom, ""{coordinate, name=Z}]
			& H^{0}(S^{n-1}) \arrow[dll,
			"d^\ast",
			rounded corners,
			to path={ -- ([xshift=2ex]\tikztostart.east)
				|- (Z) [near end]\tikztonodes
				-| ([xshift=-2ex]\tikztotarget.west)
				-- (\tikztotarget)}] \\
			& H^{1}(S^n) \arrow[r]
			& 0  
			& 
		\end{tikzcd}
	\end{center}
	We can then prove by induction that for $n \geq 1$ $H^k(S^n) = \mbb{R}$ if $k=0,n$ and 0 otherwise. 
\end{example}

\begin{prop}
	If a manifold has a finite good cover, then its cohomology is finite dimensional.
\end{prop}
\begin{proof}
	We will use proof by induction on the cardinality of the good cover, noting that if $M$ is diffeomorphic to $\mbb{R}^n$ then we have a cover given by $M$, and the result is true by the Poincar\' lemma. \\ 
	We now note from the part of the Mayer-Vietoris sequence for $U\cup V$ 
	\eq{
		\dots \to H^{k-1}(U \cap V) \overset{d^\ast}{\to} H^k(U \cup V)	\overset{r}{\to} H^k(U) \oplus H^k(V) \to \dots
	}
	that 
	\eq{
		H^k(U \cup V) \cong \ker r \oplus \image r \cong \image d^\ast \oplus \image r
	}
	(this is just the first isomorphisms theorem and exactness). Hence, if $H^k(U), H^k(V), $ and $H^k(U \cap V)$ are f.d. then so is $H^k(U \cup V)$. \\
	Now suppose $M$ has good cover $\pbrace{U_0, \dots, U_p}$. Then $(U_0 \cup \dots \cup U_{p-1}) \cap U_p$ has a good cover 
	\eq{
		\pbrace{U_0 \cap U_p, \dots, U_{p-1} \cap U_p}
	}
	By the induction hypothesis $(U_0 \cup \dots \cup U_{p-1}) \cap U_p$ has f.d. cohomology, and so does $M$ from the Mayer-Vietoris (taking $U = U_0 \cup \dots \cup U_{p-1}, \, V = U_p$).
\end{proof}

With this results, we can define a related quantity

\begin{definition}
	On an $n$-dimensional manifold with f.d. cohomology, the \bam{Euler characterstic} of $M$ is 
	\eq{
		\chi(M) = \sum_{k=0}^n (-1)^k \dim	H^k_{dR}(M)
	} 
\end{definition}

We can also build a Mayer-Vietoris sequence for the functor $\Omega_c^\bullet$ taken to be covariant when restricted to inclusions. The image of the inclusion $j:U \hookrightarrow M$ under the functor is $j_\ast : \Omega_c^\bullet(U) \to \Omega_c^\bullet(M)$ which extends a form by 0. This gives the sequence 
\begin{tkz}
	\Omega_c^\bullet(M) & \arrow[l,"\text{sum}"] \Omega_c^\bullet(U) \oplus \Omega_c^\bullet(V) & \arrow[l,"-j_\ast \oplus j_\ast"] \Omega_c^\bullet(U \cap V) 
\end{tkz}

\begin{prop}
	The Mayer-Vietoris sequence with compact support
	\begin{tkz}
		0 & \arrow[l] \Omega_c^\bullet(M) & \arrow[l] \Omega_c^\bullet(U) \oplus \Omega_c^\bullet(V) & \arrow[l] \Omega_c^\bullet(U \cap V) & \arrow[l] 0
	\end{tkz}
	is exact	
\end{prop}

\begin{remark}
	This is in the opposite direction to our other Mayer-Vietories sequence for standard de-Rham cohomology. The difference is from the functor being covariant. 
\end{remark}

\begin{prop}
	The Mayer-Vietoris sequence with compact support induces a long exact sequence of cohomology
	\begin{center}
		\begin{tikzcd}
			\dots \arrow[r] & H_c^k(U \cap V) \arrow[r]
			& H^k_c(U) \oplus H^k_c(V) \arrow[r]
			\arrow[d, phantom, ""{coordinate, name=Z}]
			& H^k_c(M) \arrow[dll,
			"d^\ast",
			rounded corners,
			to path={ -- ([xshift=2ex]\tikztostart.east)
				|- (Z) [near end]\tikztonodes
				-| ([xshift=-2ex]\tikztotarget.west)
				-- (\tikztotarget)}] \\
			& H^{k+1}_c(U \cap V) \arrow[r]
			& \dots 
			& 
		\end{tikzcd}
	\end{center}
\end{prop}

\begin{example}
	We can use this Mayer-Vietoris sequence to calculte $H_c^\bullet(S^1)$, which we can check against $H^\bullet_{dR}(S^1)$ as they must be the same. \\
	Using the same cover as before we get the same part of the sequence 
	\eq{
		0 \to H_c^0(S^1) \to \mbb{R} \oplus \mbb{R} \to \mbb{R} \oplus \mbb{R} \to H_c^1(S^1) \to 0	
	}
	and again the image and kernel in $\mbb{R} \oplus \mbb{R}$ are 1 dimensional. 
\end{example}

Many of our other results have compact support analogues, e.g. 
\begin{prop}
	If a manifold has a finite good cover, then its compact-support cohomology is finite dimensional. 
\end{prop}

We can say more about the relation between cohomology using that integration descends to cohomology, giving on oriented $n$-dimensional manifolds $M$ a pairing
\eq{
	\int : H^k(M) \otimes H^{n-k}_c(M) &\to \mbb{R} 
}
given by $(\omega, \tau) \mapsto \int_M \omega \wedge \tau$
\begin{lemma}
	The two Mayer-Vietoris sequences may be paired to gether to form the diagram 
	\begin{tkz}
		\arrow[r] & H^k(U \cup V) \arrow[r] & H^k(U) \oplus H^k(V) \arrow[r] & H^k(U \cap V) \arrow[r] & H^{k+1}(U \cup V) \arrow[r] & \phantom{\dots} \\
		& \otimes & \otimes & \otimes & \otimes & \\
		\phantom{\dots} & \arrow[l] H_c^{n-k}(U \cup V) \arrow[d,"\int_{U\cup V}"] & \arrow[l] H_c^{n-k}(U) \arrow[d,"\int_U + \int_V"] \oplus H^{n-k}_c(V)  & \arrow[l] H_c^{n-k}(U \cap V) \arrow[d,"\int_{U\cap V}"] & \arrow[l] H_c^{n-k-1}(U \cup V) \arrow[d,"\int_{U\cup V}"] &  \arrow[l] \\
		& \mbb{R} & \mbb{R} & \mbb{R} & \mbb{R}& 
	\end{tkz}
	sign-commutative in the sense that 
	\eq{
		\int_{U \cap V} \omega \wedge d_\ast \tau = \pm \int_{U \cup V} (d^\ast \omega) \wedge \tau
	}
\end{lemma}

\begin{remark}
	The above lemma is equivalent to saying we get the sign-commutative diagram
	\begin{tkz}
		\arrow[r] & H^k(U \cup V) \arrow[r] \arrow[d] & H^k(U) \oplus H^k(V) \arrow[r] \arrow[d] & H^k(U \cap V) \arrow[r] \arrow[d] & \phantom{\dots} \\
		\arrow[r] & \pround{H_c^{n-k}(U \cup V)}^\ast \arrow[r] & \pround{H_c^{n-k}(U)}^\ast \oplus \pround{H_c^{n-k}( V)}^\ast \arrow[r] & \pround{H_c^{n-k}(U \cap V)}^\ast \arrow[r] & \phantom{\dots}
	\end{tkz}
\end{remark}

\begin{prop}[Poincar\'e duality]
	If $M$ is an $n$-dimensional orientable manifold and has a finite good cover, 
	\eq{
		H^k(M) \cong \pround{H^{n-k}_c(M)}^\ast
	}	
\end{prop}
\begin{proof}
	Again proceed by induction on the size of the good cover, noting it is true for $\mbb{R}^n$. The above lemma used with the five lemma gives that if Poincar\'e duality holds for $U,V,U\cap V$ then it holds for $U \cup V$. 
\end{proof}

\begin{remark}
	This result can be extended to any orientable manifold 
\end{remark}

\begin{corollary}
	The Euler characteristic any odd-dimensional, compact, orientable manifold is 0
\end{corollary}
\begin{proof}
	If $M$ is compact orientable $n$-dimensional, then 
	\eq{
		\dim H^k(M) &= \dim H_c^{n-k}(M) = \dim H^{n-k}(M)
	}
	so if $n$ odd
	\eq{
		\chi(M) &= \sum_{k=0}^n (-1)^k \dim H^k(M) \\
		&= \sum_{k=0}^{\frac{n-1}{2}} (-1)^k \dim H^k(M) + \sum_{k=\frac{n+1}{2}}^n (-1)^k \dim H^{n-k}(M) \\
		&= \sum_{k=0}^{\frac{n-1}{2}} (-1)^k \dim H^k(M) + \sum_{k=\frac{n-1}{2}}^{0} (-1)^{n-k} \dim H^{k}(M) \\
		&= \psquare{1+(-1)^n}\sum_{k=0}^{\frac{n-1}{2}} (-1)^k \dim H^k(M)
	}
	As $n$ odd, $1+(-1)^n=0$.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Cohomology of Bundles}

\begin{prop}
	Let $M$ be a manifold and $\pbrace{U_\alpha}$ a collection of open subsets. Then 
	\eq{
		H_{dR}^k\pround{\coprod_\alpha U_\alpha} &= \prod_\alpha H_{dR}^k(U_\alpha)	\\
		H_c^k \pround{\coprod_\alpha U_\alpha} &= \bigoplus_\alpha H_c^k(U_\alpha)
	}
\end{prop}

\begin{prop}[K\"unneth Formula]
	$H^k(M \times F) = \oplus_{p+q=k} H^p(M) \otimes H^q(F)$
\end{prop}

With this result we can start to develop more specialised results for cohomology on bundles. For important definitions on bundles look at my EKC of Gauge theory notes. \\
The K\"unneth formula has a specialisation for fibre bundles. 

\begin{theorem}[Leray-Hirsch]
	Let $E\to M$ be a fibre bundle with fibre $F$. If there are global cohomology classes $e_1, \dots, e_r$ on $E$ which, restricted to each fibre, freely generate the cohomology of $F$, then $H^k(M)$ is a free module over $H^k(M)$ i.e 
	\eq{
		H^k(E) \cong H^k(M) \otimes \mbb{R}\pbrace{e_1, \dots, e_r} \cong H^k(M) \otimes H^k(F)
	} 	
\end{theorem}

\begin{prop}
	If $E\to M$ is a vector bundle, then $	H^k(E) \cong H^k(M)$.
\end{prop}
\begin{proof}
	Deformation retract onto the zero section of the bundle and then use homotopy invariance of cohomolgy
\end{proof}

\begin{remark}
	\hl{how does this agree with Leray Hirsch?}
\end{remark}

\begin{prop}
	Let $E \to M$ be a rank-$k$ vector bundle, where $E,M$ are orientable and of finite type. Then $H_c^{p+k}(E) \cong H^{p}_c(M)$. 
\end{prop}
\begin{proof}
	Let $\dim M = n$. Then 
	\eq{
		H_c^p(E) &\cong \pround{H^{n+k-p}(E)}^\ast \quad \text{(Poincar\'e duality)} \\
		&\cong \pround{H^{n+k-p}(M)}^\ast \quad \text{(homotopy invariance)} \\
		&\cong H_c^{p-k}(M) \quad \text{(Poincar\'e duality)}
	}
\end{proof}

\begin{remark}
	This result can be generalised to remove the orientability assumption on $M$, using more machinery. 
\end{remark}

In vector bundles there is an additional type of de-Rham cohomology we can look at 

\begin{definition}
	The \bam{de-Rham complex with compact vertical support} is the differential complex $\Omega_{cv}^\bullet$. of $k$-forms with compact support in the fibres. The associated cohomology is notated as $H^\bullet_{cv}$
\end{definition}

\begin{definition}
	We define the \bam{integration along the fibre} map for a rank-$k$ vector bundle $\pi: E \to M$ to be 
	\eq{
		\pi_\ast : \Omega_{cv}^{p+k}(E) &\to \Omega^p(M) \\
		(\pi^\ast \phi)\wedge f(x,t)dt_{i_1} \wedge \dots \wedge dt_{i_r} &\mapsto 0 \quad (r < k) \\
		(\pi^\ast \phi) \wedge f(x,t) dt_1 \wedge \dots \wedge dt_n &\mapsto \phi \int_{\mbb{R}^n} f(x,t) dt_1 \dots dt_n
	}
	where $t_i$ are coordinates on the fibre, and $\phi \in \Omega^\bullet(M)$, so $\pi^\ast \phi$ is the pullback to $E$. 
\end{definition}

\begin{prop}[Projection Formula]
	Let $\pi:E \to M$ be an oriented rank-$k$ vector bundle, $\tau \in \Omega^p(M)$ and $\omega \in \Omega^q_{cv}(E)$. Then 
	\eq{
		\pi_\ast \pround{(\pi^\ast \tau) \wedge \omega} = \tau \wedge \pi_\ast \omega
	}
	Moreover, if $p+q=\dim E$, then 
	\eq{
		\int_E (\pi^\ast \tau) \wedge \omega = \int_M \tau \wedge \pi_\ast \omega 
	}
\end{prop}

\begin{theorem}[Thom Isomorphism]
	If $E \to M$ is an orientable rank-$k$ vector bundle with base manifold of finite type then 
	\eq{
		H^{p+k}_{cv}(E) \cong H^{p}(M)
	}
	where the isomorphism $H^{p+k}_{cv}(E) \to H^{p}(M)$ is $\pi_\ast$, and the isomorphism $\mc{T}:H^p(M) \to H^{p+k}_{cv}(E)$ is called the \bam{Thom isomorphism}. 
\end{theorem}

\begin{remark}
	The theorem is actually true for arbitrary manifolds. 
\end{remark}

\begin{definition}
	The image of the constant function $1 \in H^0(M)$ under the Thom isomorphism $\mc{T} : H^p(M) \overset{\cong}{\to} H^{p+k}_{cv}(E)$ is called the \bam{Thom class} of the oriented vector bundle $E$. We write it as $\Phi = \Phi(E)$. 
\end{definition}

\begin{lemma}
	The Thom isomorphism is given explicitly by 
	\eq{
		\mc{T} \omega = \pi^\ast \omega \wedge \Phi
	}	
	for $\omega \in H^p(M)$.
\end{lemma}
\begin{proof}
	Using the projection formula and that $\pi_\ast \Phi =1$ we get 
	\eq{
		\pi_\ast \pround{(\pi^\ast \omega)\wedge \Phi} = \omega \wedge \pi_\ast \Phi = \omega	
	}
\end{proof}

\begin{prop}
	The Thom class $\Phi$ of a rank-$k$ vector bundle $E$ can be uniquely characterised as the cohomology class in $H_{cv}^n(E)$ which restricts to the generator of $H_c^k(F)$ on each fibre. 
\end{prop}
\begin{proof}
	Since $\pi_\ast \Phi =1$, $\ev{\Phi}{F}$ is a bump form that integrates to $1$, and any such $\Phi$ satisfies 
	\eq{
		\pi_\ast \pround{(\pi^\ast \omega)\wedge \Phi} = \omega \wedge \pi_\ast \Phi = \omega	
	}
\end{proof}

\begin{prop}
	If we have two oriented vector bundles $E,F \to M$ with projections $\pi_E, \pi_F$ then 
	\eq{
		\Phi(E \oplus F) = \pi_E^\ast \Phi(E) \wedge \pi_F^\ast \Phi (F)	
	}
\end{prop}
\begin{proof}
	Note 
	\eq{
		H_c^{k+l}(\mbb{R}^k \times \mbb{R}^l) \cong H_c^k(\mbb{R}^k) \otimes H_c^l(\mbb{R}^l)	
	}
	and this isomorphism is given by the wedge products of the generators. 
\end{proof}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{The Poincar\'e Dual and Thom Isomorphism. }
The concept of Poinar\'e duality can be extended to the idea of a Poincar\'e dual:

\begin{definition}
	Given $M$ an $n$-dimensional oriented manifold, and $i:S \hookrightarrow M$ a closed $k$-dimensional oriented submanifold, the \bam{(closed) Poincar\'e dual} to $S$ is $[\eta_S]\in H^{n-k}(M)$ given by 
	\eq{
		\int_S i^\ast \omega = \int_M \omega \wedge \eta_S	
	} 
	for any $\omega \in H_c^k(M)$. 
\end{definition}

Let us unpack this definition: Given such an $\omega$, $\supp(\ev{\omega}{S}) = \supp(\omega) \cap S$ is closed and compact, and as pullback an $d$ commute we know $\int_S i^\ast \omega$ indeed exists and is well defined. Then by Poincar\'e duality the map $H_c^k(M) \to \mbb{R}, \, \omega \mapsto \int_S i^\ast \omega$ (which is a linear functional) corresponds to a unique element of $H^{n-k}(M)$. \\
We can define the related notion 
\begin{definition}
	Given $M$ an $n$-dimensional oriented manifold, and $i:S \hookrightarrow M$ a compact $k$-dimensional oriented submanifold, the \bam{(compact) Poincar\'e dual} to $S$ is $[\eta_S^\prime]\in H^{n-k}_c(M)$ given by 
	\eq{
		\int_S i^\ast \omega = \int_M \omega \wedge \eta_S^\prime	
	} 
	for any $\omega \in H^k(M)$. 	
\end{definition}

\begin{remark}
	As manifolds are Hausdorff, any compact submanifold is also closed. Hence a compact submanifold has both an associated closed Poincar\'e dual and an associated compact Poincar\'e dual. These are in general different and so need specifying. 
\end{remark}

\begin{example}
	Consider $M= \mbb{R}^n$ with compact submanifold $P=\ast$. Note $H^n(\mbb{R}^n)=0$ so $[\eta_P]=[0]$. Contrastingly, $[\eta_P^\prime]$ must generate $H^n_c(\mbb{R}^n)\cong \mbb{R}$, and as closed $0$-forms are constant functions, all we require is that $\int_{\mbb{R}^n} \eta_P^\prime=1$, which can be achieved by a normalised bump function. 
\end{example}

We can now make the following link between a the Poincar\'e dual and the Thom isomorphism:

\begin{prop}
	Let $M$ be an orientable $n$-dimensional manifold, and $S \subset M$ and orientable $k$-dimensional submanifold. Then 
	\eq{
		\eta_S = j_\ast \Phi(N_S)
	}
	where $j:N_S \hookrightarrow M$ is the injection so $j_\ast$ is extension of forms by 0. 
\end{prop}
\begin{proof}
	Consider the diagram 
	\eq{
		H^p(S) \overset{\mc{T}}{\to} H_{cv}^{p+n-k}(T)\overset{j_\ast}{\to} H^{p+n-k}(M)	
	}
	where $T$ is a tubular 
\end{proof}

\begin{corollary}
	If $E\to M$ is an oriented vector bundle over an oriented bsae then 
	\eq{
		\eta_{s_0(M)} = j_\ast \Phi(E)	
	}
	where $s_0:M\to E$ is the zero section. 
\end{corollary}

\begin{corollary}[Localisation Principle]
	The support of $\eta_S$ for $S\subset M$ can be shrunk to any tubular neighbourhood of $S$.
\end{corollary}
\begin{proof}
	Any tubular neighbourhood is diffeomorphic to the normal bundle. 
\end{proof}

\begin{prop}
	Under Poincar\'e duality, transversal intersection of oriented submanifolds corresponds to the wedge product of forms, i.e 
	\eq{
		\eta_{R \cap S} = \eta_R \wedge \eta_S	
	}
\end{prop}
\begin{proof}
	If $R,S$ are oriented submanifolds that intersect transversally, then $N_{R\cap S} = N_R \oplus N_S$, and so 
	\eq{
		\eta_{R \cap S} &= j_\ast \Phi(N_{R \cap S}) \\
		&= j_\ast \Phi\pround{N_R \oplus N_S} \\
		&= j_\ast \pround{\pi_R^\ast \Phi(N_R) \wedge \pi_S^\ast \Phi(N_S)} \\
		&= \eta_R \wedge \eta_S
	}
\end{proof}

\begin{prop}
	If $f:N \to M$ is an orientation-preserving map of oriented manifolds, $S \subset M$ a closed oriented submanifold s.t. $f^{-1}(S)\subset N$ is closed, then
	\eq{
		\eta_{f^{-1}(S)} = f^\ast \eta_S	
	}
\end{prop}
\begin{proof}
	Suppose $\dim S = k, \, \dim M = m, \, \dim N = n$. Consider the diagram 
	\begin{tkz}
		H^p(S) \arrow[r,"\mc{T}"] \arrow[d,"f^\ast"'] & H_{cv}^{p+m-k}(T) \arrow[r,"j_\ast"] \arrow[d,"f^\ast"'] & H^{p+m-k}(M) \arrow[d,"f^\ast"'] \\ 
		H^{p}(f^{-1}S ) \arrow[r,"\mc{T}"] & H_{cv}^{p+m-k}(f^{-1}T) \arrow[r,"j_\ast"] & H^{p+n-k}(N) 
	\end{tkz}
	where $T$ is a tubular neighbourhood of $S$. This diagram commutes, and so following the image of the generator $1$ in $H^0(f^{-1}S)$ gives the result. 
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Euler Class}
We now want to go through the proces of calculating a Thom class explicitly. We will start by constructing a generator of $H_c^n(\mbb{R}^n)$ from $H^{n-1}(S^{n-1})$ from: 
\begin{definition}
	Given an orientation on an $n$-dimensional manifold $M$ specified by $\omega \in \Omega^n(M)$, $\tau \in \Omega^n(M)$ is called \bam{positive} if $[\omega] = [\tau] \in H^n(M)$. 
\end{definition} 
We define positive orientation on $S^{n-1}$ to be compatible with the standard orientation on $\mbb{R}^n$, that is the generator $[\sigma]\in H^{n-1}(S^{n-1})$ is positive if $dr \wedge \pi^\ast \sigma$ is positive on $\mbb{R}^n\setminus\pbrace{0}$. Here, $r$ is the radial coordinate, and $\pi:\mbb{R}^n \setminus \pbrace{0} \to S^{n-1}$ is the deformation retraction onto the sphere along radius. 

\begin{example}
	If we consider $S^1$, then using $\pi:\mbb{R}^2\setminus\pbrace{0} \to S^1$ we have $\pi^\ast (d\theta) = d\theta$, and as $dx \wedge dy = rdr \wedge d\theta$. the form $d\theta$ is positive giving orientation to $S^1$.
\end{example}

\begin{definition}
	Letting $[\sigma]\in H^{n-1}(S^{n-1})$ be the positive generator, the form $\psi \in \pi^\ast \sigma$ is called the \bam{angular form} on $\mbb{R}^n \setminus \pbrace{0}$.
\end{definition}

Given the angular form, and a function $\rho(r)$ s.t $d\rho = \rho^\prime(r) dr$ is a bump funcion, integral 1, $\rho(0)\neq0$ (we will choose $\rho(0)=-1$, see below), then we can take $[d\rho \wedge \psi]$ as a generator of $H_c^n(\mbb{R}^n)$. 

\begin{center}
	\begin{tikzpicture}
	\begin{axis}[
	axis lines = center,
	xlabel = $r$,
	xmin = 0,
	%legend style={at={(1,0.6)}},
	%xtick={1},
	%ytick={0.693},
	%yticklabels={$\log(2)$},
	%ymajorgrids,
	%xmajorgrids,
	%grid style=dashed,
	%yticklabel pos=right,
	%extra x ticks={0},
	extra y ticks = {0},
	set layers,
	axis on top,
	]
	
	
	\addplot [
	domain=0:1, 
	samples=100, 
	color=red,
	]
	{-exp(1-1/(1-x^2))};
	%\addlegendentry{$a_1(t)$}
	
	\addplot [
	domain=1:2, 
	samples=100, 
	color=red,
	forget plot,
	]
	{0};
	
	
	\end{axis}
	\end{tikzpicture}
\end{center}

\begin{remark}
	Note we can write 
	\eq{
		d\rho \wedge \psi = d(\rho \wedge \psi)	
	}
	as $\psi$ is closed, but because $\rho(0)\neq 0$ this is not a global form so $d\rho \wedge \psi$ isn't exact. 
\end{remark}

\begin{definition}
	Given an oriented rank-$k$ vector bunle over $M$, let $E^0$ be the complement to the zero section. The \bam{global angular form} is global form on $E_0$ whose restriction to each fibre is that angular form on $\mbb{R}^k \setminus \pbrace{0}$
\end{definition}

We now specialise to the case of a rank-$2$ vector bundle $\pi : E \to M$ over an $n$-dimensional base. Taking an open cover $\pbrace{U_\alpha}$ of $M$ with local coordinates $x_\alpha^1, \dots, x_\alpha^n$ we can take local coordinates on $E^0$ given by $r_\alpha,\theta_\alpha,\pi^\ast x_\alpha^1, \dots, \pi^\ast x^n_\alpha$. On $U_\alpha \cap U_\beta$ define $\varphi_{\alpha\beta}$ by 
\eq{
	\theta_\beta = \theta_\alpha + \pi^\ast \varphi_{\alpha\beta}
}
\begin{lemma}
	On triple intersections $U_\alpha \cap U_\beta \cap U_\gamma$ 
	\eq{
		\varphi_{\alpha\beta} + \varphi_{\beta \gamma} - \varphi_{\alpha\gamma} &\in 2\pi\mbb{Z} \\
		\Rightarrow d\varphi_{\alpha\beta} + d\varphi_{\beta \gamma} - d\varphi_{\alpha\gamma} &= 0
	}
\end{lemma}
\begin{proof}
	This follows immediately from the cocyle condition. 
\end{proof}

\begin{lemma}
	$\exists \xi_\alpha \in \Omega^1(U_\alpha)$ s.t. 
	\eq{
		\frac{1}{2\pi} d\varphi_{\alpha\beta} = \xi_\beta - \xi_\alpha	
	}
\end{lemma}
\begin{proof}
	Take $\pbrace{\rho_\alpha}$ to be a partition of unity subordinate to $\pbrace{U_\alpha}$ and let $
	\xi_\alpha = -\sum_\gamma \rho_\gamma d\varphi_{\alpha\gamma}	$
	Then 
	\eq{
		\xi_\beta - \xi_\alpha &= -\sum_\gamma \rho_\gamma (d\varphi_{\beta\gamma} - d\varphi_{\alpha\gamma}) \\
		&=  \sum_\gamma \rho_\gamma d\varphi_{\alpha\beta} = d\varphi_{\alpha\beta}
	}
\end{proof}

\begin{lemma}
	The $d\xi_\alpha$ combine to make a global closed two form $e=e(E)$ on $M$ that is not necessarily exact. 
\end{lemma}
\begin{proof}
	On $U_\alpha \cap U_\beta$ 
	\eq{
		d\xi_\alpha - d\xi_\beta = d(\xi_\alpha - \xi_\beta) = -\frac{1}{2\pi}d^2\varphi_{\alpha\beta}=0
	}
	Closed-ness is clear, as on each patch it is exact, but in general the $\xi_\alpha$ do not combine to make a global one form. 
\end{proof}

\begin{definition}
	The cohomology $[e] \in H^2(M)$ is called the \bam{Euler class} of the oriented vector bundle $E$. 
\end{definition}

\begin{example}
	The Euler class of the trivial bundle is 0.
\end{example}

\begin{prop}
	The Euler class does not depend on the choice of $\xi$ in the definition. 
\end{prop}
\begin{proof}
	If $\pbrace{\bar{\xi}}$ is another such set then $\bar{\xi}_\alpha - \xi_\alpha$ makes a global one form so the difference in $e$ is an exact form. 
\end{proof}

\begin{prop}
	$d\psi = -\pi^\ast e$
\end{prop}

\begin{remark}
	Note that on an oriented rank-$2$ vector bundle the transition functions can be taken to have values in $SO(2) \cong U(1)$. 
\end{remark}

\begin{prop}
	We have the formula that 
	\eq{
		\ev{e(E)}{U_\alpha} = -\frac{1}{2\pi i} \sum_\gamma d\pround{\rho_\gamma d\log g_{\gamma \alpha}}	
	}
\end{prop}

\begin{corollary}
	The Euler class if functorial, i.e.  given $f:N \to M$ covered by an orientation preserving map and $E \to M$ a rank-$2$ oriented vector bundle 
	\eq{
		e(f^\ast E) = f^\ast e(E)
	}
\end{corollary}

\begin{prop}
	$\Phi(E) = d\pround{\rho \wedge \psi} = d\rho \wedge \psi - \rho \pi^\ast e(E)$
\end{prop}
\begin{corollary}
	The pullback of the Thom class to $M$ by the zero section is the Euler class
\end{corollary}
\begin{proof}
	We explicitly calculate, calling $s:M \to E$ the zero section 
	\eq{
		s^\ast \Phi &= d(\rho(0)) \wedge s^\ast \psi - \rho(0) s^\ast \pi^\ast e \\
		&= (\pi \circ s)^\ast e = e
	}
\end{proof}

\begin{theorem}[Gauss-Chern-Bonnet]
	We have
	\eq{
\chi(M) = \int_M e(TM)	
}
\end{theorem}

\begin{prop}
	If $F$ is the curvature 2-form of a connection on $E\to M$ then 
	\eq{
e(E) = \frac{1}{(2\pi)^{n/2}} \Pfaff(F)	
}
where $n=\dim M$. 
\end{prop}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Characteristic Classes}

We start by recalling a definition:

\begin{definition}
	A \bam{complex line bundle} is a complex vector bundle of rank 1.
\end{definition}

\begin{remark}
	Analogously to how real vector bundles have reduction of structure group $GL(r,\mbb{R}) \to O(r)$, complex vector bundles have reduction $GL(r,\mbb{C})\to U(\mbb{C})$.
\end{remark}

\begin{lemma}
	There is a bijection between complex line bundles  and oriented rank-2 real vector bundles.
\end{lemma}
\begin{proof}
	Every rank-$r$ $\mbb{C}$-vector space $E$ corresponds to a rank-$2r$ $\mbb{R}$-vector space $E_{\mbb{R}}$  by forgetting the complex structure. Then as $U(1) \cong SO(2)$ each complex line bundle in the case $r=1$ this is a bijection if we give an orientation to the real bundle, which picks out $SO(2) \subset O(2)$.
\end{proof}

\begin{definition}
	The \bam{first Chern class} of a complex line bundle $L$ with base $M$ is the Euler class of $L_{\mbb{R}}$, that is 
	\eq{
		c_1(L) = e(L_\mbb{R}) \in H^2(M)	
	} 
\end{definition}

More generally the Chern class can be given a definition for higher rank vector bundles:
\begin{definition}
	Let $E \to M$ be a rank-$r$ vector bundle with connection $A$. Then the \bam{total Chern class} is 
	\eq{
c(E) &= \det \pround{1+\frac{i}{2\pi}F} \\
&= 1 + \frac{i}{2\pi}\tr F + \dots \\
&= 1 + c_1(E) + \dots \in H^0(M) \oplus H^2(M) \oplus \dots  	
}
\end{definition}
\begin{prop}
	The total Chern class is independent of the choice of connection $A$. 
\end{prop}

	There are other ways of viewing Chern classes which will be helpful. First, let $E \to M$ be a rank-$r$ vector bundle and let $s_1, \dots, s_r$ be global sections. We can define
	\eq{
D_k = \pbrace{x \in M \, | \, s_1(x) \wedge \dots \wedge s_k(x) = 0}	
}
which will turn out to be a cycle. Then $D_k$ is the Poincar\'e dual to $c_{r-k+1}$. See p.411-414 of \cite{Griffiths2014}. This gives the following useful result:
\begin{prop}
	$c_1(E) = c_1(\wedge^r E)$
\end{prop}


\begin{remark}
	We can come up with a very categorical definition of the Chern classes, which I would like to explain now (glossing over much of the detail). We will need a few ingredients:
	\begin{itemize}
		\item The functor $\Vect_{n,\mbb{C}}$ sending spaces to isomorphism classes of complex rank-$n$ vector bundles,
		\item The functor $H^\bullet(\cdot, \mbb{Z})$ sending spaces to their integer-valued singular cohomology ring.
	\end{itemize}
	A fact we will need is that $\Vect_{n,\mbb{C}}$ is a representable functor:
	\begin{itemize}
		\item rank-$n$ vector bundles over $X$ are principal $GL_n(\mbb{C})$ bundles over $X$, and as such are classified by homotopy classes of maps $X \to BGL_n(\mbb{C})$. It is known that $BGL_n(\mbb{C}) = Gr_n(\mbb{C}^\infty)$.
	\end{itemize}
	It is actually a  general fact that homotopy classes of maps $X\to K(G,n)$ are in bijection with $H^n(X,G)$, where $K(G,n)$ is an Eilenberg-Maclane space, so our second functor is also representable, but we will not want to use this. \\
	The Yoneda lemma then says that to give a Chern class - i.e. a natural map $c : \Vect_{n,\mbb{C}}(X) \to H^\bullet(X,\mbb{Z})$ - is equivalent to giving an element of the cohomology ring $H^\bullet(Gr_n(\mbb{C}^\infty),\mbb{Z})$. If we require the map $c$ to obey the axioms
	\begin{itemize}
		\item $c=1$ on the trivial bundle 
		\item $c$ takes values only in $H^{2k}, \, k \leq n$ on rank-$n$ bundles
		\item for vector bundles $E,E^\prime$, $c(E \oplus E^\prime) = c(E)c(E^\prime)$
		\item $c \in H^2(\mbb{CP}^1,\mbb{Z})$ is a generator for the tautological line bundle. 
	\end{itemize}
	then it turns out the Chern class is fully determined. To see more see \S3.5.1 of \cite{Hori2003}.
\end{remark}

\begin{prop}
	If $0 \to A \to B \to C \to 0$ is a SES of sheaves then $c(A)c(C)=c(B)$. 
\end{prop}

There are other characteristic classes we can build from the Chern class:
\begin{definition}
	Suppose $c(E) = \prod_{i=1}^r (1+x_i)$. Then the \bam{Chern character} is 
	\eq{
\text{ch}(E) = \sum_{i=1}^r e^{x_i}= r + c_1 + \frac{1}{2}(c_1^2 - 2c_2) + \dots 
}
\end{definition}
\begin{prop}
	The Chern character obeys
	\begin{itemize}
		\item $\text{ch}(E \oplus F) = \text{ch}(E) + \text{ch}(F)$ 
		\item $\text{ch}(E \otimes F) = \text{ch}(E) \text{ch}(F)$
	\end{itemize}
\end{prop}

\begin{definition}
	Suppose $c(E) = \prod_{i=1}^r (1+x_i)$. Then the \bam{Todd class} is
	\eq{
\text{td(E)} = \prod_{i=1}^r \frac{x_i}{1-e^{-x_i}} = 1 + \frac{1}{2}c_2 + \frac{1}{12}(c_1^2 + c_2) + \dots 
}
\end{definition}
\begin{prop}
$\text{td}(E \oplus F) = \text{td}(E) \text{td}(F)$. 	
\end{prop}
\begin{remark}
	Occasionally the notation will be used $\text{td}(TM) = \text{td}(M)$. 
\end{remark}

\begin{theorem}[Hirzebruch-Riemann-Roch]
	We have 
	\eq{
\chi(E) = \int_M \text{ch}(E) \wedge \text{td}(TM) 
}
\end{theorem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Understanding Manifolds}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Bundle Theory}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Dual Bundles}

\begin{definition}
	The \bam{dual bundle} of a vector bundle $E \to M$ is $E^\ast \to M$ where the fibres of $E^\ast$ are the dual spaces of the fibres of $E$, with the transition functions $g_{ij}^\ast = \pround{g_{ij}^T}^{-1}$.
\end{definition}

\begin{remark}
	We can check the cocycle condition here as 
	\eq{
		g_{kj}^\ast g_{ji}^ \ast = \pround{g_{kj}^T}^{-1} \pround{g_{ji}^T}^{-1}= \pround{g_{ji}^T g_{kj}^T}^{-1} = \pround{\psquare{g_{kj}g_{ji}}^T}^{-1}=\pround{g_{ki}^T}^{-1} =g_{ki}^\ast	
	}
\end{remark}

\begin{example}
	The dual bundle to the tangent bundle is the cotangent bundle, i.e. $\pround{TM}^\ast = T^\ast M$
\end{example}

\begin{prop}
	If $E \to X$ is a real vector bundle, $E^\ast = \operatorname{Hom}(E, \mathbb{R} \times X)$. 
\end{prop}
\begin{remark}
	A like result exists for complex vector bundles. 
\end{remark}
\begin{corollary}
	The map $E \to E^\ast$ is a contravariant functor. 
\end{corollary}

\begin{lemma}
	$E \otimes E^\ast \cong \End(E)$. 
\end{lemma}

\begin{lemma}
	Line bundles have tensor inverses, i.e given $L$, $\exists L^{-1}$ s.t. $L \otimes L^{-1} \cong O$ the trivial bundle. 
\end{lemma}
\begin{proof}
	We will show this by showing $L^{-1} = L^\ast$. To trivialise $\End(L)$ we note here the transition maps are $g_{ij} \otimes g_{ij}^{-1} =  1 \otimes 1$ as $g_{ij}, g_{ij}^\ast \in \mbb{F}$. Hence any section is globally defined. 
\end{proof}

\begin{remark}
	\hl{Why is the identity section not global on any other vector bundle.}
\end{remark}

If $E$ is a complex vector bundle, we have an additional construction. 

\begin{definition}
	The \textbf{conjugate bundle} of a vector bundle $E \to M$ is $\overline{E} \to M$ where the fibres are the complex conjugate and the transition functions are $\overline{g_{ij}}$. 
\end{definition}

\begin{prop}
	If $E$ has a positive definite Hermitian inner product, then $\overline{E} \cong E^\ast$. 
\end{prop}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Pullbacks}

\begin{definition}
	Given manifolds $M,N$, fibre bundle $E \to M$, and map $f:N \to M$, we define the \bam{pullback bundle of E by f} to be 
	\eq{
		f^{\ast}E \equiv \pbrace{(n,e) \, | \, f(n) = \pi(e)} \subset N \times E	
	}
	the bundle with base $N$, with the natural projection onto the first component $p_1$. 
\end{definition}

\begin{lemma}
	The pullback bundle is the unique maximal subset of $N \times E$ s.t. 
	\begin{tkz}
		f^{\ast} E \arrow[r,"p_2"] \arrow[d,"p_1"'] & E \arrow[d,"\pi"] \\
		N \arrow[r,"f"'] & M
	\end{tkz} 
	commutes.
\end{lemma}

\begin{ex}
	Look at how this relates to the categorical concept of a pullback. 
\end{ex}

\begin{example}
	The pullback by the identity map is isomorphic to the bundle itself, i.e. 
	\eq{
		\id^{\ast} E &\leftrightarrow E \\
		(\pi(e), e) &\leftrightarrow e
	}
\end{example}

\begin{prop}
	If $\pbrace{g_{\alpha\beta}}$ are the transition functions for $E\to M$ wrt to the cover $\pbrace{U_\alpha}$ of $M$, then $\pbrace{f^\ast g_{\alpha\beta} = g_{\alpha\beta}\circ f}$ are the transition functions for $f^\ast E \to N$ wrt to the cover $\pbrace{f^{-1}U_\alpha}$
\end{prop}
\begin{corollary}
	The pullback of an oriented vector bundle is oriented. 	
\end{corollary}


\begin{lemma}
	Given $g:M^{\prime\prime}\to M^{\prime}, \, f:M^\prime \to M$, $(f \circ g)^{\ast}E = g^{\ast}\pround{f^{\ast}E}$.
\end{lemma}

\begin{lemma}
	The pullback of a trivial bundle is trivial. i.e. If $E =F \times M$, then for $f:N \to M$, $f^{\ast}E = N \times F$.
\end{lemma}

\begin{remark}
	If we let $\Vect_k(M)$ be the isomorphism classes of rank-$k$ real vector bundles, and $\Vect_k(f) = f^{\ast}$ be the pullback of vector bundles along $f$, then we get a contravariant functor from manifolds with smooth maps to pointed sets with basepoint preserving maps, where the basepoint of $\Vect_k(M)$ is the trivial bundle over $M$.
\end{remark}

\begin{prop}
	If $f,g : M \to N$ are homotopic then $f^{\ast}E$ and $g^{\ast}E$ are isomorphic.
\end{prop}
\begin{remark}
	This result holds true more generally for a  paracompact topological space $M$. As all manifolds are paracompact, this holds in our case.
\end{remark}
\begin{corollary}
	A bundle with contractible base is trivial.
\end{corollary}
\begin{proof}
	Suppose we have 
	\begin{tkz}
		M \arrow[r,"f",shift left] & \ast \arrow[l,"g",shift left]
	\end{tkz}
	s.t. $g \circ f$ is homotopic to $\id_M$. Then 
	\eq{
		E \cong (g\circ f)^{\ast}E  = f^{\ast}\pround{g^{\ast}E}
	}
	As $g^{\ast}E$ is a bundle over a point it is necessarily trivial, and so $f^{\ast}(g^{\ast}E)$ is also.
\end{proof}

\begin{example}
	We want to work out $\Vect_k(S^1)$. Intuition might tell us that $Vect_1(S^1) = \mbb{Z}$ (number of twists of a mobius like band, where 0 is the trivial bundle) so we have a starting point. This will not turn out to be the case. \\
	To specify a isomorphism class of rank $k$-vector bundles, we can take the cover of $S^1$ with only two open sets and then an element of $\Vect_k(S^1)$ is specified by two elements $g,h \in GL(k,\mbb{R})$ up to conjugation. We can use a reduction of structure bundle to only ask about elements of $O(k)$. 
\end{example}

\begin{definition}
	Let $X$ be an algebraic surface and $\pi:L \to X$ a line bundle. Then the \bam{tautological section} of $\pi^\ast L$ as a bundle over $L$ is given by $\sigma(l) = (l,l)$. 
\end{definition}

\begin{remark}
	Not that the tautological section is indeed valid as we have 
	\eq{
		\pi^\ast L = \pbrace{(l,l^\prime) \in L\times L \, | \, \pi(l) = \pi(l^\prime)}	
	}
	so certainly $(l,l) \in \pi^\ast L$. 
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Tubular Neighbourhoods}

\begin{definition}
	Given $S \subset M$ a $k$-dimsneionsal submanifold of an oriented $n$-dimensional manifold $M$, a \bam{tubular neighbourhood} of $S$ in $M$ is $U$ an open neighbourhood of $S$ in $M$ diffeomorphic to a rank-$(n-k)$ vector bundle over $S$. 
\end{definition}

\begin{example}
	The 'namesake' example is when $S$ is a line in $M=\mbb{R}^3$, then we can attach an open disk to each point on $S$ so the disk is normal to $S$. The union of these disks forms a 'tube' whose centre line is $S$. 
\end{example}

\begin{definition}
	Given $S \subset M$ a submanifold, the \bam{normal bundle} of $S$ in $M$ is $N = N_{S/M}$ defined by the exact sequence 
	\eq{
		0 \to TS \to \ev{TM}{S} \to N \to 0
	}
	We may also notate the normal bundle as $T^\perp S$.
\end{definition}

\begin{example}
	The normal bundle to the bases of a vector bundle (injected via the zero section) is the bundle itself.
\end{example}

\begin{theorem}
	Every submanifold has a tubular neighbourhood $T$ and $T$ is diffeomorphic to the normal bundle. 
\end{theorem}

We can give every real vector bundle $E \to M$ a Riemannian metric as follows: Let $\pbrace{U_\alpha}$ be an open cover of $M$ which trivialises $E$, on each $U_\alpha$ choose a frame of $\ev{E}{U_\alpha}$ and declare it to be orthonormal (givng a Riemannian metric $\pangle{\cdot,\cdot}_\alpha$ here) and then given a partition of unity subordinate to $U_\alpha$, take 
\eq{
	\pangle{\cdot,\cdot} = \sum_\alpha \pangle{\cdot,\cdot}_\alpha
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Projective Bundles}
We will now briefly discuss the way to compactify line bundles, as discussed \href{https://math.stackexchange.com/questions/1380512/compactifying-mathcalo-mathbbp1-2}{here} and \href{https://en.wikipedia.org/wiki/Projective_bundle}{here}. We start by recalling a definition. 
\begin{definition}
	Given a $\mathbb{F}$-vector space $V$, the space $\mathbb{P}(V)$ is the space of equivalence class of $V \setminus \pbrace{0}$ under the equivalence relation $\forall x \in V, \, \lambda \in \mathbb{F}^\times, \, x \sim \lambda x$.  
\end{definition}
Hence from any vector bundle we can construct an another fibre bundle.
\begin{definition}
	Given a vector bundle $E$, the corresponding projective bundle is $\mathbb{P}(E)$, the bundle with fibres $\mathbb{P}(E)_z = \mathbb{P}(E_z)$. 
\end{definition}
\begin{remark}
	This is a special case of the Grassmannian bundle, unsurprisingly. 
\end{remark}
We have the following characteristic property. 
\begin{prop}
	Given a vector bundle $E \to X$ and a morphism $f:Y \to X$, to factorise $f$ through the projection map $p:\mathbb{P}(E) \to X$ is to specify line subbundle of $f^\ast E$.  
\end{prop}
\begin{proof}
	See \cite{Hartshorne1977}, prop 7.12, as well as \href{https://ncatlab.org/nlab/show/projective+bundle}{nlab} and the general Wikipedia page on the \href{https://en.wikipedia.org/wiki/Proj_construction}{Proj} construction.  
\end{proof}

\begin{definition}
	The \textbf{Segre embedding} is the map $\sigma:\mathbb{P}^n \times \mathbb{P}^m \to \mathbb{P}^{(n+1)(m+1)-1}$ given by
	\begin{align*}
		([X_0:\dots: X_n],[Y_0: \dots :Y_m]) \mapsto [X_0Y_0: \dots :X_iY_j:\dots :X_n Y_m]
	\end{align*}
\end{definition}
\begin{prop}
	This map is an isomorphism if either $n=0$ or $m=0$
\end{prop}
\begin{proof}
	Checking dimensions we have 
	\begin{align*}
		\dim(\mathbb{P}^n \times \mathbb{P}^m) &= n+m \, , \\
		\dim(\mathbb{P}^{(n+1)(m+1)-1}) &= nm+n+m \, .
	\end{align*}
\end{proof}
\begin{corollary}
	The projective bundle is stable under twisting by a line bundle, i.e $\mathbb{P}(E) \cong \mathbb{P}(E \otimes L)$. 
\end{corollary}

Now recall the standard way to projectivise (i.e. compactify) the vector space $\mathbb{F}^n$ is to consider
\begin{align*}
	\mathbb{F}^n &\hookrightarrow \mathbb{PF}^n \\
	(z_1, \dots, z_n) &\mapsto [z_1 : \dots : z_n : 1] 
\end{align*}
\begin{example}
	This is how we construct $\mathbb{CP}^n$ recall, and how we compactify $\mathbb{C}$ to $\mathbb{P}^1$. 
\end{example}
Now for any rank-$n$, $\mathbb{F}$-vector space $V$ we projectivise as 
\begin{align*}
	V &\hookrightarrow \mathbb{P}(V \oplus \mathbb{F}) \\
	v &\mapsto [(v,1)]
\end{align*}
Combining this with the definition of projectivisation of a vector bundle, we now get a compactification 
\[
E \hookrightarrow \mathbb{P}(E \oplus O) 
\]
where $O$ is the trivial rank-1 vector bundle $X \times \mathbb{F}$. In this sense studying projective bundles is useful as we can enforce the compactness property on a bundle we have. \\
Projective bundles carry a tautological bundle themselves.
\begin{definition}
	Take a bundle $\pi:E \to X$, then the \textbf{tautological bundle} over $\mathbb{P}(E)$ is given by $H$ whose dual is the pullback 
	\begin{center}
		\begin{tikzcd}
			H^\ast = \pi^\ast \mathbb{P}(E) \arrow[r] \arrow[d] & \mathbb{P}(E) \arrow[d] \\ E \arrow[r,"\pi"] & X
		\end{tikzcd}
	\end{center}
\end{definition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Splitting Principle}

\begin{theorem}[Splitting Principle]
	Let $E \to X$ be a rank-$n$ vector bundle, $X$ paracompact. Then $\exists Y = \operatorname{Fl}(E)$ (the \textbf{flag bundle} associated to $E$) and map $p:Y \to X$ s.t. 
	\begin{itemize}
		\item the induced cohomology homomorphism $p^\ast : H^\bullet(X) \to H^\bullet(Y)$ is injective, and 
		\item the pullback bundle is a direct sum on line bundle, i.e. 
		\[
		p^\ast E = L_1 \oplus \dots \oplus L_n \, .
		\]
	\end{itemize}
\end{theorem}
The power of this theorem is that an equation holding in $H^\bullet(Y)$ holds in $H^\bullet(X)$, for example the following prop.
\begin{prop}
	$c_1(E) = c_1(\det E)$. 
\end{prop}
\begin{proof}
	By the splitting principle it is sufficient to show it in the case of $E$ being a direct sum of line bundles. 
\end{proof}

 There is a stronger theorem if we give constraints to our bundle. 
\begin{theorem}[Grothendieck-Birkhoff]
	Every holomorphic rank-$n$ vector bundle $E \to \mathbb{P}^1$ is holomorphically isomorphic to a direct sum of line bundles, i.e. 
	\[
	E \cong \mathcal{O}(a_1) \oplus \dots \mathcal{O}(a_n) \, .
	\]
	Moreover the $a_i$ are unique up to reordering. 
\end{theorem}
\begin{proof}
	See \emph{Sur la classification des fibrés holomorphes sur la sphère de Riemann}, Grothendieck 1957.
\end{proof}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Serre Duality}
\hl{This section is not currently in a sensible position - find a beter place for it}.\\
We will now state a sheaf cohomology analogue of Poincar\'e duality:
\begin{theorem}[Serre Duality]
	Let $E \to X$ be an algebraic vector bundle over $n$-dimensional (proper) smooth variety. Then 
	\eq{
H^k(E) \cong H^{n-k}(E^\ast \otimes K_X)^\ast
}
naturally. 
\end{theorem}

This is currently an abstract isomorphism, which we will make more concrete in the case where $X$ is a compact ($n$-dimensional) complex manifold and $E$ is holomorphic. This exposition comes from \href{https://en.wikipedia.org/wiki/Serre_duality}{here} and \cite{Huybrechts2005}. \\
The Hodge star operator acts in this case as 
\[
\star : \Omega^{p,q}(X) \overset{\cong}{\to} \Omega^{n-q,n-p}(X) \, ,
\]
(note the change in the holomorphic and anti-holomorphic indices) and so
\[
\overline{\star} : \Omega^{p,q}(X) \overset{\cong}{\to} \Omega^{n-p,n-q}(X) \, ,
\]
where we have defined $\overline{\star}\omega = \star \overline{\omega}$. This gives us a pairing of $(p,q)$ form by 
\[
\pangle{\alpha,\beta} = \int_X \alpha \wedge \overline{\star}\beta \, .
\]
\begin{remark}
	This pairing is familiar to use in the case of real manifolds from gauge theory. 
\end{remark}
Now if $(E,h)$ is a Hermitian holomorphic vector bundle, then the metric $h$ gives an antilinear isomorphism $\tau:E \to E^\ast$. We then get an antilinear isomorphism 
\[
\overline{\star}_E : \Omega^{p,q}(X,E) \overset{\cong}{\to} \Omega^{n-p,n-q}(X,E^\ast)
\]
where $\Omega^{p,q}(X,E) = \Omega^{p,q}(X) \otimes \Gamma(E)$ and $\overline{\star}_E(\omega \otimes s) = (\overline{\star}\omega) \otimes \tau(s)$.\\
It can be shown that this descends to an isomorphism of the Dolbeault cohomology, so combining with the dualising operation we have a linear isomorphism $H^{p,q}_{\overline{\partial}}(X,E) \cong H^{n-p,n-q}_{\overline{\partial}}(X,E^\ast)^\ast$.
\begin{remark}
	Standard Dolbeault cohomology $H^{p,q}_{\overline{\partial}}(X)$ is the cohomology coming from the chain complex of $\Omega^{p,q}(X)$ with differential $\overline{\partial}$. The extension of this to $H^{p,q}_{\overline{\partial}}(X,E)$ uses $\Omega^{p,q}(X,E)$ with now the  \textbf{Dolbeault operator} $\overline{\partial}_E$. which just acts as $\overline{\partial}$ in each basis direction of the fibre locally (i.e. once a local frame has been chosen). For more see \href{https://en.wikipedia.org/wiki/Holomorphic_vector_bundle}{here}. 
\end{remark}
 We then need the following result.
\begin{theorem}[Dolbeault's Theorem]
	$H^{p,q}_{\overline{\partial}}(X,E) \cong H^q(X,\Omega^p \otimes E)$, where $\Omega^p$ is the sheaf of holomorphic $p$-forms on $X$, and the rhs cohomology is sheaf cohomology.
\end{theorem}
\begin{remark}
	This can be viewed as a complex analogue of de Rham's theorem. Note that this makes sense, as holomorphic form will go to zero under $\overline{\partial}$, so from the perspective of cohomology they look like coefficients.  
\end{remark}
\begin{remark}
	\hl{This needs reorganising so we do not discuss sheaves and sheaf cohomology before we have defined it. Moreover, we probably want a section for Dolbeault cohomology and Hodge theory on its own. }
\end{remark}
As a result, we can express Serre duality in this case as the chain of isomorphisms 
\[
H^q(X,E) \cong H^{0,q}_{\overline{\partial}}(X,E) \cong H^{n,n-q}_{\overline{\partial}}(X,E^\ast)^\ast \cong H^{n-q}(X,K_X \otimes E^\ast)^\ast \, .
\]
\begin{example}
	Take a $1$d complex manifold (e.g a Riemann surface) and take $E$ to be the trivial bundle. Then we should have 
	\[
	H^1(X,O)^\ast \cong H^{0,1}_{\overline{\partial}}(X)^\ast \cong H^{1,0}_{\overline{\partial}}(X) \cong H^0(X,K_X) \, .
	\]
	An element of $H^0(X,K_X)$ is a global section of the canonical bundle, given by a holomorphic one form $\omega = w(x)dx$, where $x$ is the complex coordinate on $X$. For a genus $g$ hyperelliptic curve of the form $y^2=\dots$ we can take $w = \frac{x^k}{y}$ for $0 \leq k \leq g-1$. Now $\omega \in H^{1,0}_{\overline{\partial}}$ gives the element $\overline{\star}\omega \in H^{1,0}_{\overline{\partial}}$. We can check 
	\begin{align*}
	\overline{\star} dx &= \star\overline{(du+idv)} = (dv)+(-i)(-du) = id\overline{x} \, , \\
	\Rightarrow \overline{\star} \omega &= i\overline{w(x)} d\overline{x} \, .
	\end{align*}
We can view the pairing in two ways. Firstly, from a Dolbeault cohomology perspective, we have the map 
\begin{align*}
 \int_X : H^{1,1}_{\overline{\partial}}(X) \to \mathbb{C} \, .
\end{align*} 
This turns into a map $\check{H}^1(X,K_X) \to \mathbb{C}$ as a integral $dz$ over all 1-simplices in $X$. \\
We can derive this map (called the \textbf{trace morphism} in general) for $\mathbb{P}^1$ explicitly. Here taking $U_i$ to be the standard cover we have the SES
\[
0 \to \Omega(U_0) \times \Omega(U_1) \overset{\check{\delta}}{\to} \Omega(U_0 \cap U_1) \to 0
\] 
as the \v{C}ech complex. Elements of $\Omega(U_0 \cap U_1)$ are of the form $f(z)dz$ where $f$ is a Laurent polynomial. $\Omega(U_0)$ is spanned by terms $z^n dz$ for $n \geq 0$, $\Omega(U_1)$ is spanned by terms $(z^{-1})^n d(z^{-1}) = -z^{-n-2} dz$ for $n \geq 0$, and so $H^1(\mathbb{P}^1,\Omega_{\mathbb{P}^1})$ has basis $z^{-1}dz$. The obvious $H^1(\mathbb{P}^1,K_{\mathbb{P}^1}) \to \mathbb{C}$ is then reading off the coefficient of this terms, which corresponds to taking the residue at $0$, i.e. doing the line integral around the equator. For more see \cite{Vakil2010} \S 30.1.    
\end{example}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Serre Duality for Riemann Surfaces}
We can also given an interpretation of Serre duality directly (i.e not via Dolbeault cohomology) when $X$ is a Riemann surface. This comes from Vakil's `Baby Algebraic Geometry Seminar' \cite{Vakil2000}. 

\begin{definition}
	A \textbf{repartition} (or \textbf{adele}) is an indexed set $\pbrace{r_P}_{P \in X}$ s.t. $\forall P, \, r_P \in K(X)$, and moreover for all but finitely many $P, \, r_P \in O_{X,P}$. We denote the ring of all repartitions as $R$ when it is clear, which is a $K(X)$-algebra. \\
	Further, given a divisor $D$ we define the additive subgroup 
	\[
	R(D) = \pbrace{\operatorname{ord}_P(r_P) + \operatorname{ord}_P(D) \geq 0} \, .
	\]
\end{definition}

\begin{prop}
	$D \leq D^\prime \Rightarrow R(D) \hookrightarrow R(D^\prime)$. 
\end{prop}
\begin{proof}
	Suppose $\operatorname{ord}_P(r_P) \geq -\operatorname{ord}_P(D)$. $\operatorname{ord}_P(D) \leq \operatorname{ord}_P(D^\prime) \Rightarrow -\operatorname{ord}_P(D) \geq -\operatorname{ord}_P(D^\prime)$ and so by transitivity done. 
\end{proof}

\begin{prop}
	$H^1(X,O_X(D)) \cong \faktor{R}{(R(D) + K(X))}$. 
\end{prop}
\begin{proof}
	The following proof is from Serre's \textit{Groupes alg\'{e}briques et corps de classes} (\hl{ref}), reproduced in \cite{Vakil2000} and \cite{Belmans2014}. \\
	Let $\underline{K(X)}$ be the corresponding constant sheaf. There's a natural injection $O_X(D) \hookrightarrow \underline{K(X)}$. Letting $S$ be the cokernel of this map gives the SES
	\[
	0 \to O_X(D) \to \underline{K(X)} \to S \to 0 \, ,
	\]
	and so the LES of cohomology 
	\[
	K(X) = H^0(X,\underline{K(X)}) \to H^0(X,S) \to H^1(X,O_X(D)) \to H^1(X,\underline{K(X)}) =0 \, .
	\]
	To complete the proof it is necessary to show $H^0(X,S) \cong \faktor{R}{R(D)}$. The stalk $S_P$ is the quotient of the stalk at $P$ of $\underline{K(X)}$ and $O_X(D)$, i.e. it is $K(X)$ mod functions whose order at $P$ is $\geq - \operatorname{ord}_P(D)$. By its definition we then see $\faktor{R}{R(D)} = \bigoplus_P S_P$ (recall direct sum requires that only finitely many terms aren't zero).  \\
	We next want to show $S = \bigoplus_P T_P$, where $T_P$ is the skyscraper sheaf at $P$ with values in $S_P$. To show to sheaves are equal it is sufficient to show that they have the same local sections on a basis of the topology of the base, so we need to show that sections of $S$ are 0 almost everywhere except for finitely many $P$, where they take values in $S_P$. Given a section $s \in S(U)$ for $U$ an open neighbourhood of $P$, it locally lifts to a section $s^\prime$ of $\underline{K(X)}$. Because $\underline{K(X)}$ is the constant sheaf, the lift $s^\prime$ takes the value of a constant function $f \in K(X)$ on $U$. We define $U^\prime \subset U$ to be a smaller open subset containing $P$ disjoint to $(\operatorname{supp}(D) \cup f^{-1}(\infty)) \setminus \pbrace{P}$ (which we may do as both $\operatorname{supp}(D)$ and $s^{-1}(\infty)$ are discrete), and $\ev{f}{U^\prime}$ is regular (except perhaps at $P$, but in that case the order is determined by the stalk) so  $\exists g \in (O_C(D))(U^\prime)$ s.t. $g = \ev{f}{U^\prime}$. Hence we know $\ev{s}{U^\prime \setminus \pbrace{P}}=0$ (by taking the quotient again) and hence $S$ agrees with $T_P$ on $U$. \\ 
	As a result we have 
	\begin{align*}
		H^0(X,S) = H^0(X,\bigoplus_P T_P) &= \bigoplus_P H^0(X,T_P) \, , \\
		&= \bigoplus_P H^0(X,i_{P,\ast} S_P) \, , \\
		&= \bigoplus_P H^0(\pbrace{P},S_P) \, , \\
		&= \bigoplus_P S_P \, .
	\end{align*}
\end{proof}

\begin{remark}
	Looking later to theorem \ref{Thm: Riemann-Roch}, we can see there is a clear relation between Serre duality here and Riemann-Roch. Indeed this is a possible avenue for proof. 
\end{remark}

Once we have this result, we make a pairing 
\begin{align*}
	H^1(X,O_X) \times H^0(X,K_X) &\to \mathbb{C} \, , \\
	(\pbrace{r_P}, \omega) &\mapsto \sum_P \operatorname{res}_P(r_P \omega) \, .
\end{align*}

In \cite{Miranda1995}, Miranda will cover the same construction, but not make explicit it's link to Serre duality. To do so he makes the following definition. 

\begin{definition}
	A \textbf{Laurent tail divisor} is a finite formal sum $\sum_P r_P \cdot P$ where $P\in X$ and $r_P$ is a Laurent polynomial in local coordinate $z_P$ about $P$. We denote the group of Laurent tails under addition (which is also a $K(X)$ algebra) as $\mathcal{T}(X)$. \\
	Further, given a divisor $D$ we define the subgroup 
	\[
	\mathcal{T}[D](X) = \pbrace{\forall P \text{ s.t }r_P \neq 0, \text{ top term of $r_P$ has degree }< -\operatorname{ord}_P(D)} \, .
	\]   
\end{definition}

\begin{prop}
	$D \leq D^\prime \Rightarrow \mathcal{T}[D](X) \twoheadrightarrow  \mathcal{T}[D^\prime](X)$. 
\end{prop}
\begin{proof}
	Suppose top term of $r_P$ has degree $< -\operatorname{ord}_P(D^\prime)$. $\operatorname{ord}_P(D) \leq \operatorname{ord}_P(D^\prime) \Rightarrow -\operatorname{ord}_P(D) \geq -\operatorname{ord}_P(D^\prime)$ and so by transitivity done. 
\end{proof}

For each divisor $D$ here is a map $K(X) \to \mathcal{T}[D](X)$ given by truncating the Laurent series of a meromorphic function to the right degree at each $P$. Miranda then defines a space $H^1(D)$ to be the cokernel of this map. We want to find $H^1(D) = H^1(X,O_X(D))$, for which we need the following result.
\begin{lemma}
	$\mathcal{T}[D](X) \cong \faktor{R}{R(D)}$. 
\end{lemma}
\begin{proof}
	We note first that this is well motivated, as $D \leq D^\prime \Rightarrow R(D) \hookrightarrow R(D^\prime) \Rightarrow \faktor{R}{R(D)} \twoheadrightarrow \faktor{R}{R(D^\prime)}$. The proof is then simple, as we note the coefficient of $P$ in $\mathcal{T}[D](X)$ must lie in $S_P$, and then finite sums correspond to $\bigoplus_P S_P$. 
\end{proof}

\begin{remark}
	To see more of the proof of Serre duality and Riemann Roch in this language, see chapter $VI$ of \cite{Miranda1995}.  
\end{remark}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Adjunction Formula}
Given a codim-1 submanifold $Y \subset X$ recall we have the SES 
\[
0 \to TY \to \ev{TX}{Y} \to N_{Y/X} \to 0
\]
where $N_{Y/X}$ is the normal bundle to $Y$. Taking tensor powers with this gives the following result:
\begin{theorem}
	As an isomorphism of line bundles we have 
	\eq{
K_Y \cong \ev{K_X}{Y} \otimes \ev{\mc{O}_X(Y)}{Y}	
}
This implies that as an equation of divisors we have
\eq{
\deg K_Y = \deg\psquare{(K_X+[Y])\cdot[Y]}
}
where $[Y]$ is the divisor corresponding to the line bundle $\mc{O}_X(Y)$ and we are taking the intersection.  
\end{theorem}
\begin{proof}
	See (for also a larger discussion on the Chow ring) \href{https://scholar.harvard.edu/files/joeharris/files/000-final-3264.pdf}{here}. Recall $\mc{O}_X(Y) \cong N_{Y/X}$.   
\end{proof}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Classification of Bundles}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Universal Bundle and Classifying Space}

\begin{prop}\label{prop: principal bundles cong H^1}
	If $G$ is an abelian group then $\text{Prin}_G(X) \cong H^1(X,G)$. 
\end{prop}
\begin{proof}
	See \href{https://math.colorado.edu/~rohi1040/expository/param_spin.pdf}{here}. Effectively, a choice of bundle is equivalent to a choice of transition maps that obey cocycle transitions, that is a choice of \v{C}ech 1-cocycle, valued in $G$. The abelian-ness of $G$ is required to preserve the group operation.  
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Orientability}\label{subsec:orientability via steifel whitney}
Given a connected $n$-dimensional Riemannian manifold $X$, consider an $O(n)$-bundle $E \to X$. We know examples of such bundles always exist, for example taking the tangent bundle $TX$. 
\begin{definition}
	A manifold is \bam{orientable} if its tangent bundle has a reduction of structure group to an $SO(n)$ bundle. 
\end{definition}

We are about to give a topological condition for orientability, and we will need the following result:

\begin{comment} I think this is wrong. 
\begin{lemma}\label{lemma: 0-Cohomology}
If $M$ is a manifold with $r$ connected components, $H^0(M,F_2) \cong F_2^{r-1}$
\end{lemma}
\begin{proof}
Thinking of $H^0$ as global sections, we know that there is a choice of $\pm 1$ for the value of a section on each component. The overall sign of the section doesn't matter, so we have $r-1$ choices of signs. 
\end{proof}
\end{comment}

\begin{prop}
	$X$ is orientable iff $w_1(X)=0$. 
\end{prop}
\begin{proof}
	Let $E$ be the orthonormal frame bundle of the tangent bundle to $X$, and then from the maps $O(n) \to E \to X$ we get the exact sequence of cohomology
	\eq{
		0 \to H^0(X,F_2) \to H^0(E,F_2) \to H^0(O(n),F_2) \overset{\delta}{\to} H^1(X,F_2)	
	}
	\hl{See Lawson p.79 for the rest of this - how does it work?}
\end{proof}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Spin Bundles}
To learn more about spin bundles I recommend reading Besse (\hl{ref}) and Lawson (\hl{ref}), but I will give a brief outline here. 

\begin{definition}
	We define $\text{Spin}_n$ be the non-trivial double cover of $SO(n)$ s.t we have the SES of multiplicative groups 
	\eq{
		1 \to \mbb{Z}_2 \to \text{Spin}_n \overset{\pi}{\to} SO(n) \to 1	
	}
\end{definition}

\begin{example}
	$\text{Spin}_2 = SO(2)$ with the covering map corresponding to squaring when we view $SO(2) \cong U(1)$.
\end{example}

\begin{lemma}
	If $n>2$, $\pi_1(SO(n)) = \mbb{Z}_2$. 
\end{lemma}

\begin{prop}
	When $n>2$, $\text{Spin}_n$ is the universal cover of $SO(n)$. 
\end{prop}

\begin{remark}
	One can ask questions about how the spin group depends on the metric provided. We will not tackle this here. 
\end{remark}

\begin{definition}
	A \bam{spin structure} on $SO(n)$-bundle $P\to X$ is a double cover $Q \to P$ s.t the restriction to each fibre is the double cover $\text{Spin}_n \to SO(n)$. That is that the following diagram commutes
	\begin{tkz}
		Q \times \text{Spin}_n \arrow[r] \arrow[d, twoheadrightarrow] & Q \arrow[d, twoheadrightarrow]\\
		P \times SO(n) \arrow[r] & P
	\end{tkz}
\end{definition}

The existence of such a structure is not guaranteed, but can be given as a simple topological condition. Note that to have an $SO(n)$-bundle, $X$ must already be orientable. 

\begin{prop}
	$X$ has a spin structure iff the second Stiefel-Whitney class $w_2(X)=0$. 
\end{prop}
\begin{proof}
	We have the exact sequence of cohomology
	\eq{
		0 \to H^1(X,F_2) \to H^1(P,F_2) \to H^1(SO(n), F_2) \overset{\delta}{\to} H^2(X,F_2)	
	}
	coming from $SO(n) \to P \to X$, where we have the left 0 because $X$ is orientable. $\text{Prin}_{F_2}(SO(n)) \cong H^1(SO(n),F_2)$, so there is a \hl{non-identity} cohomology class $g \in H^1(SO(n), F_2)$ corresponding to the spin group fibration, and similarly a spin structure corresponds to an element of $H^1(P,F_2)$ which maps to $g$ in $H^1(SO(n),F_2)$. If $H^1(P,F_2)=0$, then $\ker \delta =0$ and so $\delta(g) \neq 0$. Conversely, if $\delta(g) \neq 0$, by exactness $g$ is not in the image of the map, and so there cannot be any double covers compatible with the map $Spin_n \to SO(n)$. $\delta(g)$ is precisely the Stiefel-Whitney class. 
\end{proof}
\begin{corollary}
	If $w_2(X)=0$, the spin structures on $X$ correspond to cosets of $H^1(P,F_2)/H^1(X,F_2)$. 
\end{corollary}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Calabi-Yau Manifolds}
\begin{definition}
	A \bam{Calabi-Yau (CY) manifold} is one where $c_1(TM)=0$ (this is called the \bam{Calabi-Yau condition}). 
\end{definition}

\begin{prop}
	The Calabi-Yau condition can be rephrased as $K_M$ is the trivial bundle. 
\end{prop}
\begin{proof}
	The canonical bundle is the determinant line bundle (highest antisymmetric tensor product) of the holomorphic cotangent bundle, and $c_1(TM) = c_1(\wedge^n TM) = c_1(K_M^\ast)=-c_1(K_M)$ for $n$-dimensional $M$.
\end{proof}

Take a metric and the corresponding Levi-Civita connection on $M$. The condition $c_1(TM)=0 \Rightarrow [\tr R]=0$ as a cohomology class, where $R$ is the Ricci tensor. Now for superstring theory and mirror symmetry we will want to get metric with $SU(n)$ holonomy. If a metric had $U(n)$ holonomy and $\tr R=0$ \emph{pointwise}, then we would get $SU(n)$ holonomy for free. 
\begin{lemma}
	If a metric is K\"ahler, the holonomy is $U(n)$. 
\end{lemma}
\begin{proof}
	\hl{I need to write notes on K\"ahler geometry.}
\end{proof}
Hence we ask the question, given a Calabi-Yau manifold with choice of complex structure, is there a K\"ahler metric s.t. $\tr R=0$? This is answered by the following theorem:
\begin{theorem}[Calabi, Yau]
	There exists such a metric unique up to scaling. 
\end{theorem}
\begin{corollary}
	On a CY manifold the moduli space of complex structures is equivalent to moduli space of Ricci-flat K\"ahler metrics. 
\end{corollary}
\begin{idea}
	Understanding the space of these metrics is hard, but the space of complex structures is slightly easier. 
\end{idea}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Classification through Holonomy}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Sheaves}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Definitions}

\begin{definition}
	Given a topological space $X$, and category $C$, a \bam{sheaf} on $X$ is $\mc{F}$ s.t. 
	\begin{itemize}
		\item $\forall U \subset X$ open, $\exists \mc{F}(U) \in C$
		\item $\forall U \subset V$ open subsets $\exists r_{V,U} \in \Hom(\mc{F}(V), \mc{F}(U))$ satisfying
		\begin{enumerate}
			\item $\forall U \subset V \subset W$, $r_{W,U} = r_{V,U} \circ r_{W,V}$
			\item (Gluing) $\forall U,V \subset X, \, \sigma \in \mc{F}(U), \, \tau \in \mc{F}(V)$ s.t. $\ev{\sigma}{U \cap V} = \ev{\tau}{U \cap V}$, $\exists \rho \in \mc{F}(U \cup V)$ s.t. 
			\eq{
				\ev{\rho}{U} = \sigma, \quad \ev{\rho}{V} = \tau	
			}
			\item (Locality) If $\sigma, \tau \in \mc{F}(U \cup V)$ are s.t. 
			\eq{
				\ev{\sigma}{U} = \ev{\tau}{U}, \quad \ev{\sigma}{V} = \ev{\tau}{V}
			}
			then $\sigma = \tau$.
		\end{enumerate}
	\end{itemize}
We denote the category of sheaves on $X$ as $\operatorname{Sh}(X)$. 
\end{definition}

\begin{remark}
	The category in the above definition is often either commutative rings or abelian groups. If we construct a category $S$ that has open subsets of $X$ as objects and $Hom(U,V)$ has a unique morphism of inclusion $U \hookrightarrow V$ if $U \subset V$ then we see that $\mc{F}$ is a contravariant functor with some additional data. If $C$ admits products of objects then that additional data can be represented as saying 
	\begin{tkz}
		\mc{F}(U \cup V) \arrow[r] &  \mc{F}(U)\times \mc{F}(V) \arrow[r,shift left] \arrow[r,shift right] & \mc{F}(U \cap V) 
	\end{tkz}
	is an equaliser.
\end{remark}

We may do our usual homological algebra nonsense with these sheaves. 

\begin{definition}
	A morphism of sheaves is a natural transformation $\alpha : \mc{F} \to \mc{G}$. Hence we have $\alpha(U) \in \Hom(\mc{F}(U),\mc{G}(U))$.
\end{definition}

\begin{definition}
	Given $\alpha: \mc{F} \to \mc{G}$ a morphism of sheaves, the \bam{presheaf kernel} is $\ker_{pre}\alpha$ given by $(\ker_{pre}\alpha)(U) = \ker (\alpha(U))$.  
\end{definition}

\begin{prop}
	The presheaf kernel is a sheaf. 
\end{prop}

\begin{example}
	Let $X=\mbb{C}$, $O_X$ be the sheaf of holomorphic functions on $X$, and $O_X^\times$ the sheaf of invertible functions, where we consider them as sheaves of abelian groups under multiplication. We get an exact sequence 
	\eq{
		0 \to \underline{\mbb{Z}} \to O_X \to O_X^\times \to 1	
	}
\end{example}

\begin{definition}
	A \bam{ringed space} is a pair $(X,O_X)$ where $X$ is a topological space and $O_X$ is a sheaf of rings on $X$. $O_X$ is called the \bam{structure sheaf}. 
\end{definition}

\begin{example}
	Given a topological space $X$, if we take $O_X$ to be $\mbb{R}$-valued continuous functions on open subsets of $X$ then $(X,O_X)$ is a ringed space. 
\end{example}

\begin{example}
	An example that will be relevant for later discussions is that an affine variety $X$ with sheaf $O_X$ given by $O_X(U)$ being the regular functions on $U$, regular functions being those given locally by polynomials. \\
	\hl{how does this correspond with the following definition:} given $Y \subset X$ a codim-1 submanifold we denote $O_X(-Y)$ the sheaf of functions 0 on $Y$, and its dual to be $O_X(Y) = O_X(-Y)^\ast$. 
\end{example}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Examples}
\hl{Populate this section with examples setting notation}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Direct Image and Pullback}

\begin{definition}
	Let $f:X\to Y$ be a continuous map of topological spaces, then we define the \textbf{direct image functor} $f_\ast : \operatorname{Sh}(X) \to \operatorname{Sh}(Y)$ s.t. for $\mc{F} \in \operatorname{Sh}(X), \, U \subset Y$ open, 
	\[
	(f_\ast \mathcal{F})(U) = \mathcal{F}(f^{-1}(U)) \, .
	\]
\end{definition}

\begin{example}
	For a topological space $X$, $x \in X$, and $S$ a set, the \textbf{skyscraper sheaf} is $\operatorname{skyscr}_x(S) \in \operatorname{Sh}(X)$ given by 
	\[
	\operatorname{skyscr}_x(S): (U \subset X) \mapsto \left \lbrace \begin{array}{cc}
	S & x \in U \\ \ast & \text{otherwise}
	\end{array} \right. \, .
	\]
	Viewing $S$ as a sheaf over $\pbrace{x}$, the skyscraper sheaf is it's direct image.  
\end{example}

\begin{remark}
	Note that we required $f$ to be continuous to ensure that $\forall U$ open we had $f^{-1}(U)$ open. If we wanted to consider a sort of `inverse' to this functor, we there for need to be slightly careful. 
\end{remark}

\begin{definition}
	Let $f:X\to Y$ be a continuous map of topological spaces, then we define the \textbf{inverse image functor} $f^{-1} : \operatorname{Sh}(Y) \to \operatorname{Sh}(X)$ s.t. for $\mathcal{G} \in \operatorname{Sh}(Y), \, U \subset X$ open, $f^{-1}\mathcal{G}$ is the sheafification of the presheaf 
	\[
	U \mapsto \varinjlim_{V \supseteq f(U)} \mathcal{G}(V) \, .
	\]
	We will often call $f^{-1}\mathcal{G}$ the \textbf{topological pullback}.
\end{definition}

\begin{prop}
	$f^{-1}$ is the left adjoint of $f_\ast$. 
\end{prop}

When $f:X \to Y$ is a morphism of locally ringed spaces, as we will deal with in algebraic geometry, we want sheaves on $Y$ to be $O_Y$-modules. As such $f^{-1}$ is not appropriate, as $f^{-1}(\mathcal{G})$ may not be an $O_X$ module. As such we introduce an additional construction.

\begin{definition}
	We define $f^\ast \mathcal{G}$ the \textbf{analytic pullback} to be  
	\[
	f^\ast \mathcal{G} = f^{-1} \mathcal{G} \otimes_{f^{-1} O_Y} O_X \, .
	\]
\end{definition}

\begin{lemma}
	Analytical pullback is compatible with pullback of bundles, that is if $E\to Y$ is a bundle then 
	\[
	f^\ast O_Y(E) = O_X(f^\ast E) \, .
	\]
\end{lemma}


\begin{prop}
We have an exact sequence
\[
0 \to f^{-1} \mathcal{G} \to f^\ast \mathcal{G}
\]
\end{prop}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{The Ideal Sheaf}

\begin{definition}
	Given a closed embedding $i :X\hookrightarrow Y$ we define the \textbf{ideal sheaf} $\mathcal{I}_{X/Y} = \mathcal{I}$ to be the kernel of the induced map of structure sheaves $O_Y \to i_\ast O_X$. This gives an exact sequence of $O_Y$-modules 
	\[
	0 \to \mc{I} \to O_Y \to i_\ast O_X \to 0\, .
	\]
\end{definition}


\begin{lemma}
	$O_Y/\mathcal{I}_{X/Y} \cong O_X$. 
\end{lemma}
From this result we get for any invertible sheaf on $Y$ $\mathcal{F}$ the exact sequence 
\[
0 \to \mathcal{I} \otimes_{O_Y} \mathcal{F} \to O_Y \otimes_{O_Y} \mathcal{F} \to i_\ast O_X \otimes_{O_Y} \mathcal{F} \to 0  
\]
Note here $O_Y \otimes_{O_Y} \mathcal{F} = \mathcal{F}$, and using `niceness' properties (when $i^\#$ is a flat epimorphism, see \href{https://mathoverflow.net/questions/49134/when-does-the-direct-image-functor-commute-with-tensor-products}{here}) $i_\ast$ commutes with tensor product so $i_\ast O_X \otimes_{O_Y} \mathcal{F} = i_\ast \mathcal{F}$. 

\begin{definition}
	We define the \textbf{conormal sheaf} to be $\mathcal{N}^\vee_{X/Y} = \faktor{\mathcal{I}}{\mathcal{I}^2}$.
\end{definition}
\begin{definition}
	We define the \textbf{normal sheaf} to be $\mathcal{N}_{X/Y} = \Hom_{O_X} (\mathcal{N}^\vee,O_X)$. 
\end{definition}
\begin{remark}
	Some authors will use $\mathcal{N}^\ast$ instead of $\mathcal{N}^\vee$. This is slightly worse notation, as the point is that they are not exactly dual, see \cite{Vakil2010}.
\end{remark}

\begin{prop}[Conormal exact sequence]
	Given $Z \hookrightarrow X \overset{i}{\hookrightarrow Y}$ we have SES
	\[
	0 \to \mathcal{N}_{X/Y} \to i^\ast \Omega_{Y/Z} \to \Omega_{X/Z} \to 0 \, .
	\]
	The corresponding dual sequence is 
	\[
	0 \to \mathcal{T}_X \to i^\ast \mathcal{T}_Y \to \mathcal{N}_{X/Y} \to 0 \, .
	\]
\end{prop}
\begin{proof}
	See \cite{Vakil2010} for a full discussion. 
\end{proof}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Cohomology}\label{subsec: cohomology of sheaves}
We will now see two definition of cohomology which apply to sheaves. They will turn out to be equivalent under rather general conditions. 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Sheaf Cohomology}

\begin{lemma}
	For any topological space $X$, $\operatorname{Sh}(X)$ has enough injectives. 
\end{lemma}
\begin{proof}
	See \cite{Iversen1984}, thm II.3.1. 
\end{proof}

\begin{definition}
	The \textbf{global section functor} is $\Gamma = \Gamma(X,\cdot):\operatorname{Sh}(X) \to \text{Ab}, \, \Gamma(X,\mathcal{F}) = \mathcal{F}(X)$. 
\end{definition}

\begin{definition}
	The \textbf{sheaf cohomology} of topological space $X$ is $H^i(X,\cdot) : \operatorname{Sh}(X) \to \text{Ab}, \, H^i(X,\mathcal{F}) = \psquare{R^i\Gamma(X,\cdot)}(\mathcal{F})$
\end{definition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{\v{C}ech Cohomology}





\begin{definition}
	For a sheaf $\mc{F}$ on $X$ with open cover $\mathcal{U} = \pbrace{U_\alpha}$ we define the \bam{\v{C}ech cochain complex} by the direct product 
	\[
	C^k(\mathcal{U},\mathcal{F}) = \prod_{i_0 < \dots <i_k} \mathcal{F}(U_{i_0} \cap \dots \cap U_{i_k})
	\]
	with differential $\delta$ given by (for example) 
	\begin{align*}
	(\delta_0 \sigma)_{U,V} &= \sigma_V - \sigma_U \\
	(\delta_1 \rho)_{U,V,W} &= \rho_{V,W} - \rho_{U,W} + \rho_{U,V} 
	\end{align*}
\end{definition}

\begin{definition}
	The \textbf{\v{C}ech cohomology} of an open cover $\mathcal{U}$ of $X$ with values in $\mathcal{F}$ is the cohomology of the associated \v{C}ech cochain complex, denoted $\check{H}^i(\mathcal{U},\mathcal{F})$. The \v{C}ech cohomology of $X$ is 
	\[
	\check{H}^i(X,\mathcal{F}) = \varinjlim_{\mathcal{U}} \check{H}^i(\mathcal{U},\mathcal{F})
	\]
	where open covers are directed under refinement. 
\end{definition}

Note that for any $\mathcal{U}$ we have a homomorphism $\check{H}^i(\mathcal{U},\mathcal{F}) \to \check{H}^i(X,\mathcal{F})$. 
\begin{definition}
	A cover $\mathcal{U}$ is a \textbf{Leray cover} wrt $\mathcal{F}$ if $\check{H}^i(\mathcal{U},\mathcal{F}) \overset{\cong}{\to} \check{H}^i(X,\mathcal{F})$.
\end{definition}

\begin{definition}
	An open cover is \textbf{good} if all sets and intersections of finitely many sets are contractible. 
\end{definition}

\begin{prop}
	A good cover is a Leray cover
\end{prop}
\begin{proof}
	The Leray spectral sequence degenerates for a good cover, and so \hl{\dots}
\end{proof}

\begin{prop}
	Any non-trivial covering of a 1d-complex manifold is Leray.
\end{prop}
\begin{proof}
	See \cite{Ward1991}, \S 3.3. 
\end{proof}

\begin{remark}
	Note that to think about this section from a different perspective, you could look at my notes on symplectic integrators and persistent homology. 
\end{remark}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Equivalence}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Properties}
We will now list a few of the useful properties to recall of sheaf cohomology. 

\begin{prop}
	Given $f:X \to Y$ and $\mathcal{F} \in \operatorname{Sh}(X)$ there are natural isomorphisms $H^i(X,\mathcal{F}) \cong H^i(Y,f_\ast \mathcal{F})$. 
\end{prop}
\begin{proof}
	This is exercise 4.1 in chapter 3 of \cite{Hartshorne1977}. Note there are technical assumptions to make here that I have ignored. For more see \href{https://math.stackexchange.com/questions/130493/cohomology-of-quasi-coherent-sheaves-with-respect-to-pushforward-question-exerc}{here}. 
\end{proof}

\begin{prop}
	$\bigoplus_i H^j(X,\mathcal{F}_i) = H^j(X,\bigoplus_i \mathcal{F}_i)$. \hl{flesh out}. 
\end{prop}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\part{Riemann Surfaces}
Riemann surfaces are 1-dimensional complex manifolds (don't worry \hl{we'll get the proper definition later}). These are relevant from algebraic geometry for the following reason:
\begin{theorem}
	Every compact Riemann surface is an algebraic curve.
\end{theorem}
\begin{proof}
	See Griffiths \& Harris 
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Examples of Riemann Surfaces}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Smooth Projective Plane Curves}

\begin{definition}
	A $\mbb{C}$-polynomial $F(\bm{x})=F(x_1, \dots, x_n)$ is \bam{homogeneous of degree d} if 
	\eq{
		\forall \lambda \in \mbb{C}, \, F(\lambda \bm{x}) = \lambda^d F(\bm{x})	
	}
\end{definition}

\begin{definition}
	The \bam{projective plane curve} defined by the homogeneous polynomial $F:\mbb{C}^3 \to \mbb{C}$ is the closed subset
	\eq{
		X = \pbrace{[x:y:z] \in \mbb{P}^2 \, | \, F(x,y,z) = 0}	\subset \mbb{P}^2
	}
\end{definition}

\begin{remark}
	Note that this is well defined as $F(x,y,z) = 0 \Leftrightarrow \lambda^d F(x,y,z)=F(\lambda x, \lambda y, \lambda z)=0$
\end{remark}

\begin{definition}
	A homogeneous polynomial $F:\mbb{C}^n \to \mbb{C}$ is \bam{singular} at $\bm{x}$ (i.e. $\bm{x}$ is a \bam{singular point}) if $\forall 1 \leq i \leq n$
	\eq{
		\ev{\pd[F]{x_i}}{\bm{x}} = 0 	
	}
	The polynomial is said to be \bam{non-singular} if it has no singular points
\end{definition}

\begin{prop}
	The projective plane curve corresponding to a non-singular homogeneous polynomial is a compact Riemann surface. 
\end{prop}

\begin{remark}
	A degree $3$ polynomial in $\mbb{P}^2$ can be written as 
	\eq{
F = a_1 X^3 + a_2 Y^3 + \dots + a_{10} YZ^2	
}
$8$ of these parameters can be removed by a linear change of these coordinates (i.e. by a transform in $PGL_3(\mbb{C})$) and one can be removed by an overall scaling, so there is 1 remaining degree of freedom. This will correspond to how elliptic curves (see later) have one moduli (the period ratio). \\
It can likewise be shown that a degree $5$ curve will have $101$ degrees of freedom. 
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Complex Tori}

\begin{definition}
	A map between Riemann surfaces $f:X \to Y$ is called an \bam{isomorphism} iff the induced maps on open subsets of $\mbb{C}$ is bijective and analytic. If there is an isomorphism between $X,Y$, they are said to be isomorphic.  
\end{definition}

\begin{definition}
	Fix $\omega_1, \omega_2 \in \mbb{C}$ linearly independent over $\mbb{R}$ and let 
	\eq{
		L = L(\omega_1, \omega_2) = \mbb{Z}\omega_1 \oplus \mbb{Z}\omega_2 \subset \mbb{C}
	}
	The \bam{complex tori with lattice $\bm{L}$} is $X = \faktor{\mbb{C}}{L}$. The corresponding \bam{fundamental cell} is 
	\eq{
		\mf{F} = \mf{F}(X) = \pbrace{\alpha \omega_1+ \beta \omega_2 \, | \, \alpha,\beta \in [0,1)}
	}
\end{definition}

\begin{prop}
	Complex tori are Riemann surfaces. 
\end{prop}

\begin{prop}
	Two complex tori with lattices $L(\omega_1, \omega_2), \, L(\omega_1^\prime, \omega_2^\prime)$ are isomorphic iff $\exists$ a fractional linear transformation sending $\frac{\omega_2}{\omega_1} \mapsto \frac{\omega_2^\prime}{\omega_1^\prime}$
\end{prop}

\begin{prop}
	Every complex tori can be written with a lattice the form $L(1,\tau)$ where $\Im\tau > 0$
\end{prop}

\begin{remark}
	From the above results we can view the orbits of the modular group acting on the UHP as a list of all possible complex structures on the topological torus. We will always assume $\frac{\omega_2}{\omega_1}$ has positive imaginary part.  
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Properties of Riemann Surfaces}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Riemann Hurwitz}

\begin{definition}
	Let $f:\mbb{C} \to \mbb{C}$ be meromorphic at $z_0 \in \mbb{C}$ about which it's Laurent series $\sum_n c_n (z-z_0)^n$. The \bam{order} of $f$ at $z_0$ is 
	\eq{
		\ord_{z_0}(f) = \min\pbrace{n \, | \, c_n \neq 0}	
	}
\end{definition}

\begin{remark}
	This definition naturally extends to maps between Riemann surfaces by taking local coordinates around the points. 
\end{remark}

\begin{lemma}
	Let $f,g : X \to \mbb{C}$ be non-zero meromorphic functions and $p  \in X$. Then 
	\begin{itemize}
		\item $\ord_p(fg) = \ord_p(f) + \ord_p(g)$
		\item $\ord_p\pround{\frac{1}{f}} = -\ord_p(f)$
		\item $\ord_p\pround{\frac{f}{g}} = \ord_p(f) - \ord_p(g)$
	\end{itemize}
\end{lemma}
\begin{proof}
	The first results follows from multiplying together the Laurent series. The second and third then follow. 
\end{proof}

\begin{lemma}
	Let $X$ be a Riemann surface and $f:X \to \mbb{C}$ a non-constant meromorphic function. The set
	\eq{
		\pbrace{p \in X, \, \ord_p(f) \neq 0} \subset X	
	} 
	is discrete.
\end{lemma}
\begin{proof}
	If the set of poles of $f$ had an accumulation point, around this point $f$ would have no Laurent series. A similar argument gives no accumulation point for zeros. 
\end{proof}

\begin{corollary}
	Let $X$ be a  compact Riemann surface and $f:X \to \mbb{C}$ a non-constant meromorphic function. The set
	\eq{
		\pbrace{p \in X, \, \ord_p(f) \neq 0} \subset X	
	}
	is finite.
\end{corollary}

\begin{definition}
	Let $F:X \to Y$ be a map between Riemann surfaces holomorphic at $p \in X$. The \bam{multiplicity} of $F$ at $p$ is $\mult_p(F)=m$ the unique integer s.t. in local coordinates around $p$ $F$ is represented by 
	\eq{
		h(z) = h(z_0) + \sum_{i \geq m} c_i (z-z_0)^i
	}
\end{definition}

\begin{definition}
	Let $F:X \to Y$ be a non-constant holomorphic map of Riemann surfaces. $p \in X$ is called a \bam{ramification point} if $\mult_p(F) \geq 2$. $y\in Y$ is called a \bam{branch point} if $y=F(p)$ for some ramification point $p$. 
\end{definition}

\begin{remark}
	The thing to note here is that, generically, $\mult_p(F) = 1$ 
\end{remark}

\begin{prop}
	Let $f:X \to \mbb{C}$ be a meromorphic function and $F:X \to \mbb{C}_\infty$ the associated holomorphic map. Then 
	\begin{enumerate}
		\item If $p \in X$ is a zero of $f$, $\mult_p(F) = \ord_p(f)$
		\item If $p \in X$ is a pole of $f$, $\mult_p(F) = -\ord_p(f)$
		\item If $p \in X$ is neither a zero or a pole, $\mult_p(F) = \ord_p(f-f(p))$
	\end{enumerate}
\end{prop}

\begin{prop}
	Let $F:X \to Y$ be a holomorphic non-constant map of Riemann surfaces and consider the map $d_{\cdot}(F):Y \to \mbb{Z}$ 
	\eq{
		d_y(F) = \sum_{p \in F^{-1}(y)} \mult_p(F)	
	}
	The map $d$ is constant. 
\end{prop}

\begin{definition}
	Let $F:X \to Y$ be a holomorphic non-constant map of Riemann surfaces. The \bam{degree} of $F$ is 
	\eq{
		\deg(F) = d_y(F) \text{ for some $y \in Y$}
	}
\end{definition}

\begin{prop}
	Let $X$ be a compact Riemann surface and $f:X \to \mbb{C}$ a non-constant meromorphic function. Then 
	\eq{
		\sum_{p \in X} \ord_p(f) = 0	
	}
\end{prop}
\begin{proof}
	Consider the corresponding map $F: X \to \mbb{C}_\infty$. Let $\pbrace{x_i} = F^{-1}(0), \ ,\pbrace{y_j} = F^{-1}(\infty)$. Then 
	\eq{
		\sum_p \ord_p(f) &= \sum_i \ord_{x_i}(f) + \sum_j \ord_{y_j}(f) \\
		&= \sum_i \mult_{x_i}(F) - \sum_j \mult_{y_j}(F) \\
		&= d_0(F) - d_\infty(F) = 0	
	}
\end{proof}

\begin{remark}
	As $f$ can only have finitely many poles and zeros, for all but finitely many $p \in X$ we have $\ord_p(f) = 0$ so the sum makes sense. 
\end{remark}

\begin{theorem}[Riemann-Hurwitz Formula]
	Let $F:X \to Y$ be a non-constant holomorphic map between compact Riemann surfaces. Then 
	\eq{
		g(X) - 1 = \deg(F) \psquare{g(Y)-1} + \frac{1}{2} \sum_{p \in X} \psquare{\mult_p(F)-1}	
	}
	where $g$ is the genus of the underlying topological surface. 
\end{theorem}

\begin{example}
	An example that will be important to example later is that of a projective plane curve $X$ given by 
	\eq{
		X = \pbrace{[x:y:z] \, | \, P(x,y,z)=0} \subset \mbb{P}^2	
	}
	where $P: \mbb{C}^3 \to \mbb{C}$ is the homogeneous polynomial 
	\eq{
		P(x,y,z) = y^2z - x^3 + xz^2 -z^3
	}
	We note we can write 
	\eq{
		X = \pbrace{[x:y:1] \, | \, y^2 = x^3-x+1} \cup \pbrace{[0:1:0]}
	}
	We consider a map $F:X \to \mbb{P}^1$ by taking a coordinate on the curve. On the patch $z \neq 0$ we can choose $x$, and around $z=0=x$ we can choose $1/x$. We find that a generic point has two preimages except at the roots of $x^3-x+1$ or at 'infinity' ($z=0=x$) as at all these points there is only one value of $y$. Hence 
	\eq{
		g(X) = 1 + 2\psquare{0-1} + \frac{1}{2} \times 4\psquare{2-1} = 1
	}
	so topologically this curve is a torus.
\end{example}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Automorphisms}

We have the following corollary of Riemann-Hurwitz:

\begin{theorem}
	If $X$ is a compact Riemann surface with $g\geq 2$ then $\abs{\Aut(X)} \leq 84(g-1)$. 
\end{theorem}

\begin{theorem}
	A non-identity automorphism of a Riemann surface fixes at most $2g+2$ points. 
\end{theorem}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Field of Functions}

\begin{definition}
	Let $X$ be a Riemann surface. The set of all meromorphic functions $X \to \mbb{C}$ is called the \bam{field of functions} of $X$ and is denoted $K(X)$. 
\end{definition}

\begin{example}
	$K(\mbb{P}^1) \cong \mbb{C}(x)$
\end{example}

\begin{prop}
	$K(X)$ is a field extension of $\mbb{C}$. 
\end{prop}

\begin{prop}
	If $X$ is a compact Riemann surface then $K(X)/\mbb{C}$ is a field extension of transcendence degree 1.  
\end{prop}

\begin{definition}
	Let $X, Y$ be Riemann surfaces and $p : X \to Y$ a branched covering map. A \bam{deck
		transformation} is a fiber preserving biholomorphic map, that is, a map f such that the diagram
	\begin{tkz}
		X \arrow[r,"f"] \arrow[d,"p"'] & X \arrow[dl,"p"]\\
		Y &
	\end{tkz}
	commutes. We denote the set of them  $\text{Deck}(X/Y)$
\end{definition}

\begin{prop}
	The set of deck transformations form a group under composition
\end{prop}

\begin{theorem}
	Let $X,Y$ be compact Riemann surfaces and $p:X \to Y$ a $n$-fold branched covering. Then $K(X)/p^\ast K(Y)$ is a degree-$n$ field extension. \\
	Conversely let $Y$ be a Riemann surface and $L/K(Y)$ a degree-$n$ field extension. Then $\exists X$ a Riemann surface, $p:X \to Y$ an $n$-sheeted branched covering map, and $f \in K(X)$ s.t. $L\cong K(X)=p^\ast K(Y)(f)$. \\
	In both cases, $\text{Deck}(X/Y) \cong \Aut(K(X) / p^\ast K(Y))$  
\end{theorem}

\begin{corollary}
	Let $X,Y$ be compact Riemann surfaces, then $X\cong Y$ iff $K(X) \cong K(Y)$. 
\end{corollary}

\begin{remark}
	We can view this final remark from the point of view of category theory. We can let $R$ be the category of compact Riemann surfaces with morphisms given by holomorphic maps. We then give the contravariant functor 
	\eq{
		K:R \to \text{Sets}	
	}
	sending a compact Riemann surface $X$ to its function field $K(X)$, and sending morphisms to their pullback. This is a representable functor as 
	\eq{
		K(X) = \Hom(X,\mbb{P}^1)
	}
	Hence that $X \cong Y \Leftrightarrow K(X) \cong K(Y)$ is a consequence of the Yoneda lemma. 
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Differentials}

\begin{prop}[Reciprocity Law]
	Let $\Omega$ be a global holomorphic 1-form (i.e. a differential of the first kind) and $\nu$ a global meromorphic 1-form with no residues (a differential of the second kind). Then writing $\Omega = d \pi$ (which we can do locally by defining $\pi(s) = \int^s \omega$) we have 
	\[
	\frac{1}{2\pi i} \sum_{i=1}^g \begin{bmatrix} \oint_{a_i} \omega & \oint_{a_i} \nu \\ \oint_{b_i} \omega & \oint_{b_i} \nu \end{bmatrix} = \sum_p \operatorname{res}_p( \pi \nu) \, .
	\]
\end{prop}
\begin{proof}
	See \cite{Griffiths1985}, p.241.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{The Riemann Matrix}
We now want to consider the pairing of homology and cohomology on $X$. This can lead to information about the Abel-Jacobi map, but will also lead to an invariant of a Riemann surface. Relevant references include Eynard's Lectures on Compact Riemann Surfaces, Miranda, \href{https://people.reed.edu/~jerry/311/theta.pdf}{these notes}. 


\begin{definition}
	A homology basis $\bm{c} = (\bm{a},\bm{b})$ is \bam{canonical} if $\bm{c} \cdot \bm{c} = J$ where we are taking the intersection number and $J=\begin{psmallmatrix} 0 & I \\ -I & 0 \end{psmallmatrix}$. 
\end{definition}
\begin{remark}
	Despite the term canonical, there is no unique choice of such a basis. Given any homology basis $\bm{c}$ we can make a new basis by taking $M\bm{c}$ for $M\in GL_{2g}(\mbb{Z})$. If the original basis was canonical then so is the transformed basis iff $MJM^T = J$, which is the condition for $M^T$ to be a symplectic matrix, giving $M$ symplectic. 
\end{remark}

The object we want to calculate is explicitly the period matrix, defined as follows:
\begin{definition}\label{def: period matrix}
	Let $\pbrace{a_i, b_i}_{i=1}^g$ be a canonical choice of homology basis, and $\pbrace{\omega_i}_{i=1}^g$ a basis of holomorphic differentials. Then the \bam{matrix of periods} is $\Omega = (A,B)$ where we calculate the $g\times g$ matrices $A,B$ by 
	\eq{
		A_{ij} = \int_{a_j} \omega_i, \quad \quad B_{ij} = \int_{b_j} \omega_i
	}
\end{definition}

In order to say something about the form of $\Omega$, we need the following result:
\begin{prop}[Riemann's Bilinear Identities]
	$\Omega J \Omega^T = 0$ and $-i\bar{\Omega}J\Omega^T > 0$
\end{prop}
\begin{corollary}
	For a fixed differential basis $\pbrace{\omega_i}$, $\exists \bm{c}$ a canonical basis s.t $A_{ij} = \delta_{ij}$. 
\end{corollary}

\begin{definition}
	The \bam{Riemann matrix} corresponding to $\Omega$ is $\tau = A^{-1}B$. 
\end{definition}

\begin{definition}\label{def: Siegel upper half space}
	We define the \bam{Siegel upper half space} to be 
	\eq{
		\mbb{H}_g = \pbrace{M \in M_g(\mbb{C}) \, | \, M^T = M, \, \image M > 0}
	}
\end{definition}

\begin{lemma} $\tau \in \mbb{H}_g$.  
\end{lemma}

\begin{example}
	$\mbb{H}_1 = \mbb{H} \subset \mbb{C}$ is the upper half plane, explaining the name and notation convention. The case $g=1$ corresponds to elliptic curves, and we are recovering the usual $\tau$ we assign which tells us about the period lattice of the torus. This is not a coincidence, and we shall later related $\tau$ to the Jacobian of the curve. 
\end{example}


\begin{remark}
	There was a choice made in arranging this matrix as $g \times 2g$. Had we chosen instead $\Omega$ to be $2g \times g$ as 
	\eq{
		\tilde{\Omega}_{ij} = \int_{c_i} \omega_j	
	} 
	where $\bm{c} = (\bm{a},\bm{b})$ is the tuple of cycles, then we get that $\tilde{\Omega} = \Omega^T \Leftrightarrow \tilde{A}=A^T, \tilde{B} = B^T$. In order to continue this correspondence to get $\tilde{\tau} = \tau^T$ we need $\tilde{\tau} = \tilde{B} \tilde{A}^{-1}$. As $\tau$ is symmetric, we know that $\tilde{\tau} = \tau$, so our value of Riemann matrix is not dependent on convention. 
\end{remark}

\begin{lemma}
	If we change canonical homology basis by $\bm{c}^\prime = M \bm{c}$ where $M = \begin{psmallmatrix} a & b \\ c & d \end{psmallmatrix} \in Sp(2g,\mbb{Z})$, then $\Omega$ transforms as $\tilde{\Omega}^\prime = M\tilde{\Omega}$ and hence $\tilde{\tau}^\prime = (d\tilde{\tau}+c)(b\tilde{\tau}+a)^{-1}$. \\
	If we change cohomology basis by $\bm{\omega}^\prime = G \bm{\omega}$ for $G \in GL_g(\mbb{C})$, then $\Omega$ transforms as $\Omega^\prime = G\Omega$ and hence $\tau^\prime = \tau$.   
\end{lemma}
\begin{remark}
	It is for this reason that, although taking $\Omega$ to be $g \times 2g$ is seemingly a more prevalent convention, the latter is more sensible because of the corresponding actions. Moreover, if conjugate $M$ with the outer automorphism $\begin{psmallmatrix} 0 & I \\ I & 0 \end{psmallmatrix}$ then we get $\tilde{\tau}^\prime = (a\tilde{\tau}+b)(c\tilde{\tau}+d)^{-1}$, which recovers the fractional linear transformation action of $SL_2(\mbb{Z}) \cong Sp_2(\mbb{Z})$ known in the case of elliptic curves. The reason for the conjugation is as with elliptic curves, we typically normalise the bottom element to 1 instead. 
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Riemann Matrices of Covered Spaces}
Fay \cite{Fay2006} is a good reference for this section, we will illustrate in a specific example, namely that of Burnside's curve. This builds of calculations in Braden's \textit{Riemann Surfaces with Symmetry}. We let $X$ be a genus 2 hyperelliptic curve with order 2 automorphism $r$ that is not the hyperelliptic involution, and we quotient by it's action to get $X \to \hat{X}$, where $\hat{X}$ is an elliptic curve. Then given two cycles $\mf{a},\mf{b}$ on $\hat{X}$ that form a homology basis, we can construct a full homology basis on $X$ from 
\eq{
	\mf{a}_1 &= \mf{a}+r_\ast\mf{a} \\
	\mf{a}_2 &= \mf{b} - r_\ast\mf{b} \\
	\mf{b}_1 &= \mf{b} \\
	\mf{b}_2 &= r_\ast\mf{a}
}
and if we choose a basis of differential $\omega_1, \omega_2$ s.t $r^\ast \omega_1 = \omega_1, r^\ast \omega_2 = -\omega_2$ we can find that the Riemann matrix is given by 
\eq{
	\tau = \begin{pmatrix} \frac{\int_\mf{b} \omega_1}{2\int_\mf{a} \omega_1} & \frac{1}{2} \\ \frac{1}{2} &  \frac{-\int_\mf{a} \omega_2}{2\int_\mf{b} \omega_2} \end{pmatrix} 
}
For later references we will fix this notation so 
\eq{
	\tau_{11} = \frac{\int_\mf{b} \omega_1}{2\int_\mf{a} \omega_1}, \quad \tau_{22} = \frac{-\int_\mf{a} \omega_2}{2\int_\mf{b} \omega_2}
}
\begin{remark}
	Note we have been cavalier here with denoting $\mf{a},\mf{b}$ both as cycles on $X$ and $\hat{X}$, \hl{this may come back to bite us in the ass}. 
\end{remark}
To calculate the Riemann matrix on $\hat{X}$ we keep our homology basis, but now we define a differential by first defining $u,u^\prime$ s.t. 
\eq{
	\int_\mf{a} u = 1, \quad \int_{-r_\ast \mf{a}} u = 0, \quad \int_{\mf{a}} u^\prime = 0, \quad \int_{-r_\ast \mf{a}} u^\prime = 1
}
and then setting our differential to be $\hat{\omega} = u-u^\prime$. We then have the Riemann matrix on $\hat{X}$ as 
\eq{
	\hat{\tau} = \frac{\int_\mf{b} \hat{\omega}}{\int_\mf{a} \hat{\omega}}
}
It can be shown that with these conventions $\hat{\omega} = \frac{\omega_1}{\int_\mf{a} \omega_1}$ and so we get $\hat{\tau} = 2\tau_{11}$. \\
The consequence of this is that, if we are given an elliptic curve with Riemann matrix $\hat{\tau}$ and told that it is the base of a double cover of a genus 2 hyperelliptic curve $X$ by an automorphism, then $X$ has Riemann matrix 
\eq{
	\tau = \frac{1}{2}\begin{pmatrix} \hat{\tau} & 1 \\ 1 & 2\tau_{22} \end{pmatrix} 
}
At this point we cannot expect to know anything else about the hyperelliptic, as we know from the work of Bolza that the moduli space of hyperelliptic curves with a $C_2$ symmetry is 2 dimensional. Note an alternate form for the Riemann matrix on $X$ shown to exists by Fay was 
\eq{
	\tau^\prime = \frac{1}{2}\begin{pmatrix} \hat{\tau}+\pi_{11} & -\hat{\tau}+\pi_{11} \\ -\hat{\tau}+\pi_{11} & \hat{\tau}+\pi_{11} \end{pmatrix} 
}
where $\pi_{11} = \frac{-1}{2\tau_{22}}$. \\
Suppose now that $X$ has a second non-hyperelliptic involution $r^\prime$. From Bolza's classification we know that $r,r^\prime$ must generate a $V_4$ group, so specifically $rr^\prime = r^\prime r$. We want a way to find $\tau_{22}$ using this other involution, so we want to repeat the process as before using  a new quotient by the $r^\prime$ action, $\hat{X}^\prime$. As 
\eq{
	r^\ast = \begin{pmatrix} 1 & 0 \\ 0 & -1 \end{pmatrix}
}
wrt the basis, using our knowledge of matrix representations of the Klein 4 group we must have 
\eq{
	(r^\prime)^\ast = \begin{pmatrix} -1 & 0 \\ 0 & 1 \end{pmatrix}
}
so we need to swap the differentials (that is $\omega_1^\prime = \omega_2$ and $\omega_2^\prime = \omega_1$)s now $(r^\prime)^\ast \omega_2 = \omega_2, \, (r^\prime) a^\ast \omega_1 = -\omega_1$. This yields 
\eq{
	\hat{\tau}^\prime = \frac{\int_\mf{b} \omega_2}{\int_\mf{a} \omega_2} = \frac{-1}{2\tau_{22}} 
}
Hence we can now combine our knowledge when $\hat{\tau} = \hat{\tau}^\prime$ to say that $X$ will have a Riemann matrix
\eq{
	\tau = \frac{1}{2}\begin{pmatrix} \hat{\tau} & 1 \\ 1 & -1/\hat{\tau} \end{pmatrix} 
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Cohomology}
Recall we discussed sheaf cohomology earlier in \S \ref{subsec: cohomology of sheaves}. When working over a Riemann surface the situation simplifies greatly, s.t. we have the following result:
\begin{theorem}
	Let $X$ be a Riemann surface. 
	\begin{itemize}
		\item If $\mathcal{F} = \mathcal(L)$, the sheaf of holomorphic sections of a line bundle $L \to X$, then $\forall p>1, \, H^p(X,\mathcal{F})=0$.
		\item If $\mathcal{F} = \mathbb{C},\mathbb{Z}$, then $\forall p>2, \, H^p(X,\mathcal{F})=0$. 
	\end{itemize} 
\end{theorem}
\begin{proof}
	See \cite{Hitchin2013,Gunning1966}.
\end{proof}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Divisors and their applications}\label{sec: Divisors and their applictions}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Divisors}
\begin{definition}
	A \bam{(Weil) divisor} on $C$ is a formal finite sum of points, i.e. $D = \sum_i n_i p_i$ for $n_i \in \mbb{Z}, \, p_i \in C$. The group of divisors under addition is denoted $\Div(C)$. 
\end{definition}

\begin{definition}
	The \bam{degree} of a divisor $D = \sum_i n_i p_i$ $\deg D = \sum_i n_i $
\end{definition}

\begin{definition}
	Given a meromorphic function $f:C \to \mbb{C}$ we define $(f) \in \Div(C)$ by 
	\eq{
		(f) = \sum_{p \in X} \ord_p (f) \cdot p 
	}
	For $D \in \Div(C)$, if $\exists f$ s.t. $D=(f)$ we say $D$ is a \bam{principal divisor}. 
\end{definition}

\begin{lemma}$(fg) = (f)+(g)$
\end{lemma}
\begin{corollary}
	Principal divisors form a subgroup  $\Lin(C) \leq \Div(C)$. 
\end{corollary}

\begin{lemma}
	If $X$ is a compact Riemann surface and $f:X \to \mbb{C}$ meromorphic then $\deg(f) = 0$. 
\end{lemma}

\begin{prop}
	Let $C$ be compact. Then $\Lin(C) \subset \pbrace{D \in \Div(C) \, | \deg(D) = 0}$. 
\end{prop}

\begin{definition}
	The \bam{divisor class group} of $C$ is $\Cl(C) = \faktor{\Div(C)}{\Lin(C)}$. The equivalence class corresponding to $D$ is often denoted as $\abs{D}$ and is called the \bam{complete linear system} associated with $D$. 
\end{definition}

\begin{remark}
	$\deg: \Div(C) \to \mbb{Z}$ is a group homomorphism and as the kernel is $\Lin(C)$ we see $\Cl(C) \cong \image \deg$
\end{remark}
\begin{corollary}
	$\Cl(\mbb{CP}^n) \cong \mbb{Z}$. 
\end{corollary}

\begin{definition}
	Two divisors $D,E$ are \bam{linearly equivalent} if $D-E$ is a principal.
\end{definition}

\begin{lemma}
	Linear equivalence of divisors is an equivalence relation. 
\end{lemma}

\begin{lemma}
	$f:X \to Y$ induces a group morphism $f:\Div(X) \to \Div(Y)$ by 
	\eq{
		f \pround{\sum_i n_i p_i} = \sum_i n_i f(p_i)
	}
\end{lemma}

\begin{prop}
	If $f:X \to Y$ is a map of Riemann surfaces and $D \in \Div(X)$, then $\deg(f(D)) = \deg f \cdot \deg D$.
\end{prop}

\begin{definition}
	A divisor $D = \sum_i n_i p_i$ is \bam{effective} if each $n_i \geq0$.  
\end{definition}

\begin{prop}
	We have a partial ordering on $\Div(C)$ by saying $D\geq D^\prime$ if $D-D^\prime$ is effective. 
\end{prop}

\begin{definition}
	A Weil divisor on $C$ defines a \hl{coherent} sheaf $O_C(D)$ as meromorphic functions $f$ s.t $(f)+D\geq0$. 
\end{definition}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Abel-Jacobi}
Suppose $C$ has genus $g$, then we know that $H_1(C,\mbb{Z}) \cong \mbb{Z}^{2g}$ where the generators are the loops $\pbrace{\gamma_i}_{i=1}^{2g}$. There is an alternative way to say this condition:

\begin{prop}
	If $X=C$ is a Riemann surface of genus $g$ then $H^0(C,K)\cong \mbb{C}^g$. 
\end{prop}
\begin{proof}
	See \cite{Farkas1992}, III.2.7.
\end{proof}
\begin{corollary}
	We can take a basis $\pbrace{\omega_i}_{i=1}^g$ of 1-forms on $C$. 
\end{corollary}
\begin{definition}
	The \bam{Jacobian} of $C$ is defined to be 
	\eq{
		J(C) = \faktor{\mbb{C}^g}{\Lambda}	
	}
	where $\Lambda$ is the lattice generated over $\mbb{R}$ by the vectors 
	\eq{
		\bm{\Omega}_j = \pround{\int_{\gamma_j} \omega_1, \dots, \int_{\gamma_j} \omega_g }, \quad 1 \leq j \leq 2g 
	}
\end{definition}

\begin{remark}
	We will see later in definition \ref{def: period matrix} that these vectors are the rows(/columns depending on your definition) of the period matrix. 
\end{remark}

\begin{definition}
	The \bam{Abel-Jacobi map} for $p_0 \in C$ is 
	\eq{
		A : C &\to J(C) \\
		p &\mapsto 	\pround{\int_{p_0}^p \omega_1, \dots, \int_{p_0}^p \omega_g } \mod \Lambda 
	}
	This is independent of the path of integration as we have quotiented by $\Lambda$. 
\end{definition}

\begin{remark}
	We can extend $u$ to a map of divisors by 
	\begin{align*}
	A : S^k C &\to J(C) \, ,\\
	(p_1, \dots, p_k) &\mapsto A(p_1) + \dots A(p_k) \, .
	\end{align*}
	We will on occasion denote this extended map as $A^{(k)}$. 
\end{remark}

\begin{theorem}[Abel's Theorem]
	Let $A$ be the Abel-Jacobi map and $D,E$ effective divisors. Then $A(D) = A(E) \Leftrightarrow D \sim E$. 
\end{theorem}

\begin{theorem}[Jacobi's Theorem]
	The map Abel-Jacobi map is surjective. 
\end{theorem}

\begin{corollary}
	There is an isomorphism from the space of degree-0 divisors to the Jacobian. 
\end{corollary}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Picard Group}\label{subsec:Picard Group}

\begin{definition}
	The \bam{Picard group} of a locally ringed space $X$ is $\Pic(X)$ the group of isomorphism classes of line bundles on $X$ with the group operation being $\otimes$. 
\end{definition}

\begin{remark}
	In place of line bundles we can actually say \bam{invertible sheaves} 
\end{remark}

We will first describe the Picard group using sheaf theory, we will then link it to divisors. 

\begin{prop}
	There is a canonical isomorphism $\Pic(X) \cong H^1(X, O_X^\times)$. 
\end{prop}
\begin{proof}
	This is a specialisation of prop \ref{prop: principal bundles cong H^1}.
\end{proof}
\begin{corollary}
	$T_L(\Pic^d(X)) \cong H^1(X,O_X)$
\end{corollary}
\begin{proof}
	You need to use the \hl{exponential sheaf sequence}. 
\end{proof}

Recall we have that the first Chern class gives a group hom $c_1 : \Pic(X) \to H^2(X,\mathbb{Z})$. We can interpret this concretely, by going from the exponential exact sequence 
\[
0 \to \mathbb{Z} \to O_X \to O_X^\times \to 1 
\] 
to the long exact sequence on a compact Riemann surface 
\[
0 \to \mathbb{Z} \to \mathbb{C} \to \mathbb{C}^\times \to H^1(X,\mathbb{Z}) \to H^1(X,O_X) \to H^1(X,O_X^\times) \overset{\delta}{\to} H^2(X,\mathbb{Z}) \to H^2(X,O_X) \to \dots 
\]
This reduces to (see \cite{Hitchin2013})
\[
0 \to \faktor{H^1(X,O_X)}{H^1(X,\mathbb{Z})} \to H^1(X,O_X^\times) \overset{\delta}{\to} H^2(X,\mathbb{Z}) \to 0
\]
We identify $\delta$ with $c_1$. If we further make the identification $H^2(X,\mathbb{Z}) \cong \mathbb{Z}$ we get a group homomorphism $\deg:\Pic(X) \to \mathbb{Z}$. 
\begin{lemma}
	$\deg(L \otimes L^\prime) = \deg L + \deg L^\prime$.
\end{lemma}
\begin{proof}
	This is just the property that $\deg$ is a group hom. 
\end{proof}

\begin{prop}
	If $s \in H^0(X,L)$ is a section with zeros $p_i$ with multiplicities $m_i$, then $\deg L = \sum_i m_i$. 
\end{prop}
\begin{corollary}
	If $\deg L < 0$, $L$ has no non-trivial holomorphic sections. 
\end{corollary}
To illustrate these properties best, we define a particular line bundle on any Riemann surface 
\begin{definition}
	Let $X$ be a Riemann surface and $p \in X$. Take $U_0$ to be an open neighbourhood of $p$ with coordinate $z$ s.t. $z(p)=0$, and take $U_1 = X \setminus \pbrace{p}$. We define the line bundle $L_p \to X$ by the transition function $g_{01} = z$.  
\end{definition}

\begin{example}
	When $p =0 \in \mathbb{P}^1$, $L_p = \mathcal{O}(1)$. 
\end{example}

\begin{lemma}
	$L_p$ has a canonical section given by $z$ on $U_0$ and $1$ on $U_1$. 
\end{lemma}

\begin{prop}
	$\deg L_p = 1$. 
\end{prop}
\begin{remark}
	One can think of this as choosing a normalisation for the generator of $\mathbb{Z}$. 
\end{remark}
$L_p$ is a useful line bundle for proving multiple results. To see all these look at \cite{Hitchin2013}. \\
We may further use Serre and Poicar\'e duality to identify 
\[
\faktor{H^1(X,O_X)}{H^1(X,\mathbb{Z})} \cong J(X) \, .
\]
This allows us to rewrite the SES as 
\[
0 \to J(X) \to \Pic(X) \to \mathbb{Z} \to 0 \, .
\]
One should note that this looks like it is telling us Abel-Jaocbi, and that is true as we will make clear now.

 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Link to Divisors}

\begin{theorem}
	$\Cl(C) \cong \Pic(C)$ naturally (when $C$ is smooth over its field as a variety). 
\end{theorem}
\begin{proof}
	See \href{https://math.stanford.edu/~vakil/725/class23.pdf}{Vakil's notes}. Alternatively this is covered in more generality in ``The Rising Sea" \cite{Vakil2010} (\S 14.2).
\end{proof}

\begin{corollary}
	We get a group homomorphism $\deg:\Pic(C) \to \mbb{Z}$ giving the degree of the corresponding divisor in $\Cl(C)$. 
\end{corollary}

\begin{corollary}
	$\Pic(\mbb{P}^1) \cong \mbb{Z}$. 
\end{corollary}
\begin{prop}
	$\Pic(\mbb{P}^1)$ is generated by $\mc{O}(1)$.  
\end{prop}

\begin{example}
	$T\mbb{P}^1 \cong \mc{O}(2)$. 
\end{example}


\begin{notation}
	We denote the isomorphism class of line bundles degree $d$ as $\Pic^d(C)$
\end{notation}

\begin{remark}
	With this new notation we may rephrase the corollary of the Abel-Jacobi theorem to say $J(C) \cong \Pic^0(C)$. 
\end{remark}

\begin{remark}
	This degree is exactly the degree we just found above, but now the calculation is concrete. Hence we really see that the SES said that $J(C) \cong \deg^{-1}(0) =\Pic^0(X) \subset \Pic(X)$.
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Square Roots}
We can also ask about division in the Picard group:

\begin{definition}
	A \bam{square root} of $L \in \Pic(X)$ is $\tilde{L} \in \Pic(X)$ s.t $\tilde{L}^{\otimes 2}= L$. Under the isomorphism to the divisor class group this is a solution to $2D_{\tilde{L}} = D_L$. 
\end{definition}


\begin{prop}\label{prop:square roots of line bundles}
	We have the following results about square-roots:
	\begin{itemize}
		\item $L$ has a square-root iff $\deg L$ is even
		\item If $L$ is a line bundle on $X$, $g(X)=g$, then if $L$ has a square-root it has exactly $2^{2g}$ square-roots. 
	\end{itemize}
\end{prop}
\begin{proof}
	\hl{Find reference for the first point}. If we think about the SES of sheaves 
	\eq{
0 \to \pbrace{\pm 1} \to O_X^\times \overset{\text{square}}{\to} O_X^\times \to 0	
}
	we get a corresponding LES of cohomology with relevant section:
	\eq{
H^0(X,O_X^\times) \to H^1(X,\pbrace{\pm 1}) \to \Pic(X) \overset{\otimes 2}{\to} \Pic(X) \to H^2(X,\pbrace{\pm 1})
}
	Hence the obstruction to taking square roots comes from the cohomology $H^2(X,\pbrace{\pm 1})$. This corresponds to whether the degree is odd or even. \\
	For the second point, note that if we had two square roots $\tilde{L}_1, \tilde{L}_2$, then $M=\tilde{L}_1 \otimes \tilde{L}_2^{-1}$ satisfies $M^{\otimes 2}=O$. These are the torsion elements of the Picard group. We know $\deg M=0$ so $M \in \Pic^0(X) \cong J(X)$. The torsion elements thus correspond to the half-period elements of the Jacobian lattice. 
\end{proof}

\begin{example}
	A square root of the canonical bundle $K=\mc{O}(-2)$ on $\mbb{CP}^1$ is $\mc{O}(-1)$. This example can be understood well in terms of the corresponding divisors. The canonical divisor comes from $dz$, which has a double pole, do $K=-2P$ (where $P$ is a point in $\mbb{P}^1$). The square root then corresponds to the divisor $-P$. These solutions are visually unique, and we know that to be so from the previous prop.  
\end{example}

\begin{remark}
	It is a corollary of Riemann-Roch (\ref{Thm: Riemann-Roch}) that the degree of the canonical divisor is even, and so we always have square roots of the canonical bundle. 
\end{remark}
\begin{notation}
	We will denote
	\eq{
S(X) = \pbrace{L \in \Pic(X) \, | \, L^{\otimes 2} = K_X}	
}
Note that by the proof of \ref{prop:square roots of line bundles} we have $S(X) \cong H^1(X,F_2)$, where we are now denoting $F_2$ for the field of two elements. Moreover, $S(X)$ is an affine space over $F_2$ modelled on $H^1(X,F_2)$. 
\end{notation}

\begin{definition}
	A \bam{theta characteristic} is a characteristic class $\Theta$ s.t. $2\Theta = c_1(K)$, i.e. a characteristic class corresponding to a square-root of the canonical bundle. 
\end{definition}

\begin{remark}
	It is the case (\hl{see nlab}) that if a theta characteristic corresponds to a polarising line bundle, then the sections of this bundle are theta functions. 
\end{remark}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5
\subsection{Riemann-Roch and Weierstrass Points}
We now restrict to considering compact Riemann surfaces $X$, and denote the field of meromorphic functions on $X$ by $H^0(X,O_X)$.
\begin{remark}
	There are lots of different notations used for the field of meromorphic functions on $X$, for example Farkas \& Kra use $\mc{H}(X)$. By writing it in sheaf cohomology notation, we make connections with Griffiths. \\
	Note also in this section we will use the additive presentation of divisors. This goes against Farkas \& Kra who use multiplicative notation.
\end{remark}

\begin{definition}
	Given divisor $D$ on $X$ we define the $\mbb{C}$-vector space 
	\eq{
		L(D) = \pbrace{f \in H^0(O_X) \, | \, (f)+D \geq 0}	= H^0(X,O_X(D))
	}
	We denote $\dim L(D) = l(D)$.
\end{definition}

\begin{remark}
	This convention, agreeing with Wikipedia and Griffiths, differs from Farkas \& Kra, who would have $r(D) = l(-D)$. 
\end{remark}

\begin{lemma}
	$l(D) = \dim \abs{D}+1$. 
\end{lemma}
\begin{proof}
	See Hartshorne, prop 7.7. The idea is that a section $s$ gives a divisor $(s)$, and two sections have the same divisor iff they are a constant multiple of each other. 
\end{proof}

\begin{definition}
	Given $D \in \Div(X)$ we define the \bam{index of speciality} of the divisor $D$ to be $i(D) = \dim \Omega(D)$ where
	\eq{
		\Omega(D) = \pbrace{\omega \, | \, \omega \text{ an abelian differential}, \, (\omega)\geq D} \, .
	}
We call a divisor $D$ \textbf{special} if $i(D)>0$. Otherwise $D$ is \textbf{non-special}
\end{definition}

We now state some simple-to-prove results.
\begin{prop}
	We have the following results about $L$:
	\begin{itemize}
		\item Given $C,D \in \Div(X), \, C \leq D \Rightarrow L(C) \subseteq L(D)$
		\item $L(0) = \mbb{C} \Rightarrow l(0) = 1$. 
		\item Given $D \in \Div(X), \, \deg(D)<0 \Rightarrow l(D) = 0$. 
		\item $i(D) = l(K-D)$ where $K$ is the canonical divisor.
		\item $\Omega(0) = H^0(X,K_X) \Rightarrow i(0) = g$. 
		\item $l(D)$ and $i(D)$ depend only on the divisor class group of $D$
	\end{itemize}
\end{prop}
\begin{proof}
\cite{Farkas1992}, \S III.4.
\end{proof}

\begin{theorem}[Riemann-Roch] \label{Thm: Riemann-Roch}
	$l(D) = \deg(D) -g+1 + i(D)$
\end{theorem}
This theorem can be generalised in the following way
\begin{theorem}
	If $E\to X$ is a rank-$r$ vector bundle over a compact Riemann surface, then 
	\[
	\dim H^0(X,E) - \dim H^1(X,E) = \deg E + r(1-g)
	\]
\end{theorem}
\begin{proof}
See \cite{Hitchin2013} for a nice proof by induction. 
\end{proof}
\begin{remark}
One should be able to see that the first version is just when taking $E=L$ a line bundle with associated divisor $D$. 
\end{remark}
\begin{corollary}
	$\deg K = 2g-2$. 
\end{corollary} 

\begin{corollary}
	If $\deg D > 2g-2$, $D$ is nonspecial. 
\end{corollary}

\begin{prop}
	A generic divisor $D$ with $\deg D \geq g$ is nonspecial. 
\end{prop}
\begin{proof}
	See \cite{Dubrovin2009}.
\end{proof}

Now using the above proposition an  Riemann-Roch, note that for $p \in X$ we have that the sequence $\pbrace{l(kp)}_{k=0}^\infty$ goes 
\eq{
	1, \underbrace{?, \dots, ?}_{1\leq k \leq 2g-2} , g, g+1, \dots 
}
It is known that this sequence can increase by a maximum of 1 from term to term. This observation leads to the following result:
\begin{theorem}[Weierstrass Gap Theorem]
	Let $X$ be a compact genus-$g$ Riemanns surface, then $\forall p \in X$ $\exists!$ integers $\pbrace{n_i}_{i=1}^g$ s.t. 
	\eq{
		1=n_1 < n_2 < \dots < n_g < 2g	
	} 
	and that $\nexists f$ s.t. $(f)=-n_ip$
\end{theorem}

\begin{definition}
	The \bam{weight} of $p \in X$ is 
	\eq{
		w_p = \sum_{i=1}^g (n_i - i)	
	}
	$p \in X$ is a \bam{Weierstrass point} if $w_p \neq 0$ (note that $w_p \geq 0$, so at a Weierstrass point it is positive). We will sometimes denote the set of Weierstrass points as $W=W(X)$. 
\end{definition}
We have results about the abundancy of Weierstrass points:
\begin{prop}
	We have 
	\begin{itemize}
		\item The set of Weierstrass points is discrete
		\item $\sum_{p \in X} w_p = g^3-g$
		\item If $g\geq 2$ the number of Weierstrass points $\abs{W}$ satisfies 
		\eq{
			2g+2 \leq \abs{W} \leq g^3-g	
		}
		attaining the lower bound iff $X$ is hyperelliptic, where the Weierstrass points are the branch points. Generically a Riemann surface will have $\abs{W}=g^3-g$. 
	\end{itemize}
\end{prop}

The next result gives a link between Weierstrass points and symmetry:
\begin{theorem}
	Automorphisms of compact Riemann surfaces permute Weierstrass points, that is we get a group homomorphism $\Aut(X) \to S_{W}$. 
\end{theorem}
\begin{proof}
	See Mondal's master's thesis. 
\end{proof}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Theta Function}\label{subsec: theta functions (riemann surfaces)}
Recall the Siegel upper half space from definition \ref{def: Siegel upper half space}. We are now going to define theta functions, using the definition in \cite{Farkas1992}. Note that this is not uniform over all sources, and so to be on your toes. 
\begin{definition}
	We define \textbf{Riemann's theta function} $\theta:\mathbb{C}^g \times \mathbb{H}_g \to \mathbb{C}$ as  
	\[
	\theta(z|\tau) = \sum_{N \in \mathbb{Z}^g} \exp \psquare{2\pi i \pround{\frac{1}{2} n^T \tau n + n^Tz}} \, .
	\]
\end{definition}

\begin{remark}
	If we want to talk about the theta function on a given Riemann surface, we always mean taking the parameter $\tau$ to be the Riemann matrix of the surface. 
\end{remark}

\begin{remark}
	In the case $g=1$ this is the theta function defined and dicussed in \S \ref{subsec: theta functions (elliptic curves)}.
\end{remark}

\begin{prop}
	$\theta$ converges absolutely and uniformly on compact subsets of $\mathbb{C}^g \times \mathbb{H}_g$.
\end{prop}
\begin{proof}
	See \cite{Farkas1992}. 
\end{proof}

\begin{prop}[Periodicity]
	Let $\mu,\mu^\prime \in \mathbb{Z}^g$. Then 
	\[
	\forall (z,\tau) \in \mathbb{C}^g \times \mathbb{H}_g, \, \theta(z+\mu^\prime+ \tau\mu | \tau) = \exp\psquare{2\pi i \pround{-\mu^T z - \frac{1}{2} \mu^T z \mu}}\theta(z | \tau) \, .
	\]
\end{prop}

\begin{corollary}
	The equation $\theta(z)=0$ is well defined when we take the equivalence class of $z$ in the Jacobian. 
\end{corollary}

\begin{prop}
	$\forall (z,\tau) \in \mathbb{C}^g \times \mathbb{H}_g, \, \theta(z|\tau) = \theta(-z | \tau)$. 
\end{prop}

We can extend the definition of the Riemann theta function slightly. 

\begin{definition}
We define the \textbf{first order theta function with characteristic} $\begin{bsmallmatrix} \epsilon \\ \epsilon^\prime \end{bsmallmatrix}$, $\epsilon, \epsilon^\prime \in \mathbb{R}^g$ to be $\theta\begin{bsmallmatrix} \epsilon \\ \epsilon^\prime \end{bsmallmatrix}(z | \tau)$ defined s.t. 
\[
	\theta\begin{bmatrix} 2\epsilon \\ 2\epsilon^\prime \end{bmatrix}(z|\tau) = \sum_{N \in \mathbb{Z}^g} \exp \psquare{2\pi i \pround{\frac{1}{2} (n+\epsilon)^T \tau (n+\epsilon) + (n+\epsilon)^T(z+\epsilon^\prime)}} \, .
\]
\end{definition}

The important theorem about theta functions is to follow. We will define a necessary (and often not explicitly named) concept first.

\begin{definition}
	The \textbf{Riemann constant vector} of a Riemann surface with homology basis $\bm{c} = (\bm{a},\bm{b})$ and Abel map $A$ with basepoint $P_0$ is  $\bm{K}=\bm{K}(\bm{c},P_0)$ a vector with components
	\[
	K_j = \frac{1+\tau_{jj}}{2} - \sum_{k \neq j}^g \oint_{a_k} \omega_k(Q) A_j(Q) \, .
	\]
\end{definition}

\begin{prop}
	$\bm{K}(P) = \bm{K}(P_0) + A(P)$, where $A$ has basepoint $P_0$. 
\end{prop}

\begin{remark}
	For more on the vector $\bm{K}$ and its calculation, see Deconick's \textit{Computing the Riemann Constant Vector}. 
\end{remark}

\begin{theorem}
	Let $X$ be a compact, genus-$g$ Riemann surface with canonical homology basis $\bm{c} = (\bm{a},\bm{b})$, Riemann matrix $\tau$ wrt said basis, and Abel map $A$ with basepoint $P_0$. Then $\theta\begin{bsmallmatrix} \epsilon \\ \epsilon^\prime \end{bsmallmatrix} \circ A$ is either identically $0$ of has exactly $g$ zeros.  \\
	Given this map has exactly $g$ zeros, call them $P_i$ and the divisor $D = \sum_i P_i$, then 
	\[
	A(D) = -\frac{1}{2}\tau \epsilon - \frac{1}{2}\epsilon^\prime + \tau n + m - \bm{K} 
	\]
	for some $n,m \in \mathbb{Z}^g$. In particular, as $\tau n +m \equiv 0$ in the Jacobian, we have 
	\[
	A(D)+\bm{K} = -\frac{1}{2}\psquare{\tau \epsilon + \epsilon^\prime} \, .
	\]
\end{theorem}

\begin{corollary}[Riemann's Vanishing Theorem]
	If, for $e \in \mathbb{C}^g$, the (multivalued) function $X \to \mathbb{C}$ given by $P \mapsto \theta(A(P)-e)$ is not identically $0$ it has $g$ zeros $\pbrace{P_i}$ and then, letting $D=\sum_i P_i$,
	\[
	A(D)+\bm{K} = e \, .
	\]
\end{corollary}
\begin{remark}
	The name \textit{Riemann Vanishing Theorem} is not universally used, even if the result is classical. Here the name is referenced from \cite{Ercolani1989}. 
\end{remark}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Theta Divisor}

We start with an important prop about the direct image of sheaves on a Riemann surface.
\begin{prop}
	Take a map of Riemann surfaces $f:X \to X^\prime$ and a line bundle $L \to X$. We have
	\begin{itemize}
		\item $H^0(X^\prime,f_\ast \mathcal{O}(L)) \cong H^0(X,\mathcal{O}(L))$,
		\item $\exists E\to X^\prime$ a rank-$r$ holomorphic vector bundle s.t. $f_\ast \mathcal{O}(L) = \mathcal{O}(E)$, where $r=\deg f$, and 
		\item if $V\to X^\prime$ is a holomorphic vector bundle, then $f_\ast \mathcal{O}(L \otimes f^\ast V) \cong \mathcal{O}(E \otimes V)$.
	\end{itemize}
\end{prop}
\begin{proof}
	See \cite{Hitchin2013,Gunning1967}. 
\end{proof}
Note in the above, we take $\deg f = \deg (f^\ast L_p)$ for any $p \in X^\prime$. \\
About such an $E$, we can say the following things.
\begin{prop}
	$\deg E = \deg L + (1-g^\prime) - \deg f (1-g)$.
\end{prop}
Moreover we can specify further if $X^\prime= \mathbb{P}^1$. 
\begin{prop}
	Suppose $\deg E=0$. Then $E$ is trivial iff $L(-1) := L \otimes f^\ast \mathcal{O}(-1)$ has no non-trivial holomorphic sections. 
\end{prop}
In the situation above, we know $\deg L = r+g-1 \Rightarrow \deg L(-1) = g-1$. We can define a map into the space of degree-$(g-1)$ line bundles as 
\begin{align*}
	S^{g-1}X &\to \Pic^{g-1}(X) \, , \\
	(p_1, \dots, p_{g-1}) &\mapsto L_{p_1} \otimes \dots \otimes L_{p_{g-1}} \, ,
\end{align*}
where $S^{g-1}X$ is the $(g-1)$-fold symmetric product. 
\begin{lemma}
If $L \in \Pic(X)$ has a section $s$ with simple zeros at $p_1, \dots, p_{g-1}$ (points may be repeated) then $L \cong L_{p_1} \otimes \dots \otimes L_{p_{g-1}}$.
\end{lemma}
\begin{proof}
	$s \otimes s_{p_1}^{-1} \otimes \dots \otimes s_{p_{g-1}}^{-1}$ is a trivialising section of $L \otimes L_{p_1}^{-1} \otimes \dots \otimes L_{p_{g-1}}^{-1}$. 
\end{proof}
\begin{prop}
	This map has codimension-1 image
\end{prop}
\begin{proof}
	$\dim (S^{g-1}X)=g-1$, and as $\Pic^{g-1}(X) \cong J(X)$, it has dimension $g$.We also know the map is injective. 
\end{proof}
\begin{remark}
	$\Pic^{g-1}(X)$ does not naturally have a group law, unlike $J(X)$. In fact, $\Pic^{g-1}$ is a $\Pic^0$-torsor. 
\end{remark}
\begin{definition}
	We call the image of the map the \textbf{theta divisor} $\Theta$. 
\end{definition}
By the above, we know that a generic $L(-1)\in \Pic^{g-1}(X)$ will not lie in the theta divisor, so will not have a non-trivial section, hence $E$ will be trivial. In $\Theta$, the $a_i$ is the Birkhoff decomposition of $E$ will be non-zero, so they will have discontinuities on here. \\
We might wonder why we have called this submanifold the theta divisor, and the reason will be made clear by the following result. 
\begin{theorem}[Riemann (Theta) Singularity Theorem]
Given a degree $g-1$ line bundle $L \to X$ we have $m_L \theta = h^0(X,\mathcal{O}(L))$. 
\end{theorem}
\begin{proof}
	See \cite{Griffiths1985} and Eynard's lectures on compact Riemann surfaces for discussions of this and different interpretations. 
\end{proof}

\begin{remark}
	In \cite{Braden2006}, Braden calls this the Riemann vanishing theorem. \hl{Why?}
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Baker-Akhiezer Functions}
We will start with a review of the material contained in \cite{Dubrovin2009, Dubrovin1985}. \\
Our set up will be as follows, suppose we have a Riemann surface $S$ with $g(S)=g$. 
\begin{definition}
	About $Q_i \in S$, $1 \leq i \leq n$, introduce a coordinate $z_i=z_i(P)$ s.t. $z_i(Q_i)=0$, and denote $k_i=z_i^{-1}$. Let $\delta = \sum_{i=1}^{N} \delta_i $ be a positive divisor on $S\setminus \pbrace{Q_i}$ and $\pbrace{q_i}_{i=1}^n$ a set of  polynomial. A \textbf{Baker-Akhiezer function} corresponding to the data $(Q_i,k_i,\delta,q_i)$ is a function $\Psi$ s.t. 
	\begin{itemize}
		\item $\Psi$ is meromorphic on $S \setminus \pbrace{Q_i}$, 
		\item $(\ev{\Psi}{S\setminus \pbrace{Q_i}})+\delta \geq 0$, and 
		\item $\Psi(P)e^{-q_i(k_i(P))}$ is analytic in a neighbourhood of $Q_i$. 
	\end{itemize}
	Fixing $Q,k,q$, we denote the vector space of Baker-Akhiezer functions for a divisor $\delta$ as $\Lambda(\delta)$. 
\end{definition}

\begin{example}
	If $S$ is an elliptic curve given by $w^2=4z^3-g_2z-g_3$ (see \hl{Elliptic Curves} for more detail) then we take the appropriate torus lattice with coordinate $u$ and parameterise as $z=\wp(u), w=\wp^\prime(u)$. Take $Q = \pbrace{u=0}$ and $q(k)=xk$ for some parameter $x \in \mathbb{C}$. As $g(S)=1$ the divisor is a single point $\delta=(\wp(u_1),\wp^\prime(u_1))$. The Baker-Akhiezer function in this case is 
	\[
	\Psi(P) = \Psi(u;x) = \frac{\sigma(u-u_1-x)e^{x\zeta(u)}}{\sigma(u-u_1)\sigma(u_1+x)} \, ,
	\]
	where $\sigma, \zeta$ are the corresponding Weierstrass functions. 
\end{example}

\begin{remark}
	We can allow the divisor $\delta$ to contain the point $Q$ if we want, and if it is present with multiplicity $n$, then we know as $P\to Q$ 
	\[
	\Psi(P) \sim e^{q(k)}\psquare{ck^n + \mathcal{O}(k^{n-1})}
	\]
	for some $c \in \mathbb{C}$. 
\end{remark}

\begin{prop}
	$\Psi \in \Lambda(\delta), \, (f)=\delta^\prime-\delta \, \Rightarrow f\Psi \in \Lambda(\delta^\prime)$.  
\end{prop}

\begin{lemma}\label{lemma: zeros of the Baker-Ahkiezer fn}
	A Baker-Akhiezer function has $N$ zeros on $S$, $\pbrace{\delta_i^\prime}_{i=1}^N$. Letting $\delta^\prime = \sum \delta_i^\prime$ we have 
	\begin{equation}\label{eqn: divisor equation for Baker-Akhiezer fn}
	A(\delta^\prime) = A(\delta) - \sum_{j=1}^n \bm{U}_{q_j} \, ,
	\end{equation}
	where $\bm{U}_q = (U_{q,1}, \dots, U_{q,g})$ is the vector given by 
	\[
	U_{q,j} = \frac{1}{2\pi i} \oint_{b_j} \Omega_q\, ,
	\] 
	$\pbrace{a_j,b_j}$ a canonical homology basis, $\Omega_q$ the normalised abelian differential of the second kind s.t. 
	\begin{itemize}
		\item $\Omega_{q_j} \sim dq_j + \mathcal{O}(k_j^{-2})dk_j$ as $k_j \to \infty$ and 
		\item $\forall 1 \leq j \leq g, \, \oint_{a_j} \Omega_q =0$. 
	\end{itemize}
	Conversely, if two divisors $\delta, \delta^\prime$ satisfy \ref{eqn: divisor equation for Baker-Akhiezer fn}, then they are the divisors of poles and zeros of some Baker-Akhiezer function with essential singularity of the form $\Psi(P) \sim e^{q_j(k_j)}$ as $P \to Q_j$.
\end{lemma}
\begin{proof}
	The meromorphic form $d\log \Psi$ must have as many zeros as poles counting multiplicity, and we required that $\Psi$ only had poles on $\delta$. The difference then comes from requiring that $\Psi$ is single valued, i.e that $\oint_c d\log\Psi \in 2\pi i \mathbb{Z}$ for $c \in \pbrace{a_j, b_j}$. 
\end{proof}

\begin{remark}
	For more on differentials, and the ability to normalise them, see \cite{Dubrovin2009} \S 2.7. 
\end{remark}

\begin{theorem}
	If $\delta$ is non-special, and $q$ has `sufficiently small' coefficients, $\dim \Lambda(\delta)=N-g+1$. 
\end{theorem}
\begin{proof}
	See \cite{Dubrovin2009}. Note that the `sufficiently small' condition is required s.t. $\bm{U}_q$ (as defined in the previous lemma) is small, and then this gives uniqueness by requiring that $\delta$ nonspecial $\Rightarrow \delta^\prime$ nonspecial. 
\end{proof}

\begin{theorem}
	Given $\delta$ is nonspecial and $N=g$, the Baker-Akhiezer function for data $(Q,k,\delta,q)$ on $S$ is 
	\[
	\Psi(P) = c \exp \pround{\sum_{j=1}^n \int_{P_0}^P \Omega_q} \frac{\theta(A(P) - A^{(g)}(D)  - \bm{K} + \sum_{j} \bm{U}_{q_j})}{\theta(A(P) - A^{(g)}(D) - \bm{K})} \, ,
	\]
	where 
	\begin{itemize}
		\item $c \in \mathbb{C}$,
		\item $P_0\not\in \pbrace{Q_j}$ is an arbitrary point in $S$ used as the basepoint for $A$,
		\item $\bm{U}_q, \Omega_q$ are as defined by lemma \ref{lemma: zeros of the Baker-Ahkiezer fn},
		\item $\bm{K}$ is the vector of Riemann constants, and 
		\item the path for $\int_{P_0}^P \Omega_q$ is the same as $A(P)$. 
	\end{itemize}
\end{theorem}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Classifying Riemann Surfaces}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Monodromy}
\begin{definition}
	Given a $n$-fold covering $f:X \to Y$ and a closed path $\gamma$ based at $p \in Y$, then $\gamma$ lift to a path $\hat{\gamma}$ in $X$ s.t. $f \circ \hat{\gamma}=\gamma$. Then $\gamma$ induces a bijection $\sigma_\gamma : f^{-1}(p) \to f^{-1}(p)$ called the \bam{monodromy associated to $\gamma$}. By fixing an ordering of $f^{-1}(p)$ we identify $\sigma \in S_n$.  
\end{definition}
\begin{remark}
	The monodromy is fixed under basepoint preserving homotopies of paths, and actually we get a functor $\Pi_1(Y) \to Set$. See \href{https://ncatlab.org/nlab/show/monodromy}{nlab} for more. 
\end{remark}


\subsection{Invariants}
\subsubsection{j-invariant}
\subsubsection{Igusa invariants}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Spin Structures}
We will now want to understand two papers, by Atiyah \cite{Atiyah1971} and Kallel, Sjerve \cite{Kallel2006}, on spin structure on Riemann surfaces. 
\subsection{A particular quadratic form}
Recall in subsection \ref{subsec:Picard Group} we looked at solutions in the divisor class group to the equation $2D=K$. We can say some more. Recall that on a Riemann surface $X$, the space $S(X)$ is affine over $F_2$ with group of translations $H^1(X,F_2)$ (see prop \ref{prop:square roots of line bundles}). 
\begin{definition}
	If $A$ is an affine space over $F_2$, a function $\phi:A \to F_2$ is \bam{quadratic} if $\forall a \in A, \, x,y \in T(A)$ (the v.sp of translations) the function 
	\eq{
H_a : T(A) \times T(A) &\to F_2 \\
(x,y) &\mapsto \phi(a+x+y) - \phi(a+x) - \phi(a+y) + \phi(a)	
}
is bilinear. 
\end{definition} 

\begin{lemma}
	The associated bilinear form $H_a$ is independent of $a$. 
\end{lemma}	
If $\phi(a)=0$, and we identify $A$ with $T(A)$ by $a+x \mapsto x$, $\phi$ is a quadratic from on $T(A)$ is the standard sense of a vector space, with associated bilinear form $H$. 
\begin{lemma}
If $H$ is non-degenerate it is classified by the number of zeros of $\phi$, or equivalently the Arf invariant. 
\end{lemma}

\begin{theorem}
	The function $\phi:S(X) \to F_2, \, \phi(L) = \dim \Gamma(L) \, (\text{mod } 2)$ is a quadratic function whose associated bilinear form is the cup product on $H^1(X,F_2)$. 
\end{theorem}
In order to identify the bilinear with the cup product we just need to work out the number of zeros of the quadratic corresponding to the cup product, and the zeros of $\phi$ which are given by the following prop
\begin{prop}
	$\phi$ takes the values 0,1 at $2^{g-1}(2^g+1), \, 2^{g-1}(2^g-1)$ points of $S$ respectively. 
\end{prop}
\begin{proof}
	See Mumford (\hl{ref}).
\end{proof}
This then means they coincide. \\
We can further say that 
\begin{theorem}
	Let $\pbrace{X_t \, | \, t \in \mbb{C}, \, \abs{t}<1}$ be a holomorphic family of compact Riemann surfaces, and let $D_t$ be a divisor class in $X_t$ s.t. $2D_t = K_t$. Then $\dim \abs{D_t}$ is constant mod 2.  
\end{theorem}
This means that the previous result does not depend on the complex structure on $X$. 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Spin Structures on Riemann Surfaces}
We have been introducing square-roots of the canonical bundle, and the next prop is the reason why.

We need a brief lemma:

\begin{lemma}
	Line bundles correspond bijectively to circle bundles.
\end{lemma}
\begin{proof}
	See \href{https://ncatlab.org/nlab/show/classifying+space}{here}, \href{https://ncatlab.org/nlab/show/circle+bundle}{here}, and \href{https://en.wikipedia.org/wiki/Complex_projective_space}{here}. It boils down to the fact that we have the map $BU(1) \cong \mbb{CP}^\infty$ so we get that every complex line bundle $L \to X$ is the pullback along a map of the universal line bundle $S^\infty \hookrightarrow \mc{L} \twoheadrightarrow \mbb{CP}^\infty$. That is, we have the square
	\begin{tkz}
		L \arrow[r] \arrow[d] & \mc{L} \arrow[d] \\ X \arrow[r] & \mbb{CP}^\infty  
	\end{tkz}
\end{proof}

\begin{prop}
	Spin structures on a compact complex manifold correspond bijectively with isomorphism classes of line bundles $L$ s.t $L^{\otimes 2}\cong K$. 
\end{prop}
\begin{proof}
	On an almost complex manifold we have a reduction of structure group from $SO(2n)$ to $U(n)$, and we have the map $\det:U(n) \to U(1)$, so we can take a spin structure on $X$ to be a cohomology class $\xi \in H^1(U(X),F_2)$ (modulo the image of $H^1(X,F_2)$ under $\pi^\ast$) that restricts to the generator of $H^1(U(1),F_2)\cong F_2$ on the fibre, where $U(X)$ is the unit tangent bundle on $X$. This generator is the squaring map. \\
	Now by the lemma we have that $\xi$ corresponds to a continuous line bundle $L \in \Pic(X)$, and the facts that $\xi$ maps to the generator $-1 \in H^1(U(1),F_2)$ means that $L$ is the pullback of $\mc{O}(-1)$ the line bundle over $\mbb{CP}^\infty$. This means that we must have an isomorphism $\alpha:L^{\otimes 2} \to K_X$ (as $\mc{O}(-1)^{\otimes 2} = \mc{O}(-2) = K_{\mbb{CP}^\infty}$). The holomorphic structure on $L$ is then inherited from $K$, and if $X$ is compact the holomorphic structure conversely fixes $\alpha$ up to a scale factor, so the isomorphism is fixed. Hence we are done.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Invariant Spin Structures}

We will want to understand the interplay between the spin structures on a Riemann surface and it's automorphisms. We start with a generic result about quadratic forms:

\begin{lemma}\label{lemma: preserving quadratic gives fixed point}
	Let $V$ be a f.d. v.sp over $F_2$ and let $\phi:V \to F_2$ be a quadratic functions whose associated bilinear $H$ is non-degenerate. Then any affine transform of $V$, $x \mapsto Ax+b$ which preserves $T$ has a fixed point.  
\end{lemma}
\begin{proof}
	By assumption we have
	\eq{
\phi(x) = \phi(Ax+b) = \phi(Ax) + \phi(b) + H(Ax,b)	
} 
Setting $x=0$ gives us $\phi(b)=0$ and so $\phi(x) = \phi(Ax)+H(Ax.b)$. Expanding $H(x,y)$ then finds 
\eq{
H(x,y) = H(Ax,Ay) \Rightarrow A^\ast A = I
} 
where $A^\ast$ is the dual of $A$ wrt to the non-degenerate inner product $\pangle{x,y} = H(x,y)$. Now 
\eq{
A^\ast x = x \Rightarrow Ax = x \Rightarrow H(x,b) = 0 &\Rightarrow b \perp \ker(A-I)^\ast \\
&\Rightarrow b \in \image(A-I) \\
& \Rightarrow \exists y \in V, \, b=(A-I)y \\
& \Rightarrow \exists y \in V, \, y = Ay+b
}
Hence $y$ is a fixed point of the transform. 
\end{proof}

Using now the quadratic $\phi$ defined on $S(X)$ we have the following corollary:

\begin{corollary}
	Any orientation-preserving diffeomorphism of a compact Riemann surface fixes at least 1 spin structure.
\end{corollary}

It is now to ask how many such structures an automorphism can preserve, and how many automorphisms are there that preserve a given structure.\\
We begin with the first question:
\begin{theorem}
	Take $f \in \Aut(X)$, let $M \in SL_{2g}(\mbb{Z})$ be the matrix representing $f_\ast : H_1(X,\mbb{Z}) \to H_1(X, \mbb{Z})$ wrt a particular homology basis, and $\bar{M}=M \, (\text{mod }2)$. Spin structures invariant under $f$ are in bijection with solutions $x \in F_2^{2g}$ of the equation 
	\eq{
(\bar{M}^T-I)x=0	
}
Then $f$ leaves $2^h$ spin structures invariant, where $h = \dim E_1(\bar{M})$. 
\end{theorem}
\begin{proof}
 To do this we can see from lemma \ref{lemma: preserving quadratic gives fixed point} that spin structures invariant under $f \in \Aut(X)$ correspond to solutions of $(A-I)y=b$ where $x \mapsto Ax+b$ is the induced transform on $H^1(X,F_2)$ from $f$. Given we know we always have one solution, which we will denote $y_0$, we can consider the difference $x=y-y_0$ for any other solution to see that invariant spin structures biject with solutions of 
\eq{
(A-I)x=0
}
Now given a homology basis specifying $M$, we have a dual basis of $H^1(M,\mbb{Z})$, and the induced transform from $f$ is represented by the matrix $M^T$. If we restrict to coefficients mod 2 the corresponding effect on the transform matrix is to take the coefficients mod 2. This means we have $A = \bar{M}^T$. 
\end{proof}
\begin{remark}
	You may, like me, have been initially confused as to why the cohomology $H^1(X,F_2)$ has dimension $2g$, when we typically think of a cohomology basis as being a basis of $g$ differentials. \hl{different type of cohomology? or differentials we ask to be abelian}. 
\end{remark} 

It is then possible to extend this to find exactly which cohomology classes $\xi \in H^1(U(X),F_2)$ correspond to invariant spin structures. Let $e \in H_1(U(X),F_2)$ be the homology corresponding to the $U(1)$ generator. We can get a basis of $H_1(U(X),F_2)$ from a basis of $H_1(X,\mbb{Z})$, $\pbrace{\delta_i}_{i=1}^{2g}$, by lifting the cycles $\delta_i$ to a cycle $\tilde{\delta}_i$ and including $e$. 
Let $\eta \in H^1(U(X),\mbb{Z})$ be its dual, so our full cohomology basis of $H^1(U(X),\mbb{Z})$ is $\pbrace{d_i,\eta}$. Denote their projection to $H^1(U(X),F_2)$ with an overline. 
\begin{remark}
	In this basis, with have the set of spin structures is 
	\eq{
\pbrace{\bar{\eta} + \sum_i y_i \bar{d}_i \, | \, y_i \in F_2}	
}
\end{remark}
The corresponding map of $U(X)$ induced from $f$ only acts on the base, so the corresponding effect on $e$ is $f_\ast(e)=e$. 
To calculate $f_\ast(\tilde{\delta}_i)$ we need a lemma from \cite{Johnson1980}:
\begin{lemma}
	For $a,b \in H_1(X,\mbb{Z}), \, \widetilde{(a+b)} = \tilde{a} + \tilde{b} + (a \circ b)e$. 
\end{lemma}
\begin{corollary}
	$f_\ast(\tilde{\delta}_i) = M_{ij} \tilde{\delta}_j + b_i e$ where 
	\eq{
v_i = \sum_{1 \leq j_1 < j_2} M_{ij_1} M_{ij_2} (\delta_{j_1} \circ \delta_{j_2})
}
\end{corollary}
\begin{proof}
	We have that $\tilde{f_\ast(a)} = f_\ast(\tilde{a})$ and so using $f_\ast(\delta_i) = M_{ij} \delta_j$ we have 
	\eq{
f_\ast(\tilde{\delta}_i) &= M_{i1}\tilde{\delta}_1 + \widetilde{\pround{\sum_{j>1} M_{ij} \delta_j}} + \pround{M_{i1}\delta_1 \circ \sum_{j>1}M_{ij} \delta_j}e \\
&= \dots \\
&= M_{ij} \tilde{\delta}_j + \psquare{\sum_{1 \leq j_1 < j_2} M_{ij_1} M_{ij_2} (\delta_{j_1} \circ \delta_{j_2}) }e
}
\end{proof}
Using the duality condition we can work out $f^\ast(\eta)$. With this we can formulate an equation for a spin structure to be invariant. 
\begin{theorem}
	A spin structure $\xi = \bar{\eta} + \sum_i y_i \bar{d}_i$ is invariant under $f$ if 
	\eq{
(A-I)y = b	
}
with $A=\bar{M}^T, \, b=-\bar{v}$.   
\end{theorem}

From our understanding of the matrix $A$, we can then get a following result:

\begin{prop}
	If $f$ is an automorphism of odd order $n$, then $f$ leaves only 1 spin structure fixed iff the associated orbit space $X/\mbb{Z}_n$ has genus 0. 
\end{prop}

\begin{theorem}
	Non-identity $f \in \Aut(X)$ preserves every spin structure iff $X$ is hyperelliptic and $X$ is the hyperelliptic involution. 
\end{theorem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Extended example}
Here we will now take a specific curve and consider all the theory we have previously covered. To this we will effectively go through Miranda \cite{Miranda1995} and apply the relevant sections. \\
Define the degree-$6$ homogeneous polynomial $P:\mbb{C}^3 \to \mbb{C}$ by 
\eq{
	P(x,y,z) = y^6 - x^6 + z^2 x^4
}
Define the corresponding projective plane curve 
\eq{
	X = \pbrace{[x:y:z] \in \mbb{P}^2 \, | \, P(x,y,z) = 0}
}
Throughout we will want to compare our by-hand calculations with numerics in Sage, so we start by initialising $X$. 
\begin{lstlisting}[language=Python,frame=single]
sage: x,y,z = QQ['x,y,z'].gens()
sage: X = Curve(y^6-x^6+z^2*x^4)
\end{lstlisting}

\subsection{Singularities}

The corresponding affine plane curve on the intersection with the open set $U_x = \pbrace{x \neq 0}$ is $y^6 = 1-z^2$. Hence 
\eq{
	X = \pbrace{[1:y:z] \, | \, y^6 = 1-z^2} \cup \pbrace{[0:0:1]}
}
\begin{prop}
	$X$ is singular at $[0:0:1]$ only. 
\end{prop}
\begin{proof}
	We have 
	\eq{
		\pd[P]{x} &= 2x^3(2z^2 -3x^2), & \pd[P]{y} &= 6y^5, & \pd[P]{z} &= 2zx^4	
	}
	It can be seen that a common solution to these must have $y=0$ from $\del_y P=0$, and then either $z=0$  or $x=0$ from $\del_zP=0$. If $z=0$, $\del_zP=0$ enforces $x=0$ which isn't in $\mbb{P}^2$. If $x=0$, $z$ is arbitrary and we find the point $[0:0:1] \in \mbb{P}^2$. This is calculated in Sage as follows:
	\begin{lstlisting}[language=Python,frame=single]
	sage: X.singular_points()
	[(0 : 0 : 1)]
	\end{lstlisting}
\end{proof}
We need to get an understanding of this singularity. If we take the neighbourhood $U_z = \pbrace{z \neq 0}$ the corresponding affine plane curve on the intersection is 
\eq{
	p(x,y) = y^6-x^6+x^4 = 0
}
as 
\eq{
	X = \pbrace{[x:y:1] \, | \, y^6-x^6+x^4=0} \cup \pbrace{[x:y:0] \, | \, y^6-x^6=0}
}
\begin{prop}
	The only singular point on the affine plane curve $p(x,y)=0$ is $(0,0)$ and it is $2$-monomial. 
\end{prop}
\begin{proof}
	$\del_x p(x,y) = 2x^3(2-3x^2), \, \del_y p(x,y) = 6y^5$. It can be seen that the only simultaneous solution to these is  $(0,0)$. Here we write $p(x,y)=g(x,y)^4 - h(x,y)^6$ where
	\eq{	
		g(x,y) &= x\psquare{1 - \frac{1}{4}x^2 + \dots} = x\psquare{1-x^2}^\frac{1}{4} \\
		h(x,y) &= iy
	}
	We then note $\gcd(4,6) = 2$. 
\end{proof}
As such by general theory we know that we can resolve this singularity to make $X$ into a compact Riemann surface. This process involves removing the singularity at $[0:0:1]$ and patching the two holes created. 

\subsection{Genus}

We now check some topology using Riemann-Hurwitz. 
\begin{prop}
	$g(X) = 2$.
\end{prop}
\begin{proof}
	As standard we consider the map $X\to \mbb{P}^1$ taking the coordinate $y$. Then $z$ is generically double valued so the degree of the map is 2. This is ramified at the the 6 roots of $1-y^6=0$, so using $g(\mbb{P}^1)$
	\eq{
		g(X) = 1+2(0-1)+\frac{1}{2} \times 6 \times (2-1) = 1-2+3=2
	}
	This is calculated in Sage as follows:
	\begin{lstlisting}[language=Python,frame=single]
	sage: X.genus()
	2
	\end{lstlisting}
\end{proof}
\begin{remark}
	This is to be expected, as here we are dealing with a hyperelliptic curve, of the form $z^2=h(y)$ where $h$ is a polynomial of degree $2g+2$. 
\end{remark}

\subsection{Symmetries}
From the above prop we have the following corollary.
\begin{corollary}
	Through Hurwitz' theorem we know $\abs{\Aut(X)} \leq 84$.
\end{corollary}
This is a very lax bound, we know many groups of order $\leq 84$. We now try to calculate $\Aut(X)$ more systematically. Firstly we note that as a hyperelliptic curve it comes with the hyperelliptic involution $(y,z) \mapsto(y,-z)$ generating a $C_2$ symmetry. We also have a $D_6$ dihedral group of automorphisms generated by $r:(y,z) \mapsto (\zeta y, z)$ and $s:(y,z) \mapsto (1/y,iz/y^3)$ where $\zeta = e^{\frac{i\pi}{3}}$. We can check that as $\zeta^3=-1$ 
\eq{
	srs:(y,z) \mapsto (1/y,iz/y^3) \mapsto (\zeta/y,i z/y^3) \mapsto (\zeta^{-1}y,i^2 \zeta^{-3}z) = (\zeta^{-1}y,z)
}
giving $srs=r^{-1}$ as required from the dihedral group. The hyperelliptic involution commutes with this dihedral action, so in total we have found a $\Aut(X) \geq C_2 \times D_6$. As $\abs{C_2 \times D_6}=24$, by Hurwitz' theorem we know that we could have at most one other automorphism of order either 2 or 3. This turns out not to be the case, and to see a general classification see for example \cite{Muller2017}. \\
To do the calculation in Sage, not we can use a result in \cite{Lauter2001} (translated \href{https://www.arxiv-vanity.com/papers/1811.07007/}{here}):
\begin{lemma}
	If $X$ is a hyperelliptic curve then $\Aut(J(X),a) \cong \Aut(X)$ where $a$ is the canonical principal polarisation of the Jacobian. 
\end{lemma}
This allows us to calculate in Sage:
\begin{lstlisting}[language=Python,frame=single]
sage: A.<u,v> = QQ[]
sage: Mod = sage.schemes.riemann_surfaces.riemann_surface
sage: S = Mod.RiemannSurface(u^2-1+v^6)
sage: G = S.symplectic_automorphism_group()
sage: G.structure_description()
'(C6 x C2) : C2'
\end{lstlisting}
\begin{remark}
	Note that above Sage is acting as a GAP wrapper. The formatting translates to say $G \cong (C_6 \times C_2) \rtimes C_2$
\end{remark}

\subsection{Riemann's Bilinears and Period Matrices}

We now view our curve $X$ as a 6-fold covering of $\mbb{P}^1$ with branch points at $z=\pm 1$. We want to first calculate the monodromy associated to encircling these points, so let $\gamma_\pm$ be a curve in $\mbb{P}^1$ that encircles $\pm 1$ once anticlockwise (explicitly choose a circle of small radius $\eps$). On $\gamma_\pm$ take $z = \pm1 + \eps e^{i\theta}$. \\
As we recall $y^6 = 1-z^2$, on $\gamma_+$ we see 
\eq{
	y^6 = -\eps e^{i\theta}\pround{2+\eps e^{i\theta}}
} 
and on $\gamma_-$ 
\eq{
	y^6 = \eps e^{i\theta}\pround{2-\eps e^{i\theta}}
}
To both of these the associated monodromy can be written as $\zeta$ the fundamental solution to $\zeta^6=1$ as before, where we mean that multiplying by $\zeta$ acts as the cycle of sheets that corresponds to the paths $\gamma_\pm$. Observe then that the curve $\gamma = \gamma_+ - \gamma_-$ (a figure of 8 if we deform so the curves intersect at $z=0$) has associated monodromy 0, but is non-contractible, and so corresponds to cycles on $X$. Moreover, by changing the sheet the lift starts on we get actually get $6$ distinct cycles, and we can choose them to have the right intersection numbers we would want of a canonical homology basis. Explicitly we take
\eq{
	a_1 &= \gamma:(1 \to 2 \to 1) \\
	b_1 &= \gamma:(2 \to 3 \to 2) \\
	a_2 &= \gamma:(4 \to 5 \to 4) \\
	b_2 &= \gamma:(5 \to 6 \to 5)
}
where hopefully the notation is self-explanatory. 
\begin{remark}
	\hl{One might ask, how do we know these have the right orientation to get the correct intersection?}
\end{remark}
To determine what forms we need to integrate to get the period matrix we recall a statement in Miranda (pg 112)
\begin{lemma}
	Suppose that $X$ is a projective plane curve of degree $d$ $F(x,y,z)=0$ where $F(x,y,1)=f(x,y)$ then if $p(x,y)$ is a polynomial of degree at most $d-3$ then 
	\eq{
		p(x,y)\frac{dx}{\pround{\pd[f]{y}}}	
	} 
	is a holomorphic differential. 
\end{lemma}
This applies to tell us that we can get a basis of holomorphic on differentials on $X$ with $\pbrace{\frac{dz}{y^5}, \frac{dz}{y^4}}$. 
\begin{remark}
	The polynomials $p$ we are taking here are actually $6, 6y$. We know that we only need $g=2$ of them so be sufficient. 	
\end{remark}
Now we can explicitly calculate. We fix the 1st sheet by asking that $y(z=0)=1$. We then set a normalisation our basis called $\omega_1, \omega_2$ respectively by asking that \eq{
	\int_{a_1} \omega_i = 1
}.
\begin{remark}
	This can be done as over our cycles the forms will not integrate to zero, as can be seen for example with 
	\eq{
		\int_{a_1} \frac{dz}{y^5} = (1-\zeta^{-5})\int_{-1}^1 \frac{dz}{(1-z^2)^{5/6}} = (1-\zeta)B\pround{\frac{1}{2}, \frac{1}{6}} \\
		\int_{a_1} \frac{dz}{y^4} = (1-\zeta^{-4})\int_{-1}^1 \frac{dz}{(1-z^2)^{4/6}} = (1-\zeta^2)B\pround{\frac{1}{2}, \frac{1}{3}}
	}
	where to do the above calculation we have used 
	\eq{
		\int_{-1}^1 \frac{dx}{(1-x^2)^\alpha} = 2 \int_0^1 \frac{dx}{(1-x^2)^\alpha} = \int_0^1 t^{-\frac{1}{2}} (1-t)^{-\alpha} dt = B\pround{\frac{1}{2}, 1-\alpha}
	}
	One might wonder \hl{is there a way to use the Pochhammer contour as part of the homology basis} to recreate this result slightly more easily? 
\end{remark}
We can get onto other sheets just by multiplying $y$ by powers of $\zeta$, so for example we can calculate that 
\eq{
	\int_{b_1} \omega_1 &= \zeta^{2\times -5}\psquare{(0 \mapsto 1) + \zeta^{-1\times -5}(1\mapsto -1) + (-1 \mapsto 0)} \\
	&= \zeta^{-10}(1-\zeta^5)(-1 \mapsto 1) \\
	&= -\zeta^{-5}(1-\zeta^{-5})(-1 \mapsto 1) 
}
and following this through we get that the period matrix is 
\eq{
	\Omega = \begin{pmatrix} 1 & \zeta^{-5(4-1)} & \zeta^{-5(2-1)} & \zeta^{-5(5-1)} \\ 1 & \zeta^{-4(4-1)} & \zeta^{-4(2-1)} & -\zeta^{-4(5-1)}\end{pmatrix} = \begin{pmatrix} 1 & -1 & \zeta & -\zeta \\ 1 & 1 & \zeta^2 & \zeta^2 \end{pmatrix}
}
and so 
\eq{
	\tau = \frac{\zeta}{2} \begin{pmatrix} 1 & 1 \\ -1 & 1 \end{pmatrix} \begin{pmatrix} 1 &  -1 \\ \zeta & -\zeta \end{pmatrix} &= \frac{\zeta}{2} \begin{pmatrix} 1+\zeta & -(1-\zeta) \\ -(1-\zeta) & 1+\zeta \end{pmatrix} = \frac{1}{2} \begin{pmatrix} \sqrt{3}i & -1 \\ -1 & \sqrt{3}i \end{pmatrix}
}
\begin{comment}
\eq{
\Omega = \begin{pmatrix} (1-\zeta)B\pround{\frac{1}{2}, \frac{1}{6}} & \zeta^{-15} (1-\zeta)B\pround{\frac{1}{2}, \frac{1}{6}} & -\zeta^{-10} (1-\zeta)B\pround{\frac{1}{2}, \frac{1}{6}} & -\zeta^{-25} (1-\zeta)B\pround{\frac{1}{2}, \frac{1}{6}} \\ (1-\zeta^2)B\pround{\frac{1}{2}, \frac{1}{3}} & \zeta^{-12} (1-\zeta^2)B\pround{\frac{1}{2}, \frac{1}{3}} & -\zeta^{-8} (1-\zeta^2)B\pround{\frac{1}{2}, \frac{1}{3}} & -\zeta^{-20} (1-\zeta^2)B\pround{\frac{1}{2}, \frac{1}{3}}\end{pmatrix}
}
We can calculate 
\eq{
\frac{B\pround{\frac{1}{2}, \frac{1}{6}}}{B\pround{\frac{1}{2}, \frac{1}{3}}} &= \frac{\Gamma(1/2) \Gamma(1/6)}{\Gamma(2/3)} \frac{\Gamma(5/6)}{\Gamma(1/2)\Gamma(1/3)} = \frac{\pi/\sin(\pi/6)}{\pi/\sin(\pi/3)} =\sqrt{3}
}
and so 
\eq{
\Omega \propto \begin{pmatrix} \sqrt{3} & -\sqrt{3} &  -\sqrt{3}\zeta^2  & -\sqrt{3}\zeta^5 \\ 1+\zeta & 1+\zeta & -\zeta^4(1+\zeta) & -\zeta^4(1+\zeta) \end{pmatrix}
}

This means we can calculate the Riemann matrix to be 
\eq{
\tau = \frac{1}{2\sqrt{3}(1+\zeta)}\begin{pmatrix} 1+\zeta & \sqrt{3} \\ -(1+\zeta) & \sqrt{3} \end{pmatrix} \begin{pmatrix} -\sqrt{3}\zeta^2 &  \sqrt{3} \zeta^2 \\ \zeta(1+\zeta) & \zeta(1+\zeta) \end{pmatrix} &= \frac{\zeta}{2}\begin{pmatrix}1-\zeta & 1+\zeta \\ 1+\zeta & 1-\zeta \end{pmatrix} \\
&= \frac{1}{2}\begin{pmatrix} 1 & \sqrt{3}i \\ \sqrt{3}i & 1 \end{pmatrix}
}
\\
\end{comment}
This can be calculated numerically in Sage as below (output formatted to fit in the document):
\begin{lstlisting}[language=Python,frame=single]
sage: S.period_matrix()
[ -0.6-1.1*I  0.6+1.1*I 1.2+0.0*I -1.2+0.0*I]
[ -1.1-0.6*I -1.1-0.6*I 0.0-1.2*I  0.0-1.2*I]
sage: S.riemann_matrix()
[ 0.000+0.866*I 0.500+0.000*I]
[ 0.500+0.000*I 0.000+0.866*I]
\end{lstlisting}
\begin{remark}
	\hl{These numerical results seem to suggest the analytic answer is wrong, and that I should really be finding}
	\eq{
		\Omega \sim \begin{pmatrix} 1 & -1 &  \zeta^2  & -\zeta^2 \\ 1 & 1 & \zeta & \zeta \end{pmatrix}
	}	
	giving 
	\eq{
		\tau = \frac{1}{2} \begin{pmatrix} 1 & 1 \\ -1 & 1 \end{pmatrix} \begin{pmatrix} \zeta^2 &  - \zeta^2 \\ \zeta & \zeta \end{pmatrix} &= \frac{\zeta}{2} \begin{pmatrix} 1+\zeta & 1-\zeta \\ 1-\zeta & 1+\zeta \end{pmatrix} = \frac{1}{2} \begin{pmatrix} \sqrt{3}i & 1 \\ 1 & \sqrt{3}i \end{pmatrix}
	}
\end{remark}


\begin{remark}
	Because of the action of both the modular group and the general linear group on $\Omega$, it is difficult to inspect the computed answer to see if it is correct. This is less true of $\tau$, for which the induced action of the general linear group is trivial, but we retain a the action of the modular group now through matrix-valued fractional linear transforms.  
\end{remark}

\begin{remark}
	We could also try this calculation viewing $X$ as a standard hyperelliptic. General theory says that we have a basis of $\Omega^1(X)$ given by 
	\eq{
		\pbrace{\omega_j = \frac{y^j dy}{z}}_{j=0}^{g-1}
	}
	and a generating set of $H_1(X,\mbb{Z})$ given by a suitable choice of independent closed paths $c = \gamma_1 - \gamma_2$ where $\gamma_i$ are the two lifts of a path in $\mbb{P}^1$ between branch points of the map $X \to \mbb{P}^1$. In order to find the period matrices explicitly we need to calculate 
	\eq{
		\int_c \omega_j 
	}
	for these loops c. To be explicit for the paths in the base that we choose we take 
	\eq{
		a_1 &= \pbrace{e^{\frac{it\pi}{3}} \, | \, t \in [0,1]} \\
		b_1 &= \pbrace{e^{\frac{i(t+1)\pi}{3}} \, | \, t \in [0,1]} \\
		a_2 &= \pbrace{e^{\frac{i(t+3)\pi}{3}} \, | \, t \in [0,1]} \\
		b_2 &= \pbrace{e^{\frac{i(t+5)\pi}{3}} \, | \, t \in [0,1]}  
	}
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{\secmath{g=2}}
If we restrict to the case of studying Riemann surfaces with genus $2$, we can further start to say more specific things. 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Classification by automorphisms}
Costa \cite{Costa2001} and Bolza \cite{Bolza1887} have classified genus $2$ hyperelliptic curves according to their automorphism groups. We can give a list of these using standard presentations of the curve in the form $y^2=p(x)$, where $p$ is a polynomial of degree $5$ or $6$:\\
\hl{insert table here}\\
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{\secmath{D_6}}
We now want to investigate the period matrix of a general $D_6$ curve. To do this we recall two forms:
\eq{
y^2 = x(x-1)\pround{x-\lambda}\pround{x-\frac{1}{1-\lambda}}\pround{x-\frac{\lambda-1}{\lambda}} \text{ and } y^2 = (x^3-\alpha^3)(x^3-\alpha^{-3})
}
where restrictions on the value of $\lambda,\alpha$ will apply. We will write $\alpha^3 + \alpha^{-3} = -b$ so we have for the second form $y^2 = x^6+bx^3+1$, and view this as a sixfold cover of $\mbb{P}^1$ with coordinate $y$. We will assume for later that $b\in\mbb{R}_{>0}$. Here we can write the generators of the symmetry as 
\eq{
s:(x,y) \to (\rho x,y), \quad r:(x,y) \to (1/x, y/x^3)
}
where $\rho = \exp(2\pi i/3)$. Because of the $y \mapsto -y$ symmetry from the hyperelliptic involution we know that the monodromy around $\pm 1$ must be the same, and so we can get a closed curve $a$ from a figure of 8 around the two branch points. We can then get a homology basis by shifting the sheet appropriately. For now we will specify this to mean 
\eq{
a_1 = a+ra, \, a_2 = sa-rsa, \, b_1 = sa, \, b_2 = ra
}
Braden shows in his notes that if we choose the differentials 
\eq{
\omega_1 = (1-x) \frac{dx}{y}, \, \omega_2 = (1+x) \frac{dx}{y}
}
we get the Riemann matrix 
\eq{
\tau = \begin{pmatrix} -\frac{1}{4} + \frac{1+2\rho}{2}R & \frac{1}{2} \\ \frac{1}{2} & \frac{R}{R-(1+2\rho)} \end{pmatrix}
}
where 
\eq{
R = \frac{\int_a \omega_2}{\int_a \omega_1}
}
We want to now calculate this $R$ explicitly. To fix the sheet of $a$ and work out the monodromy explicitly, we let $y=1+\eps e^{i\theta}$ for small $\eps >0$, then 
\eq{
1 + 2\eps e^{i\theta} + \mc{O}(\eps^2) = x^6+bx^3+1 &\Rightarrow x_n(\theta) = \pround{\frac{2\eps}{b}}^{\frac{1}{3}}e^{\frac{i\theta}{3}}\rho^n + \mc{O}(\eps^\frac{2}{3}) \\
&\text{or } x_n(\theta) = b^\frac{1}{3} e^\frac{\pi i}{3}\rho^n+\mc{O}(\eps^\frac{1}{3})
}
We can get the same about $-1$ if we introduce an additional factor of $e^\frac{i\pi}{3}$ with every $\eps^\frac{1}{3}$. Hence we fix $a$ by asking that it starts at $y=1-\eps$ with $x\approx -\pround{\frac{2\eps}{b}}^{\frac{1}{3}}$ and immediately encircles $y=1$ anticlockwise. Now note that at $y=0$, our sheets correspond to real solutions of 
\eq{
x^6+bx^3+1 = 0 = (x^3)^2 + b(x^3) + 1
}
We can see the two orbits of sheets that are not related by monodomy around $\pm 1$, given by $x_\pm^3 = \frac{-b \pm \sqrt{b^2-4}}{2} = \alpha^{\pm3}$, and then each of these corresponds to 3 sheets from the 3 possible cube roots. For simplicity we assume $b>4$ further so we can define $\alpha$ to be the real cube root. Hence we find
\eq{
 \int_a \frac{dx}{y} &= \rho \int_0^\alpha \frac{dx}{\sqrt{(x^3-\alpha^3)(x^3-\alpha^{-3})}} + \rho \int_\alpha^0 \frac{dx}{-\sqrt{(x^3-\alpha^3)(x^3-\alpha^{-3})}} \\
& \phantom{=} + \int_0^\alpha \frac{dx}{-\sqrt{(x^3-\alpha^3)(x^3-\alpha^{-3})}} + \int_\alpha^0 \frac{dx}{\sqrt{(x^3-\alpha^3)(x^3-\alpha^{-3})}} \\
&= 2(-1+\rho)\int_0^\alpha \frac{dx}{\sqrt{(x^3-\alpha^3)(x^3-\alpha^{-3})}}
}
and likewise
\eq{
\int_{a} \frac{xdx}{y} = 2(-1+\rho^2)\int_0^\alpha \frac{xdx}{\sqrt{(x^3-\alpha^3)(x^3-\alpha^{-3})}}
}
If we introduce the notation 
\eq{
F &= \int_0^\alpha \frac{dx}{\sqrt{(x^3-\alpha^3)(x^3-\alpha^{-3})}}, & G &= \int_0^\alpha \frac{xdx}{\sqrt{(x^3-\alpha^3)(x^3-\alpha^{-3})}}
}
Hence we can calculate, using that $\rho^2+\rho+1=0$
\eq{
R = \frac{(-1+\rho)F +(2+\rho)G}{(-1+\rho)F-(2+\rho)G}
}
To do the integrals $F,G$ we let $u = x^3, \, \frac{1}{3}u^{-\frac{2}{3}} du = dx$ so (for example)
\eq{
F &= \frac{1}{3}\int_0^{\alpha^3} u^{-\frac{2}{3}}(\alpha^3-u)^\frac{-1}{2} (\alpha^{-3}-u)^\frac{-1}{2} \, du \\
&= \frac{\alpha}{3} \int_0^1 v^{-\frac{2}{3}} (1-v)^{-\frac{1}{2}} (1-\alpha^6 v)^{-\frac{1}{2}} \, dv \\
&= \frac{\alpha}{3} B\pround{1/3,1/2} \tensor[_2]{F}{_1}\pround{1/2,1/3;5/6;\alpha^6}
}
setting $v = \alpha^3 u$, and so likewise 
\eq{
G = \frac{\alpha^2}{3} B\pround{2/3,1/2} \tensor[_2]{F}{_1}\pround{1/2,2/3;7/6;\alpha^6}
}

\begin{remark}
	With some hypergeometric gymnastics one should be able to prove that 
	\eq{
i \frac{\tensor[_2]{F}{_1}\pround{1/2,1/2;1;1-\lambda(\alpha)}}{\tensor[_2]{F}{_1}\pround{1/2,1/2;1;\lambda(\alpha)}}+\frac{\rho(\rho + \mc{I}(\alpha))}{1+\mc{I}(\alpha)} =0	
}
where 
\eq{
	\lambda(\alpha) &= (\alpha^2-1)^3 \psquare{r(\alpha-1)^2(\alpha-r)^3(\alpha+r)}^{-1}, & \mc{I}(\alpha) &= \alpha \frac{B\pround{2/3,1/2} \tensor[_2]{F}{_1}\pround{1/2,2/3;7/6;\alpha^6}}{B\pround{1/3,1/2} \tensor[_2]{F}{_1}\pround{1/2,1/3;5/6;\alpha^6}}
}
with $r = \exp(i\pi/3), \, \rho=r^2$. \\
This was proven by Adri Daalhuis, by showing that both the left and right terms of the sum satisfy the ODE
\eq{
0 = \frac{f^{\prime\prime\prime}(a)}{f^\prime(a)}-\frac{3}{2}\psquare{\frac{f^{\prime\prime}(a)}{f^{\prime}(a)}}^2 - \frac{18a^4}{(1-a^6)^2}
}
and then showing that their first 3 taylor coefficients are the same (with a different sign). This was done in Maple. 
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\part{Elliptic Curves}
An important class of Riemann surfaces are those with genus $1$. It turns out \hl{(ref?)} that these are all a special class of curve called elliptic curve. These come with their own interesting properties which we introduce here. 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Periodic Functions}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Generic results}

We will start with some general results about periodic complex functions. We fix $f:\mbb{C} \to \mbb{C}$ to be a non-constant meromorphic single valued function. 

\begin{lemma}
	The periods of $f$ form a $\mbb{Z}$-module $L$ 
\end{lemma}

\begin{prop}
	$L$ is either 
	\begin{itemize}
		\item trivial, ($=0$)
		\item rank 1, ($=\omega \mbb{Z}$)
		\item rank 2, ($=\omega_1 \mbb{Z} \oplus \omega_2 \mbb{Z}$)
	\end{itemize}
\end{prop}

\begin{definition}
	A function with rank-2 $L$ is called an \bam{elliptic function} and $L$ is called the \bam{period lattice}. 
\end{definition}

\begin{definition}
	Given a period lattice $L$, a choice of $\omega_1, \omega_2$ s.t.  $L = \omega_1 \mbb{Z} \oplus \omega_2 \mbb{Z}$ is called a \bam{primitive pair}. For a primitive pair we call $\tau = \frac{\omega_2}{\omega_1}$ the \bam{period ratio}. 
\end{definition}

It is common, as we will do now, to restrict the period ratio to have real imaginary part

\begin{prop}
	Any pairs of primitive pairs are related by a fractional linear transform $\in SL(2,\mbb{R})$. The corresponding period ratios are related by a map in the modular group
\end{prop}

\begin{definition}
	An \bam{elliptic function field} is the class $K =K(X)$ of functions of rational character on the complex torus $X$
\end{definition}

\begin{remark}
	Idefintifying $X$ with $\faktor{\mbb{C}}{L}$ is equivalent to identifying $K(X)$ with double periodic functions on the universal cover of $X$, $\mbb{C}$.
\end{remark}

\begin{prop}
	$K(X)$ is a differential field with differential $\frac{d}{dz}$ inherited from the coordinate $z$ on the universal cover.  
\end{prop}

\begin{prop}
	$\deg f = 0$ iff $f$ is constant
\end{prop}
\begin{proof}
	$\deg(f) = 0$ iff $f$ has no poles. Pulling back to a doubly periodic function on $\mbb{C}$, it is a bounded entire function, so constant by Liouville's theorem. 
\end{proof}

\begin{lemma}
	Let $f \in K(X)$. Then 
	\eq{
		\oint_{\del \mf{F}(X)} f(z) \, dz = 0 	
	}
\end{lemma}
\begin{proof}
	Use periodicity of the function. 
\end{proof}

\begin{remark}
	This can be used to show $\sum_{p\in X} \ord_p(f)=0$ for $X$ a complex torus, by considering the integral of $\frac{1}{2\pi i}\frac{f^\prime}{f} \in K(X)$
\end{remark}

This result has some powerful corollaries, which we will see here now:

\begin{prop}
	$\forall f \in K(X), \, \deg f \neq 1$.
\end{prop}
\begin{proof}
	If $\deg f = 1$ then the residue at the pole is 
	\eq{
		\frac{1}{2\pi i} \oint_{\del \mf{F}(X)} f(z) \, dz = 0	
	}
	so there is no pole. 
\end{proof}

\begin{prop}
	Take $f \in K(X)$ and let $p_1, \dots, p_d$ be the zeros, $q_1, \dots, q_d$ the poles. Then 
	\eq{
		\sum p_i  - q_i \in L
	} 
\end{prop}
\begin{proof}
	Let $L = L(\omega_1, \omega_2)$
	\eq{
		\sum p_i  - q_i &= \frac{1}{2\pi i}\oint z d(\log f(z)) \\
		&= \frac{1}{2\pi i} \pbrace{\int_0^{\omega_1} \psquare{z - (z+\omega_2)}d(\log f(z)) - \int_0^{\omega_2} \psquare{z - (z+\omega_1)} d(\log f(z)) } \\
		&= \omega_1 \underbrace{\psquare{\frac{1}{2\pi i}\int_0^{\omega_2} d(\log f(z))}}_{\in \mbb{Z}} - \omega_2  \underbrace{\psquare{\frac{1}{2\pi i}\int_0^{\omega_1} d(\log f(z))}}_{\in \mbb{Z}}
	}
	where we know the integrals are integer values as $f$ takes the same values at the corners, so the argument must differ by an element of $2\pi i \mbb{Z}$
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Automorphisms}

\begin{prop}
	Complex torus $X$ always have bijective automorphisms $z \mapsto z+c, \, z \mapsto -z$. The only involutions are the reflection $z \mapsto -z$ and addition of half periods. 
\end{prop}

\begin{remark}
	Note that every complex torus $X$ admits the bijective automorphism descending from the map $\mbb{C} \to \mbb{C}, \ ,z \mapsto n z$ for $n \in \mbb{Z}\setminus 0$
\end{remark}

\begin{definition}
	The complex torus $X$ with primitive periods $\omega_1, \omega_2$ is said to \bam{admit complex multiplication} if $\exists f$ an automorphism $f(z) = cz$ for some $c \in \mbb{C}\setminus\mbb{Z}$. In this we have $i,j,k,l \in \mbb{Z}$ s.t.
	\eq{
		c \omega_2 &= i \omega_2 + j \omega_1 \\
		c \omega_1 &= k \omega_2 + l \omega_1	
	}
	i.e. $\frac{\omega_2}{\omega_1}$ is a fixed points of the fractional linear transform $\begin{psmallmatrix} i & j \\ k & l \end{psmallmatrix}$. 
\end{definition}

\begin{lemma}
	The period ratio is a quadratic irrationality from the field $\mbb{Q}[\sqrt{(i+l)^2 - 4(il-jk)}]$
\end{lemma}

\begin{prop}
	Suppose $X$ is a complex torus admitting complex multiplication via a bijective automorphisms, then the period ratio is either $i$ or $e^{\frac{\pi i}{3}}$. 
\end{prop}

\begin{remark}
	To see more about homomorphisms of complex tori, see \S1.2 of \cite{Birkenhake2004}.
\end{remark}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Theta Functions}\label{subsec: theta functions (elliptic curves)}
We start this section with a warning. There are \emph{many} different ways of writing theta functions, and so you will need to be on your toes to connect those in these notes with those in other documents. We covered in \S \ref{subsec: theta functions (riemann surfaces)} theta functions on general Riemann surfaces already, so aside from refreshing our definition, we will only state things that a new and leave the rest of the discussion for there. 
\begin{definition}
	For $\tau \in \mbb{C}, \, \image(\tau)>0$, define the \bam{Riemann theta function} 
	\eq{
		\theta(z) = \theta(z|\tau) = \sum_{n \in \mbb{Z}} e^{\pi i\psquare{n^2 \tau + 2nz}}	
	}
\end{definition}

\begin{remark}
	This is the definition given in \cite{Miranda1995} and on Wikipedia (as of June 2020), which agrees with \cite{Farkas1992}. 
\end{remark}

\begin{prop}
	We have 
	\eq{
		\theta(z+1) &= \theta(z) \\
		\theta(z+\tau) &= e^{-\pi i\psquare{\tau +2z}}\theta(z)
	}
\end{prop}

\begin{corollary}
	$\theta(z_0) \Leftrightarrow \forall m,n \in \mbb{Z}, \, \theta(z_0 + m + n\tau)=0$ and the order of the zero is the same
\end{corollary}

\begin{prop}
	The only zeros of $\theta$ are 
	\eq{
		\frac{1+\tau}{2} + L(1,\tau)	
	}
	and all these zeros are simple. 
\end{prop}

\begin{definition}
	The \bam{translated theta function} is 
	\eq{
		\theta^{(x)}(z) = \theta\pround{z - (\sfrac{1}{2}) - (\sfrac{\tau}{2}) - x}	
	}
\end{definition}

\begin{definition}
	The \bam{Jacobi theta functions} are 
	\eq{
		\theta_1(z | \tau) = 	
	}
\end{definition}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Jacobi Elliptic Functions}

\begin{definition}
	The \bam{sinus amplitudinus} function is $sn:\mbb{C} \to \mbb{C}$ given by 
	\eq{
		x = \int_0^{sn(x,k)} \frac{dy}{\sqrt{(1-y^2)(1-k^2 y^2)}}
	}
\end{definition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{\secmath{\text{The Weierstrass $\wp$ Function}}}

From our discussion of doubly-periodic functions, we know the minimal degree of a non-constand function is 2, so the simplest possible cases are 
\begin{itemize}
	\item two simple poles
	\item one double pole
\end{itemize}
We will construct the latter case.

\begin{definition}
	Pick a complex torus $X$ with lattice $L$. The corresponding \bam{Weierstrass function} is $\wp:\mbb{C} \to \mbb{C}$ 
	\eq{
		\wp(z) = \wp(z | L) = \frac{1}{z^2} + \sum_{\omega \in L\setminus 0} \psquare{\frac{1}{(z-\omega)^2} - \frac{1}{\omega^2}}
	} 
\end{definition}

\begin{prop}
	The infinite sum is convergent and hence the $\wp$ function is well defined.
\end{prop}

\begin{prop}
	$\wp$ has the following properties:
	\begin{itemize}
		\item Even, i.e. $\wp(z) = \wp(-z)$.
		\item Double periodic with period lattice $L$
		\item $\deg \wp = 2$ as a map $\faktor{\mbb{C}}{L} \to \mbb{P}^1$, with only one double pole at $z=0$
		\item $\forall c \in \mbb{C}^\times, \, \wp(cz | cL) = \wp(z | L)$
		\item $\wp^\prime(z) = -2\sum_{\omega \in L} (z-\omega)^{-3}$
		\item $\wp^\prime$ is odd
		\item $\forall \omega \in L, \, \wp^\prime(\sfrac{\omega}{2}) =0$ and the half periods are the only roots. 
		\item Let $\omega_1, \omega_2$ be the primitive roots and $e_1 = \wp(\sfrac{\omega_1}{2}), \, e_2 = \wp(\sfrac{\omega_1}{2} + \sfrac{\omega_2}{2}), \, e_3 = \wp(\sfrac{\omega_2}{2})$. Then $e_1, e_2, e_3$ are distinct.
	\end{itemize}
\end{prop}

\begin{prop}
	$\wp$ satisfies the differential equations 
	\eq{
		\pround{\wp^\prime}^2 &= 4(\wp-e_1)(\wp-e_2)(\wp-e_3) \\
		&= 4\wp^3 -g_2 \wp -g_3	
	}
	where 
	\eq{
		g_2  &= 60\sum_{\omega \in L \setminus 0} \omega^{-4} \\
		g_3 &= 140\sum_{\omega \in L \setminus 0} \omega^{-6}
	}
	are the \bam{invariant of the cubic}
\end{prop}

\begin{remark}
	It is shown in the proof of the above proposition that 
	\eq{
		g_2 &= -4(e_1 e_2 + e_2 e_3 + e_3 e_1) \\
		g_3 &= 4e_1 e_2 e_3	
	}
	and 
	\eq{
		e_1 + e_2 + e_3 = 0
	}
\end{remark}

\begin{remark}
	We will sometimes use the notation $\wp(z) = \wp(z | g_2, g_3)$
\end{remark}

\begin{lemma}
	$g_2^3 - 27g_3^2 = 16(e_1 - e_2)^2(e_2 - e_3)^2 (e_3 - e_1)^2$
\end{lemma}
\begin{proof}
	Consider the polynomial $y^2 = x^3 - \pround{\sfrac{g_2}{4}}x - \pround{\sfrac{g_3}{4}} = (x-e_1)(x-e_2)(x-e_3)$. The discriminant of this cubic is 
	\eq{
		\Delta &= 4 \pround{\sfrac{g_2}{4}}^3 - 27\pround{\sfrac{g_3}{4}}^2 \\
		&= \frac{1}{16} \pround{g_2^3 - 27 g_3^2}
	}
	However, we also know 
	\eq{
		\Delta = \prod_{i < j} (e_i - e_j)^2
	}
\end{proof}


\begin{corollary}
	$\wp^{\prime \prime} = 6\wp^2 - \frac{1}{2}g_2
	$\end{corollary}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Addition Theorems}

\begin{prop}
	$\wp(z+w) = \frac{1}{4} \psquare{\frac{\wp^\prime(z) - \wp^\prime(w)}{\wp(z) - \wp(w)}}^2 - \wp(z) - \wp(w)$
\end{prop}
\begin{corollary}
	$\wp(z + \sfrac{\omega_1}{2}) = e_1 + \frac{(e_1 - e_2)(e_1 - e_3)}{\wp(z) - e_1}$ and similar equations for cycles 
\end{corollary}
\begin{proof}
	Start by noting 
	\eq{
		\wp(z+\sfrac{\omega_1}{2}) + \wp(z) + e_1 = \frac{1}{4} \psquare{\frac{\wp^\prime(z)}{\wp(z)-e_1}}^2	
	}
\end{proof}


\begin{corollary}[Duplication Formula]
	$\wp(2z) = \frac{1}{4} \psquare{\frac{\wp^{\prime \prime}(z)}{\wp^\prime(z)}}^2 - 2\wp(z)$
\end{corollary}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Related Weierstrass Functions}\label{subsec: related Weierstrass functions}
See \cite{Dubrovin2009} pp.74-75 and \href{https://en.wikipedia.org/wiki/Weierstrass_functions}{here}. 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Elliptic Integrals}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Elliptic Integral of the First Kind}
Let us start by stating our assumptions of this section, namely:
\begin{itemize}
	\item $u \in \mbb{R}$
	\item $k \in (0,1)$.
\end{itemize}

We make the following definition:

\begin{definition}
	\bam{Jacobi's incomplete elliptic integral of the first kind} is the map $H\to \mbb{C}$
	\eq{
		x \mapsto \int_0^x \frac{1}{\sqrt{(1-t^2)(1-k^2t^2)}} dt	
	}
	where the integrand is taken to be real and positive for $t \in (-1,1)$, and at the branch points $\pm 1, \pm \frac{1}{k}$ the contour should take an infinitesimal circle above the point (i.e remaining in the UHP). 
\end{definition}

\begin{definition}
	The \bam{complete elliptic integral of the first kind } is 
	\eq{
		K = K(k) = \int_0^1 \frac{dt}{\sqrt{(1-t^2)(1-k^2t^2)}} \in \mbb{R}
	}
	and the \bam{complementary integral of the first kind } is 
	\eq{
		K^\prime = K^\prime(k) = \int_1^\frac{1}{k} \frac{dt}{\sqrt{(t^2-1)(1-k^2t^2)}} \in \mbb{R}
	}
\end{definition}

\begin{prop}
	We have the following results about $K(k)$:
	\begin{enumerate}
		\item $K(-k) = K(k)$
		\item $\lim_{k \to 0^+} K(k) = \frac{\pi}{2}$
		\item $K(ik) = \frac{1}{\sqrt{1+k^2}}K\pround{\frac{k}{\sqrt{1+k^2}}}$
		\item $K(i) = \frac{1}{4}B\pround{\frac{1}{4},\frac{1}{2}}$ ($B$ the beta function)
		\item $K^\prime(k) = K(k^\prime)$ where $k^\prime = \sqrt{1-k^2}$
		\item $K(k) = (1+k_1) K(k_1)$ for $k_1 = \frac{1-k^\prime}{1+k^\prime}$
		\item $K(k) = \frac{\pi}{2} \prod_{n=1}^\infty (1+k_n)$ for $k_{n+1} = \frac{1-k_n^\prime}{1+k_n^\prime}$
		\item 	$K(k)  = \frac{1}{1+k} K \pround{\frac{2\sqrt{k}}{1+k}}$ (Landen's Transformation)
	\end{enumerate}
\end{prop}
\begin{proof}
	We will complete the proof in parts:
	\begin{enumerate}
		\item Trivial 
		\item say something about convergence, and then $\int_0^1 \frac{dt}{\sqrt{1-t^2}} = \frac{\pi}{2}$ is a trig integral. 
		\item  consider the transform $	t \mapsto \frac{t}{\sqrt{1+k^3(1-t^2)}}$
		\item $K(i) = \int_0^1 \frac{dt}{\sqrt{1-t^4}} = \frac{1}{4} \int_0^1 t^{-\frac{3}{4}}(1-t)^{-\frac{1}{2}} \, dt$ making the substitution $t\mapsto t^\frac{1}{4}$.
		\item Use the substitution $s = \psquare{1-(k^\prime)^2 t^2}^{-\frac{1}{2}}$ to transform $K(k^\prime)$ to $K^\prime(k)$.
		\item do the calculation
		\item Iterate, observe $k_{n+1} < k_n$ (one can show $k_{n+1}<k_n^2$), and argue about convergence. 
		\item (Legendre 1811) Using the substitution $t \mapsto \frac{(1+k^\prime)x\sqrt{1-t^2}}{1-k^2 t^2}$ find $K(k_1) = \frac{1+k^\prime}{2}K(k)$ and the use Landen's transform.  
	\end{enumerate}
\end{proof}


These definitions of the complete integral make sense for the following result:

\begin{prop}
	The incomplete elliptic integral of the first kind has the following straight line segements for ranges:
	\eq{
		\psquare{0,1} &\mapsto [0,K]  & [-1,0] &\mapsto [-K,0] \\
		\psquare{1,\sfrac{1}{k}} &\mapsto [K,K+iK^\prime] & \psquare{-\sfrac{1}{k},1} &\mapsto \psquare{-K+iK^\prime,-K}\\
		\left[\sfrac{1}{k},\infty\right) &\mapsto [K+iK^\prime,iK^\prime)	& \left( -\infty, -\sfrac{1}{k}\right] &\mapsto (iK^\prime,-K+iK^\prime]
	}
\end{prop}

\begin{corollary}
	The image of the UHP under the elliptic integral of the first kind is the interior of the rectangle with corners $\pbrace{K,-K,K+iK^\prime, -K+iK^\prime}$, with the boundary of the rectangle being the image of the boundary of the UHP.
\end{corollary}

\begin{definition}
	The \bam{incomplete elliptic integral of the second kind} is the map $H\to \mbb{C}$ \eq{
		x \mapsto \int^x_0 \sqrt{\frac{1-k^2 t^2}{1-t^2}} dt 	
	}
	using the contour above branch points.
\end{definition}

\begin{definition}
	The \bam{complete elliptic integral of the first kind } is 
	\eq{
		E = E(k) = \int_0^1 \sqrt{\frac{1-k^2t^2}{1-t^2}}\, dt \in \mbb{R}
	}
	and the \bam{complementary integral of the first kind } is 
	\eq{
		E^\prime = E^\prime(k) =  \int_1^\frac{1}{k} \sqrt{\frac{1-k^2t^2}{t^2-1}}\, dt \in \mbb{R}
	}
\end{definition}

\begin{prop}
	We have the following results about $E(k)$:
	\begin{enumerate}
		\item $E^\prime(k) = K(k^\prime) - E(k^\prime)$
		\item (Legendre 1825) $K(k)E(k^\prime) + E(k)K(k^\prime) - K(k)K(k^\prime) = K^\prime(k)E(k) - K(k) E^\prime(k) = \frac{\pi}{2}$
	\end{enumerate}
\end{prop}
\begin{proof}
	The prove the first result use the substitution $x \mapsto k^{-1}\sqrt{1-(k^\prime)^2 x^2}$. \\
	The second result is is more involved. 
\end{proof}

We can also get identities between the complete integrals by considering the derivative wrt $k$.

\begin{prop}
	We have 
	\begin{itemize}
		\item $k^{-1}\frac{d}{dk} \psquare{k(1-k^2)\frac{d}{dk}K(k)}=K(k)$
		\item $k\frac{d}{dk}E(k) = E(k)-K(k)$
		\item $k(1-k^2)\frac{d}{dk} K(k) = E(k) -(1-k^2)K(k)$.
	\end{itemize}
\end{prop}
\begin{proof}
	We will prove just the final one. We start by noting 
	\eq{
		k^{-1} \frac{d}{dk} K(k) = \int_0^1 \frac{x^2 \, dx}{\sqrt{(1-x^2)(1-k^2x^2)^3}}
	}
	by simple differentiation under the integral. Then 
	\eq{
		0 &= \int_0^1 \psquare{\frac{d}{dx} \frac{x\sqrt{1-x^2}}{\sqrt{1-k^2 x^2}}} \, dx \\
		&= \int_0^1 \psquare{\frac{1-x^2}{\sqrt{(1-x^2)(1-k^2 x^2)}} - \frac{(1-k^2)x^2}{\sqrt{(1-x^2)(1-k^2 x^2)^3}}} \, dx \\
		\Rightarrow k^{-1}(1-k^2) \frac{d}{dk} K(k) &= k^{-2} \psquare{\int_0^1 \frac{1-k^2 x^2}{\sqrt{(1-x^2)(1-k^2x^2)}} dx +(k^2-1)\int_0^1\frac{1}{\sqrt{(1-x^2)(1-k^2x^2)}} dx } \\
		&= k^{-2}\psquare{E(k)-(1-k^2)K(k)}
	}
\end{proof}

\begin{definition}
	The \bam{incomplete elliptic integral of the third kind} is the map $H \to \mbb{C}$ 
	\eq{
		x \mapsto \int^x \frac{1}{(t^2-c^2)\sqrt{(1-t^2)(1-k^2t^2)}}	dt
	}
	using the contour above branch points. The corresponding complete integrals is 
	\eq{
		\Pi(\alpha^2,k) = \int_0^1 \frac{1}{(1-\alpha^2 t^2)\sqrt{(1-t^2)(1-k^2t^2)}}	dt
	}
	for $\alpha \in (-1,1)$. 
\end{definition}

\begin{prop}
	$\Pi(k^2,k) = \frac{E(k)}{1-k^2}$
\end{prop}
\begin{proof}
	This result requires differential identities. Note 
	\eq{
		0 &= \int_0^1 \psquare{\frac{d}{dx} \frac{x\sqrt{1-x^2}}{\sqrt{1-k^2 x^2}}} \, dx \\
		&= \int_0^1 \psquare{\frac{1-2x^2}{\sqrt{(1-x^2)(1-k^2 x^2)}} + \frac{k^2 x^2 \sqrt{1-x^2}}{\sqrt{(1-k^2 x^2)^3}}} \, dx \\
		\Rightarrow K(k) - \frac{2(K(k)-E(k))}{k^2} &= -k\frac{d}{dk} \psquare{\Pi(k^2,k) - k^{-1} \frac{d}{dk} K(k)}	
	}
	rearranging this to get a DE for $\Pi$ finds the result. 
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Reduction of Elliptic Integrals}

\begin{definition}
	If $R=R(x,y)$ is a rational function in $x,y$ and $y^2=Q(x)$ is a polynomial of degree $d=3,4$ with distinct roots then the integral
	\eq{
		\int R(x,y) \, dx	
	}
	is called a \bam{general elliptic integral}. 
\end{definition}

\begin{remark}
	Dealing with integrals such as the above when $d=1,2$ or there are repeated roots are treated in your earlier calculus classes, for example:
	\begin{itemize}
		\item $d=1$: write $y^2 = ax+b$ and make the substitution 
		\eq{
			x \mapsto \frac{1}{a}(x^2-b)	
		}
		\item $d=2$: write $y^2 = c(x-a)(x-b)$ and make the substitution 
		\eq{
			x \mapsto a = \frac{1}{4}(b-a) \pround{x - \frac{1}{x}}^2	
		}
	\end{itemize}
\end{remark}

\begin{remark}
	Depending on how the layout of this document ends up being, I may have a the section on Jacobi elliptic functions first. In this case, one would see that the incomplete integral of the first kind corresponds to the inverse of the function $\sn$. We could also generate integrals from the inverses of $\cn, \dn$. However from theory of elliptic functions, we know we can write the inverses of these in terms of $\sn^{-1}$, so transforms must exists for their corresponding integrals to reduce them to "known" forms. The same idea applies to the reduction of general elliptic integrals and we will see that now. 
\end{remark}

\begin{prop}
	A general elliptic integral can be written as 
	\eq{
		\int \psquare{y^{-1}R_1(x) + R_2(x)}\, dx 
	}	
\end{prop}
As a results of this, because any rational integral can be solved through partial fractions, in order to study general elliptic integrals we need know only how to deal with integrals of the form 
\eq{
	\int \frac{R(x)}{y} dx
}
Let us start to deal with these:
\subsubsection{\secmath{d=3}}
Write 
\eq{
	Q(x) = (x-e_0)(x-e_1)(x-e_2)
}
with $e_0,e_1,e_2$ distinct. Make the substitution 
\eq{
	x \mapsto x^2 + e_0
}
sending 
\eq{
	\frac{dx}{y} \mapsto \frac{2dx}{\sqrt{(x^2 + e_0 - e_1)(x^2 + e_0 - e_2)}}
}
The new $Q$ has roots $\pm \sqrt{e_1 - e_0}, \, \pm\sqrt{e_2 - e_0}$, so wlog we may take $d=4$.
\subsubsection{\secmath{d=4}}
We make now start procedurally:
\begin{enumerate}
	\item Write $Q(x) = (x-e_0)(x-e_1)(x-e_2)(x-e_3)$
	\item Send $e_0, \dots, e_3$ to $\pm1, \pm \frac{1}{k}$ using a fractional linear transform. This sends $Q(x) \mapsto (1-x^2)(1-k^2 x^2)$. This is possible if the cross ratio is 
	\eq{
		\frac{e_0 - e_1}{e_0 - e_3}\frac{e_2 - e_3}{e_2 - e_1} = \frac{4k}{(1+k)^2}
	}
	The distinctness of the $e$ means that the cross ratio is not $0,1,\infty$ and so $k \neq 0, \pm 1$. \hl{There is clearly a choice involved in k here, can it be shown that this choice does not matter, for example in simple cases?}
	\begin{remark}
		This value of the cross ratio can be calculated from the map that sends $-1 ,\frac{1}{k}, -\frac{1}{k} \mapsto 0,1,\infty$. This is the map 
		\eq{
			z \mapsto \frac{z+1}{z + \sfrac{1}{k}} \frac{\sfrac{2}{k}}{1+ \sfrac{1}{k}}	
		}
		This corresponds to mapping the roots as said above. We could consider a different way of mapping the roots, for example $e_0, e_1, e_2, e_3 \mapsto \frac{1}{k^\prime},-1,1,-\frac{1}{k^\prime}$. The symbol $k^\prime$ is used as the cross ratio for this change is now found from the map 
		\eq{
			z \mapsto \frac{z+1}{z+\sfrac{1}{k^\prime}} \frac{1+\sfrac{1}{k^\prime}}{2}
		}
		i.e. the cross ratio is 
		\eq{
			\frac{(1+k^\prime)^2}{4k^\prime}
		}
		We can relate $k^\prime$ to $k$ as 
	\end{remark}
	\item Write $R(x) = R_1(x^2) + xR_2(x^2)$ and note 
	\eq{
		\int \frac{xR_2(x^2)}{\sqrt{(1-x^2)(1-k^2x^2)}} dx  = \frac{1}{2} \int \frac{R_2(x^2)}{\sqrt{(1-x^2)(1-k^2x^2)}} d(x^2)
	}
	Hence this term reduces to previously solved cases ($d=2$). As such we are reduced to the case of
	\eq{
		\int \frac{R(x^2)}{y} dx
	}
	for $y^2 = (1-x^2)(1-k^2 x^2)$. 
	\item Use the identities 
	\eq{
		\frac{x^2-a}{x^2-b} &= 1 + \frac{b-a}{x^2-b} \\
		\frac{1}{(x^2-a)(x^2-b)} &= (a-b)^{-1}\pround{\frac{1}{x^2-a} - \frac{1}{x^2-b}}
	}
	to reduce to the classes of integrals
	\eq{
		I_n &= \int \frac{x^{2n}}{y} \, dx  \quad (n \geq 0) \\
		I_n^\prime &= \int \frac{(x^2-c^2)^n}{y} \, dx \quad (n < 0)
	}
	for $y^2 = (1-x^2)(1-k^2 x^2)$.
	\item Use relation 
	\eq{
		n I_{n-1} -\pround{n+\frac{1}{2}}(1+k^2)I_n + (n+1)k^2 I_{n+1} = x^{2n}y + \text{cst}
	}
	to reduce $I_n$ to $I_0$ and $I_1$. A similar technique can be applied to reduce $I_n^\prime$ to $I_{-1}^\prime$ and $I_0^\prime=I_0$. 
\end{enumerate}

\begin{idea}
	The irreducible incomplete integrals are those of the first, second, and third kind:
	\eq{
		I_0 &= \int \frac{1}{\sqrt{(1-x^2)(1-k^2x^2)}}	dx \\
		I_0 - k^2 I_1 &= \int \sqrt{\frac{1-k^2 x^2}{1-x^2}} dx \\
		I_{-1}^\prime &= \int \frac{1}{(x^2-c^2)\sqrt{(1-x^2)(1-k^2x^2)}}	dx
	}
\end{idea}

A lemma useful in the reduction is the following:
\begin{prop}
	Suppose the map sending $e_0, \dots, e_3 \mapsto \pm 1, \pm \frac{1}{k}$ is 
	\eq{
		f(z) = \frac{az+b}{cz+d}	
	}
	Then if we make the substitution $t = \frac{ax+b}{cx+d}$ we have 
	\eq{
		Q(x) = \prod(x-e_i) = \frac{(1-t^2)(1-k^2t^2)}{k^2(a-ct)^4 \prod (ce_i+d)^{-1}}
	}
	and 
	\eq{
		dx = \frac{ad-bc}{(a-ct)^2} dt 
	}
\end{prop}
\begin{proof}
	The inverse transform is 
	\eq{
		x = \frac{dt-b}{a-ct}	
	}
	so 
	\eq{
		x-e_i &= \frac{(dt-b) - e_i(a-ct)}{a-ct} \\
		&= \frac{(ce_i+d)t-(ae_i+b)}{a-ct} \\
		&= \frac{t - f(e_i)}{(a-ct)(ce_i+d)^{-1}}
	}
	The first part then follows by taking the product and knowing that the $f(e_i)$ are the roots of $(1-x^2)(1-k^2x^2)$, and mathching up the coefficient of $t^4$. For the second part we directly calculate. 
	\eq{
		dx &= \frac{d }{a-ct}(dt) +  \frac{dt-b}{(a-ct)^2}c(dt) \\
		&= \frac{ad-bc}{(a-ct)^2} \, (dt)
	}
\end{proof}

\begin{corollary}
	We have
	\eq{
		\int \frac{dx}{\sqrt{(x-e_0)(x-e_1)(x-e_2)(x-e_3)}}= \pm \frac{k(ad-bc)}{\prod \sqrt{ce_i + d}} \int \frac{dt}{\sqrt{(1-t^2)(1-k^2t^2)}}	
	}
	where the $\pm$ fixes the correct choice of sign. 
\end{corollary}

\begin{lemma}
	The map sending $-1,\frac{1}{k},-\frac{1}{k} \mapsto 0,1,\infty$ is 
	\eq{
		z \mapsto \frac{2k}{1+k} \frac{1+z}{1+kz}	
	} 
	and the inverse is 
	\eq{
		z \mapsto \frac{1}{k}\frac{(1+k)z-2k}{-(1+k)z+2}
	}
\end{lemma}
\begin{remark}
	\hl{The above map isn't normalised yet, so fix it}
\end{remark}

\begin{example}
	Consider the integral 
	\eq{
		I = \int_0^2 \frac{1}{\sqrt{(2x-x^2)(4x^2+9)}} dx	
	}
	We start by making $Q$ monic by pulling out the factor of $2$. This gives 
	\eq{
		I = \frac{1}{2}\int_0^2 \frac{1}{\sqrt{(2x-x^2)(x^2+\sfrac{9}{4})}} dx	
	}
	As such we have $Q(x) = -x(x-2)(x-\sfrac{3i}{2})(x+\sfrac{3i}{2})$. We can  calculate the cross ratio for sending $0 \mapsto C, 2 \mapsto 0, \frac{3i}{2} \mapsto 1, \frac{-3i}{2}\mapsto \infty$:
	\eq{
		C = \frac{0-2}{0+\sfrac{3i}{2}}\frac{\sfrac{3i}{2}+\sfrac{3i}{2}}{\sfrac{3i}{2}-2} = \frac{-4}{\sfrac{3i}{2}-2} = \frac{2i}{\sfrac{3}{4}+i}
	}
	This corresponds to a value of $k=\frac{i}{2}$. We want to construct a map sending $0,2,\frac{3i}{2},-\frac{3i}{2} \mapsto 1,-1,\frac{1}{k}, -\frac{1}{k}$ so we consider 
	\eq{
		z \mapsto \frac{z+b}{cz+d}
	}
	Imposing the conditions finds $b=d=-(1+c) = -\frac{3}{4}$. We can, without changing our answer, rescale all of these to integers (namely $a=4, b=-3, c=-1, d=-3$) to make the calculations easier. For this transform we find $ad-bc=-15$. Further
	\eq{
		- 0 -3&= -3 \\
		- 2 -3&= - 5 \\
		-\frac{3i}{2} -3&= -\pround{3 + \frac{3i}{2}}\\
		- \frac{-3i}{2} -3&= -\pround{3 - \frac{3i}{2}}
	} 
	giving 
	\eq{
		\prod (ce_i + d)^{-\frac{1}{2}} = \frac{2}{15\sqrt{3}}
	}
	so after the transform 
	\eq{
		I = \frac{-15i}{4}\times \frac{2}{15\sqrt{3}} \int_1^{-1} \frac{dt}{\sqrt{-(1-t^2)(1-k^2t^2)}} = \frac{1}{\sqrt{3}}K\pround{\frac{i}{2}}
	}
	for $k=\frac{i}{2}$. Using 
	\eq{
		K(ik) &= \frac{1}{\sqrt{1+k^2}} K\pround{\frac{k}{\sqrt{1+k^2}}} \\
		\Rightarrow K\pround{\frac{i}{2}} &= \frac{2}{\sqrt{5}} K \pround{\frac{1}{\sqrt{5}}}
	}
	we get 
	\eq{
		I = \int_0^2 \frac{1}{\sqrt{(2x-x^2)(4x^2+9)}} dx = \frac{2}{\sqrt{15}}K\pround{\frac{1}{\sqrt{5}}}
	}
\end{example}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Connection to Elliptic Functions}

Recall that when we defined the incomplete elliptic integrals,

Because of the differential equation for $\wp$ we have the following result:

\begin{prop}
	We have 
	\eq{
		z-z_0 = \frac{1}{2} \int_{\wp(z_0)}^{\wp(z)} \frac{dt}{\sqrt{(t-e_1)(t-e_2)(t-e_3)}} \quad \mod L
	}
	where the each value of the integral depends on the contour chosen. 
\end{prop}

\begin{example}
	Choosing the correct sign of the radicals, we have 
	\eq{
		\omega_1 &= \int_{\infty}^{e_1} \frac{dt}{\sqrt{(t-e_1)(t-e_2)(t-e_3)}} \\
		\omega_2 &= \int_{e_1}^{e_2} \frac{dt}{\sqrt{(t-e_1)(t-e_2)(t-e_3)}}
	}
\end{example}

We can also use the Weierstrass function to solve elliptic integrals.

\begin{example}
	Consider the integral 
	\eq{
		I(x) = \int_{\infty}^x \frac{dt}{\sqrt{t^4 + 6at^2 + b^2}}	
	}
	for $a,b \in \mbb{R}$. Make the substitution $s=t^2$ to get 
	\eq{
		I(x) = \frac{1}{2} \int_{\infty}^{x^2} \frac{ds}{\sqrt{s^3+ 6as^2 + b^2 s }} 
	}
	To put this bottom cubic in Weierstrass form we need to remove the $s^2$ term, which can be achieved by making the translation $u = s+2a$. Then 
	\eq{
		I(x) &= \frac{1}{2}\int_{\infty}^{x^2+2a} \frac{du}{\sqrt{u^3 - (12a^2-b^2)u - 2a(b^2-8a^2)}} \\
		&= \int_{\infty}^{x^2+2a} \frac{du}{\sqrt{4u^3 - 4(12a^2-b^2)u - 8a(b^2-8a^2)}}
	}
	This is in Weierstrass form with $g_2 = 4(12a^2-b^2), \, g_3 = 8a(b^2-8a^2)$. The final result is 
	\eq{
		I(x) =  \wp^{-1}(x^2+2a \, | \, 4(12a^2-b^2), \, 8a(b^2-8a^2))
	} 
	
\end{example}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Abel's Inversion Theorem}

We start by noting to following connection, a complex torus $X = \faktor{\mbb{C}}{L}$ with $e_1, e_2. e_3$ given, has the behaviour 
\eq{
	[\wp^\prime]^2 = 4(\wp-e_1)(\wp-e_2)(\wp-e_3)
}
in it's function field. 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\bibliographystyle{../../bib/custom-bib-style}
\bibliography{../../bib/jabref_library.bib}

\end{document}
